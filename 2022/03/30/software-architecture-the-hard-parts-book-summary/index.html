<!DOCTYPE html>
<!--[if lt IE 8 ]><html class="no-js ie ie7" lang="en"> <![endif]--><!--[if IE 8 ]><html class="no-js ie ie8" lang="en"> <![endif]--><!--[if IE 9 ]><html class="no-js ie ie9" lang="en"> <![endif]--><!--[if (gte IE 9)|!(IE)]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head>

   <!--- Basic Page Needs
   ================================================== -->
   <meta charset="utf-8" />
	<title>Book notes: Software Architecture: The Hard Parts</title>
	<meta content="Book notes on &quot;Software Architecture: The Hard Parts&quot; by Neal Ford, Mark Richards, Pramod Sadalage and Zhamak Dehghani" name="description" /><meta content="Book review notes summary software architecture the hard parts microservices monolith" name="keywords" /><meta content="Daniel Lebrero Berna" name="author" /><meta content="Book notes: Software Architecture: The Hard Parts" property="og:title" /><meta content="Book notes on &quot;Software Architecture: The Hard Parts&quot; by Neal Ford, Mark Richards, Pramod Sadalage and Zhamak Dehghani" property="og:description" /><meta content="https://danlebrero.com/2022/03/30/software-architecture-the-hard-parts-book-summary/" property="og:url" /><meta content="Book notes: Software Architecture: The Hard Parts" name="twitter:title" /><meta content="Book notes on &quot;Software Architecture: The Hard Parts&quot; by Neal Ford, Mark Richards, Pramod Sadalage and Zhamak Dehghani" name="twitter:description" /><meta content="summary_large_image" name="twitter:card" /><meta content="https://danlebrero.com/images/blog/books/software-architecture-the-hard-parts.jpg" name="twitter:image" /><meta content="https://danlebrero.com/images/blog/books/software-architecture-the-hard-parts.jpg" property="og:image" />
	<meta name="twitter:site" content="@danlebrero" />
	<meta name="twitter:creator" content="@danlebrero" />
	<link rel="canonical" href="https://danlebrero.com/2022/03/30/software-architecture-the-hard-parts-book-summary/" />

	<link rel="alternate" type="application/rss+xml" title="Daniel Lebrero Berna Blog" href="/feed.rss" />
	<!-- Mobile Specific Metas
    ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

	<!-- CSS
    ================================================== -->
   <link rel="stylesheet" href="/css/base.css" />
	<link rel="stylesheet" href="/css/main.css" />
   <link rel="stylesheet" href="/css/media-queries.css" />
   <link rel="stylesheet" href="/css/railscasts.css" />
   <link rel="stylesheet" href="/css/shariff.min.css" />

   <!-- Script
   =================================================== -->
	<script src="/js/modernizr.js"></script>

   <!-- Favicons
	=================================================== -->
	<link rel="shortcut icon" href="/favicon.ico" />

	<!-- Google tag (gtag.js) -->
	<script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-3KPNQF7Y7S"></script>
	<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3KPNQF7Y7S');
</script>	<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css" />
	<style type="text/css">#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }</style>
</head>

<body>

   <!-- Header
   =================================================== -->
   <header id="main-header">

   	<div class="row header-inner">

	      <!--div class="logo">
	         <a class="smoothscroll" href="#hero">Puremedia.</a>
	      </- -div-->

	      <nav id="nav-wrap">         
	         
	         <a class="mobile-btn" href="#nav-wrap" title="Show navigation">
	         	<span class="menu-text">Show Menu</span>
	         	<span class="menu-icon"></span>
	         </a>
         	<a class="mobile-btn" href="#" title="Hide navigation">
         		<span class="menu-text">Hide Menu</span>
         		<span class="menu-icon"></span>
         	</a>         

	         <ul id="nav" class="nav">
	            <li class="current"><a href="/">Home.</a></li>
				<!--<li id="menu-work"><a class="smoothscroll" href="/portfolio.html">Works.</a></li>-->
				 <li id="menu-archives"><a href="/archives/">Archives.</a></li>
<!--				 <li id="menu-popular"><a class="smoothscroll" href="/popular/">Popular entries.</a></li>-->
	         </ul>

	      </nav> <!-- /nav-wrap -->	      

	   </div> <!-- /header-inner -->

   </header>


   <!-- Page Title
   ================================================== -->
   <section id="page-title">

		<div class="row">

			<div class="twelve columns">

				<p id="the-title"><a href="/">@DanLebrero<span>.</span></a></p>
				<p>software, simply</p>

			</div>

		</div> <!-- /row -->

   </section> <!-- /page-title -->


   <!-- Content
   ================================================== -->
   <section id="content">

   	<div class="row">

	   	<div id="main" class="tab-whole nine columns">

	         <article class="entry">

				 

				 <header class="entry-header">

						<h1 class="entry-title">Book notes: Software Architecture: The Hard Parts</h1>

						<div class="entry-meta">
							<ul>
								<li id="entry-date">Wed, 30 Mar 2022</li>
							</ul>
						</div>

					</header>

				 <p class="lead" id="entry-summary">Book notes on "Software Architecture: The Hard Parts" by Neal Ford, Mark Richards, Pramod Sadalage and Zhamak Dehghani</p>

				 <div class="entry-content-media">
						<div class="post-thumb">
							<img src="/images/blog/books/software-architecture-the-hard-parts.jpg" />
						</div>
					</div>
				 

					<div class="entry-content"><p>These are my notes on <a href="https://amzn.to/35b92Wj">Software Architecture: The Hard Parts</a> by <a href="https://twitter.com/neal4d">Neal Ford</a>, <a href="https://twitter.com/markrichardssa">Mark Richards</a>, <a href="https://twitter.com/pramodsadalage">Pramod Sadalage</a> and <a href="https://twitter.com/zhamakd">Zhamak Dehghani</a>.</p><p>A book full trade-off tables. The dream of any <a href="https://rpg.stackexchange.com/questions/64800/what-does-minmax-mean">MinMax RPG player</a>.</p><h1>Key Insights</h1>
<ul>
  <li>Timeless skill: How architects make decisions, and how to objectively weight trade-offs.</li>
  <li>SW architecture is in the service of data.</li>
  <li>Trade-off analysis:
  <ol>
    <li>Find what parts are entangles together.</li>
    <li>Analyze how they are coupled to one another.</li>
    <li>Assess trade-offs by determining the impact of change on interdependent systems.</li>
  </ol></li>
  <li>Primary reasons for breaking applications apart is:
  <ol>
    <li>Time to market (== agility == deployability + testability + maintainability)</li>
    <li>Scalability.</li>
    <li>Availability.</li>
    <li>Fault tolerance.</li>
  </ol></li>
  <li>Tactical forking: Copy the entire monolith, and delete the code not needed.</li>
  <li>Coupling is the most significant factor in determining the overall success and feasibility of breaking a monolith.</li>
  <li>Size components:
  <ul>
    <li>Not too big, not too small == ~ 1-2 standard deviation from average.</li>
  </ul></li>
  <li>Service granularity disintegrators:
  <ol>
    <li>Service Scope and Function:
    <ul>
      <li>Subjective, so don’t use alone.</li>
    </ul></li>
    <li>Code volatility:
    <ul>
      <li>If a component changes more frequently than others, consider to split it, so that deployment and testing scope is smaller.</li>
    </ul></li>
  </ol></li>
  <li>Strive for fine-grained libraries.</li>
  <li>The service that performs writes owns the data.</li>
  <li>As workflow complexity goes up, the need for an orchestrator raises.</li>
  <li>Tightly coupling violates one of the aspirational goals fo microservices, hence prefer loose contracts and consider using consumer-driven contracts.</li>
  <li><a href="https://martinfowler.com/articles/data-mesh-principles.html">Data Mesh</a>:
  <ul>
    <li>Like microservices but for analytical data.</li>
  </ul></li>
  <li>Often, a solution has many beneficial aspects, but lacks critical capabilities that prevent success.</li>
  <li>Generic solutions are rarely useful in real-world architectures without applying additional situation-specific context.</li>
  <li>Use concrete use cases.</li>
</ul><h1>TOC</h1>
<ul>
  <li><a href="#ch-1">Chapter 1 - What Happens When There Are No “Best Practices”?</a></li>
  <li><a href="#part-1">Part I - Pulling Things Apart</a>
  <ul>
    <li><a href="#ch-2">Chapter 2 - Discerning Coupling in SW Architecture</a></li>
    <li><a href="#ch-3">Chapter 3 - Architectural Modularity</a></li>
    <li><a href="#ch-4">Chapter 4 - Architectural Decomposition</a></li>
    <li><a href="#ch-5">Chapter 5 - Component-Based Decomposition Patterns</a></li>
    <li><a href="#ch-6">Chapter 6 - Pulling Apart Operational Data</a></li>
    <li><a href="#ch-7">Chapter 7 - Service Granularity</a></li>
  </ul></li>
  <li><a href="#p-2">Part II - Putting Things Back Together</a>
  <ul>
    <li><a href="#ch-8">Chapter 8 - Reuse Patterns</a></li>
    <li><a href="#ch-9">Chapter 9 - Data Ownership and Distributed Transactions</a></li>
    <li><a href="#ch-10">Chapter 10 - Distributed Data Access</a></li>
    <li><a href="#ch-11">Chapter 11 - Managing Distributed Workflow</a></li>
    <li><a href="#ch-12">Chapter 12 - Transactional Sagas</a></li>
    <li><a href="#ch-13">Chapter 13 - Contracts</a></li>
    <li><a href="#ch-14">Chapter 14 - Managing Analytical Data</a></li>
    <li><a href="#ch-15">Chapter 15 - Build Your Own Trade-off Analysis</a></li>
  </ul></li>
</ul><h2><a name="ch-1"></a>Chapter 1 - What Happens When There Are No “Best Practices”?</h2>
<ul>
  <li>Architects constantly face difficult problems that literally no one has faced before (due to context).</li>
  <li>Timeless skill: How architects make decisions, and how to objectively weight trade-offs.</li>
  <li>SW architecture is in the service of data.</li>
</ul><h2><a name="part-1"></a>Part I - Pulling Things Apart</h2><h2><a name="ch-2"></a>Chapter 2 - Discerning Coupling in SW Architecture</h2>
<ul>
  <li>No best practice exist that can you apply to real-world complex system.</li>
  <li>Trade-off analysis:
  <ol>
    <li>Find what parts are entangles together.</li>
    <li>Analyze how they are coupled to one another.</li>
    <li>Assess trade-offs by determining the impact of change on interdependent systems.</li>
  </ol></li>
  <li>Architecture quantum:
  <ul>
    <li>Independent deployable.</li>
    <li>High functional cohesion.</li>
    <li>High static coupling.</li>
    <li>Synchronous dynamic coupling.</li>
  </ul></li>
  <li>Dynamic coupling dimensions:
  <ul>
    <li>Communication: sync or async.</li>
    <li>Consistency: atomic or eventual.</li>
    <li>Coordination: orchestration or choreography.</li>
  </ul></li>
</ul><h2><a name="ch-3"></a>Chapter 3 - Architectural Modularity</h2>
<ul>
  <li>SW architecture must constantly change and adapt.</li>
  <li>Primary reasons for breaking applications apart is:
  <ol>
    <li>Time to market (== agility == deployability + testability + maintainability)</li>
    <li>Scalability.</li>
    <li>Availability.</li>
    <li>Fault tolerance.</li>
  </ol></li>
</ul><h2><a name="ch-4"></a>Chapter 4 - Architectural Decomposition</h2>
<ul>
  <li>Is a codebase decomposable?
  <ul>
    <li>Architect to decide. Tools:
    <ul>
      <li><a href="/2021/11/17/fundamentals-of-software-architecture-summary/#mainsequence">Distance to main sequence</a>.</li>
    </ul></li>
  </ul></li>
  <li>Component-based decomposition:
  <ul>
    <li>Enable migration to service-oriented architecture.</li>
  </ul></li>
  <li>Tactical forking:
  <ul>
    <li>When there is little internal structure.</li>
    <li>Copy the entire monolith, and delete the code not needed.</li>
  </ul></li>
</ul><h2><a name="ch-5"></a>Chapter 5 - Component-Based Decomposition Patterns</h2>
<ul>
  <li>Initially, apply in order:
  <ol>
    <li>Identify and size components:
    <ul>
      <li>Not too big, not too small == ~ 1-2 standard deviation from average.</li>
      <li>Size == # statements.</li>
      <li>Too big –&gt; split.</li>
    </ul></li>
    <li>Gather common domain components:
    <ul>
      <li>To eliminate duplication.</li>
      <li>Shared domain logic, not infrastructure.</li>
      <li>Mostly a manual process.</li>
    </ul></li>
    <li>Flatten components:
    <ul>
      <li>Component == leaf package/namespace.</li>
      <li>All code should be in a component.</li>
      <li>Move shared code to its own component.</li>
    </ul></li>
    <li>Determine component dependencies:
    <ul>
      <li>Coupling is the most significant factor in determining the overall success and feasibility of breaking a monolith.</li>
      <li>Both afferent and efferent coupling.</li>
      <li>Consider refactor to reduce coupling (like splitting a component in two).</li>
    </ul></li>
    <li>Create component domains:
    <ul>
      <li>Domains =~ service.</li>
      <li>Package structure:
      <ul>
        <li><code>ss .customer.billing  .payments .MonthlyBilling</code></li>
        <li><code>app.domain  .subdomain.component.class</code></li>
      </ul></li>
      <li>Move components to appropriate domain.</li>
    </ul></li>
    <li>Create domain services:
    <ul>
      <li><a href="/2021/11/17/fundamentals-of-software-architecture-summary/#ch-13">Service-based architecture</a>.</li>
      <li>Don’t apply this pattern until all domains have been identified and refactored.</li>
    </ul></li>
  </ol></li>
</ul><h2><a name="ch-6"></a>Chapter 6 - Pulling Apart Operational Data</h2>
<ul>
  <li>Evaluate data disintegrators and data integrators.</li>
  <li>Disintegrators:
  <ol>
    <li>Change control:
    <ul>
      <li>How many services are impacted by a DB change?</li>
      <li>All must be deployed at the same time.</li>
    </ul></li>
    <li>Connection management:
    <ul>
      <li>Are we reaching the max number of connections allowed by the DB?</li>
      <li>Are we running out of DB connections?</li>
    </ul></li>
    <li>Scalability:
    <ul>
      <li>Data is partitioned.</li>
    </ul></li>
    <li>Fault tolerance:
    <ul>
      <li>Avoid DB as a single point of failure.</li>
    </ul></li>
    <li>Increase Architecture Quantum.</li>
    <li>Need for different kinds of DBs.</li>
  </ol></li>
  <li>Integrators:
  <ol>
    <li>Data relationships:
    <ul>
      <li>Referential integrity.</li>
    </ul></li>
    <li>DB transactions.</li>
  </ol></li>
  <li>Steps to split a DB:
  <ol>
    <li>Analyze DB and create data domains:
    <ul>
      <li>Data domain: group of tables/triggers/stored procs related to one domain.</li>
    </ul></li>
    <li>Assign tabled to data domains:
    <ul>
      <li>Move tables to data domain (== DB schema).</li>
      <li>Allow for cross-schema joins.</li>
    </ul></li>
    <li>Separate DB connections to data domains:
    <ul>
      <li>Disallow cross-schema joins.</li>
      <li>Replace joins with service calls.</li>
    </ul></li>
    <li>Move schemas to separate DB servers.</li>
    <li>Switch over to independent DB servers:
    <ul>
      <li>Clean up old DB, do not connect to it.</li>
    </ul></li>
  </ol></li>
  <li>Selecting DB type:
  <ol>
    <li>Relational DB:
    <ul>
      <li>When not to use:
      <ul>
        <li>Graph structures with arbitrary depth.</li>
        <li>Horizontal scalability required.</li>
        <li>Availability (over consistency).</li>
        <li>Reactive stream APIs.</li>
      </ul></li>
    </ul></li>
    <li>Key-Value DB:
    <ul>
      <li>Key -&gt; blob.</li>
      <li>Single index.</li>
    </ul></li>
    <li>Document DB:
    <ul>
      <li>Key -&gt; JSON/XML.</li>
      <li>Multiple indices.</li>
    </ul></li>
    <li>Column Family DBs.</li>
    <li>Graph DB:
    <ul>
      <li>Beginners tend to add properties to relations, while seasoned add nodes and relations.</li>
    </ul></li>
    <li>New SQL DB:
    <ul>
      <li>Scalability of NoSQL with Relational DB features like ACID.</li>
      <li><a href="https://www.cockroachlabs.com/">CockroachDB</a></li>
    </ul></li>
    <li>Cloud Native DB:
    <ul>
      <li>Mix bag of DBs (including <a href="https://www.datomic.com">Datomic</a>).</li>
    </ul></li>
    <li>Time-Series DB.</li>
  </ol></li>
</ul><p>Support means “Programming language support, product maturity, SQ: support, community”.</p>
<div id="styles-table"></div><p><link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet" /> <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script></p>
<script>

var tabledata = [
    {id:1, name:"Relational", learn: 4, model:3, scale:2, fault:1, consis:5, support:4, read: "50% - 50%"},
    {id:2, name:"Key-Value", learn: 3, model:1, scale:4, fault:4, consis:2, support:3, read: "80% - 20%"},
    {id:3, name:"Document", learn: 3, model:3, scale:2, fault:3, consis:2, support:3, read: "70% - 30%"},
    {id:4, name:"Column", learn: 2, model:1, scale:4, fault:4, consis:1, support:2, read: "30% - 70%"},
    {id:5, name:"Graph", learn: 1, model:2, scale:3, fault:3, consis:3, support:2, read: "70% - 30%"},
    {id:6, name:"New SQL", learn: 3, model:3, scale:3, fault:3, consis:2, support:2, read: "50% - 50%"},
    {id:7, name:"Cloud Native", learn: 2, model:2, scale:4, fault:3, consis:3, support:2, read: "70% - 30%"},
    {id:8, name:"Time-Series", learn: 1, model:2, scale:4, fault:2, consis:3, support:2, read: "70% - 30%"}
];

var table = new Tabulator("#styles-table", {
    data:tabledata,           
    layout:"fitColumns",      
    responsiveLayout:false,  
    tooltips:true,            
    history:false,            
    pagination:false,       
    movableColumns:true,      
    movableRows:true,      
    resizableRows:false,      
    columns:[                 
        {title:"", field:"name"},
        {title:"Ease of learn", field:"learn", formatter:"star", hozAlign:"center"},
        {title:"Ease of data modeling", field:"model", formatter:"star", hozAlign:"center"},
        {title:"Scalability", field:"scale", formatter:"star", hozAlign:"center"},
        {title:"Availability", field:"fault", formatter:"star", hozAlign:"center"},
        {title:"Consistency", field:"consis", formatter:"star", hozAlign:"center"},
        {title:"Fault Tolerance", field:"fault", formatter:"star", hozAlign:"center"},
        {title:"Support", field:"support", formatter:"star", hozAlign:"center"},
        {title:"Read/write priority", field:"read", hozAlign:"center"}
    ],
});</script><h2><a name="ch-7"></a>Chapter 7 - Service Granularity</h2>
<ul>
  <li>Granularity == size == # of statements + # public interfaces.</li>
  <li>Granularity disintegrators:
  <ol>
    <li>Service Scope and Function:
    <ul>
      <li>Consider cohesion and size.</li>
      <li>Single responsibility principle.</li>
      <li>Subjective, so don’t use alone.</li>
    </ul></li>
    <li>Code volatility:
    <ul>
      <li>If a component changes more frequently than others, consider to split it, so that deployment and testing scope is smaller.</li>
    </ul></li>
    <li>Scalability and Throughput:
    <ul>
      <li>Some component needs to scale more than others.</li>
    </ul></li>
    <li>Fault tolerance:
    <ul>
      <li>One component more likely to crash and affect other component.</li>
    </ul></li>
    <li>Security:
    <ul>
      <li>Different security requirements per component.</li>
    </ul></li>
    <li>Extensibility:
    <ul>
      <li>If a new functionality will be more appropriate as a new service.</li>
    </ul></li>
  </ol></li>
  <li>Granularity integrators:
  <ol>
    <li>DB transactions.</li>
    <li>Workflow and choreography:
    <ul>
      <li>Too many inter-service callas:
      <ul>
        <li>Less fault tolerant.</li>
        <li>Less performant.</li>
      </ul></li>
    </ul></li>
    <li>Shared code (business code, not infrastructure).</li>
    <li>Data relationships.</li>
  </ol></li>
</ul><h1><a name="p-2"></a>Part II - Putting Things Back Together</h1><h2><a name="ch-8"></a>Chapter 8 - Reuse Patterns</h2>
<ol>
  <li>Code replication:
  <ul>
    <li>Copy and paste between services.</li>
    <li>Use for simple static code that is unlikely to change.</li>
  </ul></li>
  <li>Shared library:
  <ul>
    <li>Trade-off between dependency management and change control.</li>
    <li>In general, strive for fine-grained libraries.</li>
    <li>Use in homogeneous environments where shared code change is low to moderate.</li>
  </ul></li>
  <li>Shared service:
  <ul>
    <li>Easier to deploy changes, but:
    <ul>
      <li>Less performance, scalable, fault tolerant.</li>
      <li>Versioning can be more difficult.</li>
    </ul></li>
    <li>Good in:
    <ul>
      <li>Polyglot environments.</li>
      <li>High number of changes in shared functionality.</li>
    </ul></li>
  </ul></li>
  <li>Sidecars and service mesh:
  <ul>
    <li>Mostly for cross-cutting operational concerns.</li>
  </ul></li>
</ol>
<ul>
  <li>Reuse is derived via abstraction but operationalized by slow rate of change.</li>
</ul><h2><a name="ch-9"></a>Chapter 9 - Data Ownership and Distributed Transactions</h2>
<ul>
  <li>In general, the service that performs writes owns the data.</li>
  <li>Scenarios:
  <ol>
    <li>Simple ownership:
    <ul>
      <li>Only one writer.</li>
      <li>Writer owns the data.</li>
    </ul></li>
    <li>Common ownership:
    <ul>
      <li>Most services write to the table.</li>
      <li>Solution: create a new service that owns the data.</li>
    </ul></li>
    <li>Joint ownership:
    <ul>
      <li>Solutions:
      <ol>
        <li>Split table:
        <ul>
          <li>May required data replication/synchronization between services on delete/create of primary entity.</li>
        </ul></li>
        <li>Data domain techniques:
        <ul>
          <li>Both services own the table, so keep as it is.</li>
        </ul></li>
        <li>Delegate techniques:
        <ul>
          <li>One service owns the data, the other makes service calls.</li>
          <li>Consider owner by primary domain or by operational characteristic.</li>
        </ul></li>
        <li>Service consolidation technique:
        <ul>
          <li>Combine possible owners in a bigger service.</li>
        </ul></li>
      </ol></li>
    </ul></li>
  </ol></li>
  <li>Distribute transactions, eventual consistency patterns:
  <ol>
    <li>Background synchronization pattern:
    <ul>
      <li>Separate external process or service that periodically check data sources and keeps them in sync.</li>
      <li>Pro: no inter-service communication.</li>
      <li>Cons:
      <ul>
        <li>Slow eventual consistency.</li>
        <li>High coupling between sync process and all other processes.</li>
      </ul></li>
      <li>Complex implementation.</li>
    </ul></li>
    <li>Orchestrated Request-Based Pattern:
    <ul>
      <li>One process/service in charge of making synchronous requests to other services.</li>
      <li>Prefer a dedicated orchestrator.</li>
      <li>Pro:
      <ul>
        <li>Services still decoupled, if orchestrator is standalone.</li>
        <li>Favours consistency over availability.</li>
        <li>Atomic business requests.</li>
      </ul></li>
      <li>Cons:
      <ul>
        <li>Slower responsiveness.</li>
        <li>Complex error handling.</li>
        <li>Usually requires compensating transactions.</li>
      </ul></li>
    </ul></li>
    <li>Event-based pattern:
    <ul>
      <li>Pro:
      <ul>
        <li>Decoupled services.</li>
        <li>Fast data consistency.</li>
        <li>Fast responsiveness.</li>
      </ul></li>
      <li>Cons: complex error handling.</li>
    </ul></li>
  </ol></li>
</ul><h2><a name="ch-10"></a>Chapter 10 - Distributed Data Access</h2>
<ul>
  <li>Data access patterns:
  <ol>
    <li>Inter-service calls.</li>
    <li>Column schema replication:
    <ul>
      <li>Keep local copy of the other service data.</li>
    </ul></li>
    <li>Duplicated caching pattern:
    <ul>
      <li>Same as (2) but in-memory and using some product (Hazelcast, Ignite).</li>
      <li>Pro: data remains consistent and ownership is preserved.
      <ul>
        <li>How much I disagree on this?</li>
      </ul></li>
    </ul></li>
    <li>Data domain pattern:
    <ul>
      <li>Share DB, same as joint ownership.</li>
    </ul></li>
  </ol></li>
</ul><h2><a name="ch-11"></a>Chapter 11 - Managing Distributed Workflow</h2>
<ol>
  <li>Orchestration communication style:
  <ul>
    <li>Aka mediator.</li>
    <li>In microservices, one orchestrator per workflow.</li>
    <li>Responsibilities:
    <ul>
      <li>Workflow state.</li>
      <li>Optional behaviour.</li>
      <li>Error handling.</li>
      <li>Notification.</li>
    </ul></li>
  </ul></li>
  <li>Choreography communication style:
  <ul>
    <li>Workflow state management patterns:
    <ol>
      <li>Front controller pattern:
      <ul>
        <li>First called service owns the state.</li>
        <li>Other services may query and update the state.</li>
      </ul></li>
      <li>Stateless choreography:
      <ul>
        <li>Query individual services to know the state of the workflow.</li>
      </ul></li>
      <li>Stamp coupling:
      <ul>
        <li>Add workflow state in the message between services.</li>
        <li>Each service updates its part.</li>
      </ul></li>
    </ol></li>
  </ul></li>
</ol>
<ul>
  <li>As workflow complexity goes up, the need for an orchestrator raises.</li>
</ul><h1><a name="ch-12"></a>Chapter 12 - Transactional Sagas</h1>
<ul>
  <li><p>Types:</p>
  <ul>
    <li>Epic saga:
    <ul>
      <li>“Traditional”.</li>
      <li>Avoid.</li>
    </ul></li>
    <li>Phone Tag:
    <ul>
      <li>Like Epic but without a coordinator.</li>
    </ul></li>
    <li>Fairy Tale:
    <ul>
      <li>As Epic but without distributed transactions.</li>
    </ul></li>
    <li>Fantasy Fiction:
    <ul>
      <li>To improve the Epic saga performance, but it fails.</li>
    </ul></li>
    <li>Horror Story:
    <ul>
      <li>Building atomicity on top of async + no mediator.</li>
    </ul></li>
  </ul></li>
  <li><p>R/A stands for Responsiveness/Availability.</p></li>
  <li>S/E stands for Scale/Elasticity.</li>
</ul>
<table>
  <thead>
    <tr>
      <th>Saga </th>
      <th>Communication </th>
      <th>Consistency </th>
      <th>Coordination </th>
      <th>Coupling </th>
      <th>Complexity </th>
      <th>R/A </th>
      <th>S/E </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Epic </td>
      <td>Sync </td>
      <td>Atomic </td>
      <td>Orchestrated </td>
      <td>Very high </td>
      <td>Low </td>
      <td>Low </td>
      <td>Very low </td>
    </tr>
    <tr>
      <td>Phone Tag </td>
      <td>Sync </td>
      <td>Atomic </td>
      <td>Choreographed </td>
      <td>High </td>
      <td>High </td>
      <td>Low </td>
      <td>Low </td>
    </tr>
    <tr>
      <td>Fairy Tale </td>
      <td>Sync </td>
      <td>Eventual </td>
      <td>Orchestrated </td>
      <td>High </td>
      <td>Very low </td>
      <td>Medium </td>
      <td>High </td>
    </tr>
    <tr>
      <td>Time Travel </td>
      <td>Sync </td>
      <td>Eventual </td>
      <td>Choreographed </td>
      <td>Medium </td>
      <td>Low </td>
      <td>Medium </td>
      <td>High </td>
    </tr>
    <tr>
      <td>Fantasy Fiction </td>
      <td>Async </td>
      <td>Atomic </td>
      <td>Orchestrated </td>
      <td>High </td>
      <td>High </td>
      <td>Low </td>
      <td>Low </td>
    </tr>
    <tr>
      <td>Horror Story </td>
      <td>Async </td>
      <td>Atomic </td>
      <td>Choreographed </td>
      <td>Medium </td>
      <td>Very high </td>
      <td>Low </td>
      <td>Medium </td>
    </tr>
    <tr>
      <td>Parallel </td>
      <td>Async </td>
      <td>Eventual </td>
      <td>Orchestrated </td>
      <td>Low </td>
      <td>Low </td>
      <td>High </td>
      <td>High </td>
    </tr>
    <tr>
      <td>Anthology </td>
      <td>Async </td>
      <td>Eventual </td>
      <td>Choreographed </td>
      <td>Very low </td>
      <td>High </td>
      <td>High </td>
      <td>Very high </td>
    </tr>
  </tbody>
</table>
<ul>
  <li>Consider state machines (instead of atomic distributed transactions) to know the current state of a transactional saga.</li>
</ul><h1><a name="ch-13"></a>Chapter 13 - Contracts</h1>
<ul>
  <li>Anti-pattern: include in contract more information than needed.</li>
  <li>Strict contracts:
  <ul>
    <li>Pros:
    <ul>
      <li>Guaranteed contract fidelity.</li>
      <li>Versioned.</li>
      <li>Easier to verify at build time.</li>
      <li>Better documentation.</li>
    </ul></li>
    <li>Cons:
    <ul>
      <li>Tight coupling.</li>
      <li>Versioned.</li>
    </ul></li>
  </ul></li>
  <li>Loose contracts:
  <ul>
    <li>Pros:
    <ul>
      <li>Highly decoupled.</li>
      <li>Easier to evolve.</li>
    </ul></li>
    <li>Cons:
    <ul>
      <li>Contract management.</li>
      <li>Requires fitness functions.</li>
    </ul></li>
  </ul></li>
  <li>Tightly coupling violates one of the aspirational goals fo microservices, hence prefer loose contracts and consider using consumer-driven contracts.</li>
</ul><h1><a name="ch-14"></a>Chapter 14 - Managing Analytical Data</h1>
<ol>
  <li>Data Warehouse:
  <ul>
    <li>Transform data at ingestion.</li>
    <li>Brittle integration.</li>
    <li>Usually failed to deliver.</li>
    <li>Technical partition.</li>
  </ul></li>
  <li>Data Lake:
  <ul>
    <li>Transform data at usage time.</li>
    <li>Difficult to discover proper assets.</li>
    <li>PII and sensitive info issues.</li>
    <li>Technical partitioning.</li>
  </ul></li>
  <li>Data Mesh:
  <ul>
    <li>Like microservices but for analytical data.</li>
    <li>Principles:
    <ol>
      <li>Domain ownership of data:
      <ul>
        <li>Distributed and shared in a peer-to-peer fashion.</li>
      </ul></li>
      <li>Data as a product:
      <ul>
        <li>Data product quantum:
        <ul>
          <li>Adjacent and coupled to microservices.</li>
          <li>Always async communication.</li>
        </ul></li>
      </ul></li>
      <li>Self-service platform:
      <ul>
        <li>Oriented to sharing and consuming data.</li>
      </ul></li>
      <li>Computational federated governance:
      <ul>
        <li>Policies automated and embedded as sidecars.</li>
      </ul></li>
    </ol></li>
  </ul></li>
</ol><h1><a name="ch-15"></a>Chapter 15 - Build Your Own Trade-off Analysis</h1>
<ul>
  <li>Often, a solution has many beneficial aspects, but lacks critical capabilities that prevent success.</li>
  <li>Generic solutions are rarely useful in real-world architectures without applying additional situation-specific context.</li>
  <li>Use concrete use cases.</li>
  <li>Reduce trade-off analysis to a few key points:
  <ul>
    <li>Translate them to non-technical parlance for non-tech people.</li>
  </ul></li>
</ul></div>

				 

				 <hr />

				 <div class="cta">
					 <center>Did you enjoy it? <a href="https://twitter.com/DanLebrero" class="twitter-follow-button" data-show-count="true">Follow @DanLebrero</a><script async="async" src="//platform.twitter.com/widgets.js" charset="utf-8"></script> or share!</center>
				 </div>

				 <div class="shariff" data-lang="en" data-mail-url="mailto:" data-twitter-via="danlebrero" data-services="[&quot;reddit&quot;,&quot;twitter&quot;, &quot;linkedin&quot;,&quot;facebook&quot;,&quot;mail&quot;]"></div>

				 <p class="tags">
					 <span>Tagged in </span>:
					 <a href="/tags/Architecture/index.html">Architecture </a><a href="/tags/book_notes/index.html">book notes </a>
				 </p>

				 <div id="disqus_thread"></div>
				 <script id="disqus_script">
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://danlebrero.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
			 </article> <!-- /entry -->

	   	</div> <!-- /main -->

	      <div class="tab-whole three columns end" id="secondary">

				<aside id="sidebar">

	            <div class="widget-title">
	               <form class="ddg" name="x" action="//duckduckgo.com/">
						<input type="hidden" value="danlebrero.com" name="sites" />
						<input type="hidden" value="1" name="kh" />
						<input type="hidden" value="1" name="kn" />
						<input type="hidden" value="1" name="kac" />
						<input type="search" placeholder="Search" name="q" />
						<input type="submit" value="Go" class="button" />
					</form>

	            </div> <!-- /widget_search -->

	            <div class="widget widget_text">

	               <h5 class="widget-title">About me</h5>
	               <div class="textwidget">
					   <img class="pull-left" style="border-radius: 5a 0%;" src="https://en.gravatar.com/userimage/38792381/b0f54df774ad03c9b8c553be0af3b322.jpeg" />
					   Daniel Lebrero is a baby CTO, a teen remote worker, a mature Clojurian, an elder Architect, an ancient TDDer and an antediluvian Java dev.
					   <br />
					   With more than 20 years of software development experience, he has worked on monolithic websites, embedded applications, low latency systems, micro services, streaming applications and big data.
					   <br />
					   <p>Right now, Principal Software Engineer at <a href="https://www.lifecheq.co.za">LifeCheq</a>. Maybe <a href="https://lifecheq.freshteam.com/jobs">we are hiring.</a></p>
					   <p><b>Need help?</b> Reach me at <a href="https://twitter.com/DanLebrero"><i class="fab fa-twitter-square"></i></a>,
						   drop me an <a href="mailto:dlebrero@gmail.com"><i class="far fa-envelope"></i></a>
						   or connect with <a href="https://www.linkedin.com/in/danlebrero/"><i class="fab fa-linkedin"></i>.</a></p>
				   </div>

					<!--h5 class="widget-title">Next talks</h5>
					<div class="textwidget">
						<a href="https://www.wearedevelopers.com/sessions/java-with-a-clojure-mindset"><img src="/images/logo-wearedevelopers-2018.png"/></a>
					</div-->

					<div class="container">
					<!--div class="row">
						<div id="toprightbanner" class="widget six columns">
						</div>
						<div id="toprightbanner2" class="widget six columns">
						</div>
					</div-->
					</div>

			      </div> <!-- /widget_text -->

					<div class="widget">
						<h5 class="widget-title"><a href="/archives/">Archives</a></h5>
<!--						<h5 class="widget-title"><a href="/popular/">Popular Entries</a></h5>-->
						<h5 class="widget-title">RSS feed: <a href="/feed.rss"><img src="/images/feed.png" /></a></h5>
						<!-- Begin Mailchimp Signup Form -->
						<form action="https://danlebrero.us7.list-manage.com/subscribe/post?u=261eea2437ba4ca873e34b694&amp;id=eec8fa45ea" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="novalidate">
							<div id="mc_embed_signup_scroll">
								<h5 class="widget-title">Subscribe by email:</h5>
								<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required="required" />
								<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" />
								<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_261eea2437ba4ca873e34b694_eec8fa45ea" tabindex="-1" value="" /></div>
							</div>
						</form>

						<!--End mc_embed_signup-->
					</div>

	            <div class="widget widget_categories">

	               <h5 class="widget-title">Categories</h5>
	               <ul id="categories" class="link-list group"><li><a href="/tags/Architecture/index.html">Architecture (41)</a></li><li><a href="/tags/CTO_diary/index.html">CTO diary (9)</a></li><li><a href="/tags/Career/index.html">Career (11)</a></li><li><a href="/tags/Clojure/index.html">Clojure (37)</a></li><li><a href="/tags/Humour/index.html">Humour (12)</a></li><li><a href="/tags/Java/index.html">Java (7)</a></li><li><a href="/tags/Kafka/index.html">Kafka (8)</a></li><li><a href="/tags/Kubernetes/index.html">Kubernetes (5)</a></li><li><a href="/tags/Talks/index.html">Talks (12)</a></li><li><a href="/tags/book_notes/index.html">book notes (53)</a></li><li><a href="/tags/good_practices/index.html">good practices (27)</a></li><li><a href="/tags/resilience/index.html">resilience (7)</a></li><li><a href="/tags/testing/index.html">testing (10)</a></li></ul>

	            </div> <!-- /widget_categories -->

					<div class="widget widget_categories">

						<!--h5 class="widget-title">Now Reading</h5>
						<iframe sandbox="allow-popups allow-scripts allow-modals allow-forms allow-same-origin" style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//ws-na.amazon-adsystem.com/widgets/q?ServiceVersion=20070822&OneJS=1&Operation=GetAdHtml&MarketPlace=US&source=ss&ref=as_ss_li_til&ad_type=product_link&tracking_id=danlebrero-20&language=en_US&marketplace=amazon&region=US&placement=1950508838&asins=1950508838&linkId=1abcab6ed414fe6ad50e093b9d78cb44&show_border=true&link_opens_in_new_window=true"></iframe></iframe-->
					</div>


	             <!-- /widget_tag_cloud -->

	         </aside> <!-- /sidebar -->

	      </div> <!-- /secondary -->

	   </div> <!-- /row -->

   </section> <!-- /content -->


   <!-- Footer
   ================================================== -->
   <footer>

	   <p class="copyright">© Copyright 2016 Daniel Lebrero. Design by <a href="http://www.styleshout.com/">Styleshout.</a></p>

	   <div id="go-top">
		   <a class="smoothscroll" title="Back to Top" href="#content"><span>Top</span><i class="fas fa-long-arrow-alt-up"></i></a>
	   </div>


   </footer> <!-- /footer -->


   <!-- Java Script
   ================================================== -->
	<div id="scripts" style="display:none;">
	   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	   <script src="/js/jquery-1.10.2.min.js"></script>
	   <script type="text/javascript" src="/js/jquery-migrate-1.2.1.min.js"></script>
	   <script src="/js/jquery.flexslider.js"></script>
	   <script src="/js/jquery.fittext.js"></script>
	   <script src="/js/backstretch.js"></script>
	   <script src="/js/waypoints.js"></script>
	   <script src="/js/main.js"></script>
	   <script src="/js/highlight.pack.10.5.0.js"></script>
	   <script src="/js/shariff.min.js"></script>
	   <script>hljs.initHighlightingOnLoad();</script>
	   <script>
$(document).ready(function() {
	$(".shariff").find('a').each(function() {
		var which = $(this).attr("title").substr(9);;
		$(this).click(function(event) {
			ga('send', 'social', which, 'share', window.location.href);
		});
	});
});
		</script>
	   <div id="debug" style="display: none;">
	   </div>
   </div>

</body>

</html>