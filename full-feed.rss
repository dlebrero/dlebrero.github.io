<?xml version='1.0' encoding='UTF-8'?>
<rss version='2.0' xmlns:atom='http://www.w3.org/2005/Atom'>
<channel>
<atom:link href='https://danlebrero.com' rel='self' type='application/rss+xml'/>
<title>
Daniel Lebrero Berna Blog
</title>
<link>
https://danlebrero.com
</link>
<language>
en
</language>
<lastBuildDate>
Wed, 11 Nov 2020 00:00:00 +0100
</lastBuildDate>
<pubDate>
Wed, 11 Nov 2020 00:00:00 +0100
</pubDate>
<description>
Daniel Lebrero blog
</description>
<generator>
clj-rss
</generator>
<item>
<title>
CTO day 1: first steps and hiring framework
</title>
<link>
https://danlebrero.com/2020/11/11/cto-diary-definition-first-steps-hiring-framework/
</link>
<guid>
https://danlebrero.com/2020/11/11/cto-diary-definition-first-steps-hiring-framework/
</guid>
<pubDate>
Wed, 11 Nov 2020 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;About a year ago, I agreed to be promoted to interim CTO at Akvo.&lt;/p&gt;&lt;p&gt;This is the &amp;ldquo;first steps that I took&amp;rdquo; on a series of blog posts about it.&lt;/p&gt;&lt;h2&gt;So, what is a CTO again?&lt;/h2&gt;&lt;p&gt;Nobody will give you a clear definition because the expectations for the role are very context specific. &lt;/p&gt;&lt;p&gt;Context being the organization and each organization being unique, this is how I understood Akvo back then:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/cto/organization-before.jpg&quot; alt=&quot;organization before&quot; /&gt; &lt;/p&gt;&lt;p&gt;The partnership team had plenty of structure, but from my point of view it was just an amorphous blob of people that I rarely had to interact with. They were &amp;ldquo;The Business&amp;rdquo;.&lt;/p&gt;&lt;p&gt;The Head of Product Development position has been vacant for more than nine months and the Management Team shrinked a few months back leaving the Technical Director out. &lt;/p&gt;&lt;p&gt;The Solutions Director has been taking care of all the software teams during this time, and we have formed a &amp;ldquo;Council of Elders&amp;rdquo; with all the technical team leads to cover for the most technical aspects until there was a new CTO.&lt;/p&gt;&lt;p&gt;Given my very technical background, the existence of the Council of Elders and that the CTO position was going to report to the Solutions Director, I understood it was a mostly technical position, being the Solutions Director still responsible for the product managers and the design team. &lt;/p&gt;&lt;p&gt;That suited me well.&lt;/p&gt;&lt;p&gt;Shortly after accepting the role, I learned that the Solutions Director was leaving in a few months.&lt;/p&gt;&lt;p&gt;So to my surprise, I found myself leading a team of 17, owning five different products and having to manage for the first time people outside my area of expertise. Is it even possible to be a good manager if you have no clue what those people are doing or talking about?&lt;/p&gt;&lt;h2&gt;A mentor&lt;/h2&gt;&lt;p&gt;Conscious of my own limitations and lack of experience, I started looking for a fellow CTO mentor without too much luck. &lt;/p&gt;&lt;p&gt;Grumbling about it with an old friend from university, &lt;a href=&quot;https://www.linkedin.com/in/jrbronet/&quot;&gt;Jose Bronet&lt;/a&gt;, he offered his help. As Senior Director at Cisco he has been managing big teams for years.&lt;/p&gt;&lt;p&gt;This is the only piece of advice that I will give you today: find yourself a good mentor. &lt;/p&gt;&lt;p&gt;Jose&amp;rsquo;s help has been invaluable.&lt;/p&gt;&lt;h2&gt;First steps&lt;/h2&gt;&lt;p&gt;We started the mentorship with the following activities:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Read “Becoming a Tech lead”. Very insightful. &lt;a href=&quot;/2019/11/27/becoming-a-technical-leader-book-notes/#content&quot;&gt;Here&lt;/a&gt; are my notes.&lt;/li&gt;
  &lt;li&gt;Understand and apply &lt;a href=&quot;/2020/04/01/no-nonsense-leadership-summary/#ch-2&quot;&gt;Situational leadership&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Loads of work to understand how Akvo’s side of the business works.&lt;/li&gt;
  &lt;li&gt;Know yourself:
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.authentichappiness.sas.upenn.edu/questionnaires/survey-character-strengths&quot;&gt;Your streghts&lt;/a&gt;: &lt;em&gt;Curiosity and interest in the world&lt;/em&gt; is my top one.&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;/images/blog/cto/learning-styles-questionnaire.doc&quot;&gt;Learning style&lt;/a&gt;: I am a reflector/theorist.&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.16personalities.com&quot;&gt;MBTI test&lt;/a&gt;: I am a &lt;a href=&quot;https://www.16personalities.com/profiles/0b8c2bee205b9&quot;&gt;logician (INTP-T)&lt;/a&gt;:
    &lt;ul&gt;
      &lt;li&gt;&amp;ldquo;Tend to share thoughts that are not fully developed, using others as a sounding board for ideas and theories in a debate against themselves rather than as actual conversation partners&amp;rdquo;.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;List of my values:
    &lt;ul&gt;
      &lt;li&gt;Curiosity&lt;/li&gt;
      &lt;li&gt;Passion&lt;/li&gt;
      &lt;li&gt;Accountability&lt;/li&gt;
      &lt;li&gt;Safety&lt;/li&gt;
      &lt;li&gt;Joy&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Writing down what being a good CTO means:
  &lt;ul&gt;
    &lt;li&gt;Technically capable:
    &lt;ul&gt;
      &lt;li&gt;Coding.&lt;/li&gt;
      &lt;li&gt;Architecture.&lt;/li&gt;
      &lt;li&gt;Software process and practices.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Align software development strategy with business strategy:
    &lt;ul&gt;
      &lt;li&gt;Buy vs build, Refactor vs Rewrite.&lt;/li&gt;
      &lt;li&gt;Stop useless development.&lt;/li&gt;
      &lt;li&gt;Keep an eye on new trends.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Able to communicate up the technical aspects and down the business aspects.&lt;/li&gt;
    &lt;li&gt;Empowers teams:
    &lt;ul&gt;
      &lt;li&gt;Gives them autonomy.&lt;/li&gt;
      &lt;li&gt;Gives them a vision.&lt;/li&gt;
      &lt;li&gt;Makes constraints clear.&lt;/li&gt;
      &lt;li&gt;Supports their decisions.&lt;/li&gt;
      &lt;li&gt;Hires, fires and retains the correct people:
      &lt;ul&gt;
        &lt;li&gt;To retain, grow people.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Provide problems, not solutions.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Teaches and inspires.&lt;/li&gt;
    &lt;li&gt;Creates connections between teams, between departments, so they have enough information.&lt;/li&gt;
    &lt;li&gt;Works on the correct problem.&lt;/li&gt;
    &lt;li&gt;Know his weaknesses and asks for help.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;I would also recommend to read &lt;a href=&quot;https://www.pluralsight.com/resource-center/guides/first-60-days/thank-you&quot;&gt;Your first 60 days as a CIO&lt;/a&gt; and sight up for &lt;a href=&quot;https://levelup.patkua.com&quot;&gt;Patrick Kua’s newsletter&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;SMART challenges&lt;/h2&gt;&lt;p&gt;Jose’s answer to how to manage people outside your expertise area is to challenge your reportees to ensure their work and ideas are Specific, Measurable, Attainable, Realistic and Time bound (aka SMART).&lt;/p&gt;&lt;p&gt;Questioning on all those aspects confirms if the reportee understands the problem, possible solution, and that their decisions are data based. &lt;/p&gt;&lt;p&gt;Questioning will highlight missing information and holes in the reportee line of thought and will help them find their own solutions.&lt;/p&gt;&lt;p&gt;Questioning gives you more information, which will allows for making better informed decisions down the line.&lt;/p&gt;&lt;p&gt;This technique is not only useful with your reportees but also with your peers and boss, and most importantly with yourself.&lt;/p&gt;&lt;h2&gt;Career paths and hiring framework&lt;/h2&gt;&lt;p&gt;It takes nine to twelve months to replace the wrong hire, so hiring the right people first time around is crucial.&lt;/p&gt;&lt;p&gt;For this I started working on a hiring framework:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Identify three to five Values that are the most important.&lt;/li&gt;
  &lt;li&gt;Hiring framework is aimed to score the candidate on those Values.&lt;/li&gt;
  &lt;li&gt;Interview questions must always be the same to avoid some biases.&lt;/li&gt;
  &lt;li&gt;Each question should be related to one Value in the framework.&lt;/li&gt;
  &lt;li&gt;Score each question with a red (0 points), yellow (1 point) or green (2 points).&lt;/li&gt;
  &lt;li&gt;Sum up all the scores per Value.&lt;/li&gt;
  &lt;li&gt;For each Value, determined the point range for a green, yellow or red:
  &lt;ul&gt;
    &lt;li&gt;For example, a green in Passion is 8-12, a yellow 5-7, a red less than 5.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Each Value can have different ranges.&lt;/li&gt;
  &lt;li&gt;Define which combinations of Value colours are acceptable. Example:
  &lt;ul&gt;
    &lt;li&gt;At least 3 green and two yellows, or&lt;/li&gt;
    &lt;li&gt;Tech capability must be green and at least two other yellow, or&lt;/li&gt;
    &lt;li&gt;If tech capability is yellow, at least three others must be green.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The expectation is that the hiring framework will make the hiring faster, consistent and remove biases.&lt;/p&gt;&lt;p&gt;To give clarity to the team, I worked in parallel on a career path for Akvo’s technical staff. &lt;/p&gt;&lt;p&gt;I would recommend &lt;a href=&quot;https://twitter.com/polotek&quot;&gt;Marco Rogers&lt;/a&gt;&amp;rsquo; &lt;a href=&quot;https://www.youtube.com/watch?v=jA1Q94d2z10&quot;&gt;Creating a career ladder for engineers&lt;/a&gt; talk, &lt;a href=&quot;https://twitter.com/skamille&quot;&gt;Camille Fournier&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;/2020/07/22/the-managers-path-book-summary/#content&quot;&gt;The Manager&amp;rsquo;s Path&lt;/a&gt;, and &lt;a href=&quot;https://www.progression.fyi&quot;&gt;https://www.progression.fyi&lt;/a&gt; has plenty of examples from well known companies.&lt;/p&gt;&lt;p&gt;But all this work went into shambles as my next task was not precisely hiring&amp;hellip;&lt;/p&gt;
</description>
</item>
<item>
<title>
Where TDD falls short, find yourself a good REPL
</title>
<link>
https://danlebrero.com/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/
</link>
<guid>
https://danlebrero.com/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/
</guid>
<pubDate>
Wed, 16 Sep 2020 09:00:00 +0200
</pubDate>
<description>
&lt;p&gt;Test-Driven Development (TDD) is by far the &lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;best workflow&lt;/a&gt; to get things done. &lt;/p&gt;&lt;p&gt;It has but one little problem: before you start doing, you need to understand and learn what must be done.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/tdd-repl/learning-doing.jpg&quot; alt=&quot;learning before doing&quot; /&gt; &lt;/p&gt;&lt;p&gt;The TDD workflow by itself does not help with the learning, but as most of our work is about changing existing code, the byproduct of TDD &amp;ndash; tests &amp;ndash;, can help us to learn how things are working now.&lt;/p&gt;
&lt;p class=&quot;sidenote&quot;&gt;Unfortunately tests usually do not help to understand why things are the way they are.&lt;/p&gt;&lt;p&gt;For novel work, neither the TDD workflow nor the existing test suite is of any use. For novel work, we need to use other sources and tools to acquire that knowledge.&lt;/p&gt;&lt;p&gt;We can split novel work into:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;New business logic.&lt;/li&gt;
  &lt;li&gt;Unfamiliar libraries and frameworks.&lt;/li&gt;
  &lt;li&gt;Side effects.&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;New business logic&lt;/h2&gt;&lt;p&gt;To learn about the new business logic to implement, you cannot start by writing tests, but neither can you start writing production code. &lt;/p&gt;&lt;p&gt;You will need to sit down with your business expert counterpart. &lt;/p&gt;&lt;p&gt;As you implement the new logic, you will need clarification, you will find edge cases, you will discover contradictions with the existing logic, &amp;hellip; all of which will require again of the business expert input, creating a loop between &lt;em&gt;doing&lt;/em&gt; and &lt;em&gt;learning&lt;/em&gt;:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/tdd-repl/learning-doing-loop.jpg&quot; alt=&quot;learning doing loop&quot; /&gt; &lt;/p&gt;&lt;p&gt;To make this feedback loop fast, the &lt;a href=&quot;http://www.extremeprogramming.org/rules/customer.html&quot;&gt;on-site customer practice&lt;/a&gt; may help you.&lt;/p&gt;&lt;p&gt;But your business expert will not have all the answers, and as part of the learning, you will together explore what is possible, what data would be required, what third parties should we integrate, what edge cases we will need to cover, &amp;hellip;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/tdd-repl/learning-exploration.jpg&quot; alt=&quot;exploration&quot; /&gt; &lt;/p&gt;&lt;p&gt;This exploration phase requires you to read loads of documentation, dig into databases, investigate third-party APIs, mix and match internal services, and sniff into your event queues.&lt;/p&gt;&lt;p&gt;And a REPL is the best tool for this.&lt;/p&gt;&lt;h2&gt;Unfamiliar libraries and frameworks&lt;/h2&gt;&lt;p&gt;Another area where you cannot jump into TDD is when you are using some library for the first time, or when using some part of a library that you are not exactly sure how it behaves.&lt;/p&gt;&lt;p&gt;For a long time, I used to write &amp;ldquo;assertion-less tests&amp;rdquo; with little pieces of code to exercise the library that I wanted to learn about and then set debugging breakpoints to inspect the data that was coming in and out or peak into the state of the system.&lt;/p&gt;&lt;p&gt;I would write dozens and dozens of those &amp;ldquo;exploratory&amp;rdquo; examples until I was confident enough to start &lt;em&gt;doing&lt;/em&gt;. But as I was &lt;em&gt;doing&lt;/em&gt;, I would need to go back to this technique when my knowledge of the library would falter again, moving from &lt;em&gt;doing&lt;/em&gt; to exploring several times per day:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/tdd-repl/learning-exploration-doing.jpg&quot; alt=&quot;learning, doing, exploration loop&quot; /&gt; &lt;/p&gt;&lt;p&gt;I wrote that exploratory code in the form of tests for no other reason than the IDE made it very easy to run them.&lt;/p&gt;&lt;p&gt;And a REPL is the best tool for this.&lt;/p&gt;&lt;h2&gt;Side effects&lt;/h2&gt;&lt;p&gt;Side effects make it very obvious all of our testing efforts are based on lies. &lt;/p&gt;&lt;p&gt;Mocks, stubs, fakes, spies: all lies to make our testing feedback loop &lt;a href=&quot;/2016/11/06/good-test-vs-bad-tests/#content&quot;&gt;robust and fast&lt;/a&gt;. &lt;/p&gt;
&lt;p class=&quot;sidenote&quot;&gt;All types of testing are based on lies. Some lies are more truthful than others, but your unit tests are a lie, your TEST environment is a big lie, your performance tests are a lie. The only real testing is actual users bashing your production system, but we call this type of testing &lt;a href=&quot;/2017/06/05/testing-or-monitoring-mtbf-mttr-make-your-choice/#content&quot;&gt;&quot;monitoring&quot;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The best thing is to avoid lies altogether. Why mock a database if running a local database can be robust and fast enough for your testing?&lt;/p&gt;&lt;p&gt;A lot of times this is not practical so we are forced to write those lies to keep our sanity. &lt;/p&gt;&lt;p&gt;To make our lies truthful, you need to understand pretty well the behavior of both the external system and the libraries that we will use to interact with them.&lt;/p&gt;&lt;p&gt;For this, we need to go back to the exploration phase, where we write lots of little programs to exercise the external system, to understand its behavior and misbehavior so that we fill up our knowledge and convert those &lt;strong&gt;unknown&lt;/strong&gt; side effects into &lt;strong&gt;known&lt;/strong&gt; side effects that we are confident enough to mock, fake or stub. &lt;/p&gt;&lt;p&gt;And a REPL is the best tool for this.&lt;/p&gt;
&lt;p class=&quot;sidenote&quot;&gt;This is why testing the frontend is so damn difficult. The side effect of the frontend is painting pixels on a screen and, no matter how many years of experience you have, this is a side effect that will never become a known side effect with so many screen sizes, browsers, and all their quirks.&lt;/p&gt;&lt;h1&gt;What is a REPL?&lt;/h1&gt;&lt;p&gt;Is like a command-line shell but using your production language. &lt;/p&gt;&lt;p&gt;It is like a Google DevTools console but within your IDE. &lt;/p&gt;&lt;p&gt;It is like an all-powerful debugger in your production environment.&lt;/p&gt;&lt;p&gt;It is like having a fluid conversation with your application, without any interruptions.&lt;/p&gt;&lt;h2&gt;Not any REPL but a good REPL.&lt;/h2&gt;&lt;p&gt;As not all REPL are born the same, you can read what to makes a &lt;a href=&quot;https://vvvvalvalval.github.io/posts/what-makes-a-good-repl.html&quot;&gt;good REPL good&lt;/a&gt;, but I have a very simple test: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You have a good REPL if you write all your code (exploratory, proof of concepts, one-off scripts, tests, and production) using a REPL. &lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Note that I said “using” a REPL and not “in” the REPL, which is an important distinction and what sets good REPLs apart.&lt;/p&gt;&lt;h2&gt;A REPL for exploring new business logic.&lt;/h2&gt;&lt;p&gt;A REPL allows for your exploration to be done in the most efficient way: by &lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;writing little programs&lt;/a&gt; using a Turing complete language. &lt;/p&gt;&lt;p&gt;And not any language, but your production language, the one you are the most familiar with, that makes you the most efficient, that you can use from your awesome IDE, and has all those libraries to connect to, dig into and inspect any data source.&lt;/p&gt;&lt;h2&gt;A REPL for exploring unfamiliar libraries.&lt;/h2&gt;&lt;p&gt;To learn about unfamiliar libraries, you need to read their docs and write loads and loads of experiments.&lt;/p&gt;&lt;p&gt;As &lt;a href=&quot;https://twitter.com/_JamesWard/status/1303530732615348224&quot;&gt;James Ward&lt;/a&gt; puts it:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Programming, no matter what level, is mostly trial &amp;amp; error. So before anything else, optimize for the shortest feedback loop possible.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;With a REPL, the feedback loop is immediate: there is no build, compilation, deploy, or start-up delay. &lt;/p&gt;&lt;p&gt;Compared with a script, a REPL allows you just chose which bits of the application or experiment you want to re-run, which makes it easier focus, instead of having to run a whole script all the time.&lt;/p&gt;&lt;p&gt;Once you get used to this feedback loop, even delays of a couple of seconds feel like &lt;a href=&quot;https://www.youtube.com/watch?v=_fNp37zFn9Q&quot;&gt;&amp;ldquo;living with lag&amp;rdquo;&lt;/a&gt;. You want to have a conversation with your application, not one of those &lt;a href=&quot;https://www.youtube.com/watch?v=j-WUJs0HYtI&quot;&gt;Skype conversations&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;A REPL for exploring side effects.&lt;/h2&gt;&lt;p&gt;It is quite usual to use specific tools to explore databases and other external systems, but those tools do not compose.&lt;/p&gt;&lt;p&gt;By using a REPL, you can again use a full Turing complete language and mix and max data from any system.&lt;/p&gt;&lt;p&gt;As a big plus, the side effect of exploring side effects with a REPL is &lt;em&gt;production code&lt;/em&gt; ready to be used, and data samples for your TDD workflow.&lt;/p&gt;&lt;h2&gt;A REPL for doing.&lt;/h2&gt;&lt;p&gt;The immediate feedback loop is not only extremely useful during the exploration phase, but also for &lt;em&gt;doing&lt;/em&gt;. &lt;/p&gt;&lt;p&gt;And the most important, with a REPL you are carving your application from inside it, building it from zero without ever having to stop it, adding functionality in baby steps.&lt;/p&gt;&lt;p&gt;As we are constantly moving between &lt;em&gt;doing&lt;/em&gt; and &lt;em&gt;learning&lt;/em&gt;, using the same tool for both doing and learning removes the friction of switching between tools and makes the feedback loop way faster.&lt;/p&gt;&lt;p&gt;If you want to learn more about the REPL, maybe you want to watch &lt;a href=&quot;/2018/11/26/repl-driven-development-immediate-feedback-for-you-backend/#content&quot;&gt;my talk about it&lt;/a&gt; or Stuart Halloway&amp;rsquo;s &lt;a href=&quot;https://vimeo.com/223309989&quot;&gt;REPL Driven Development&lt;/a&gt;.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Where TDD falls short, find yourself a good REPL (you are here)&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
Book notes: Good Strategy, Bad Strategy
</title>
<link>
https://danlebrero.com/2020/08/31/good-strategy-bad-strategy-summary/
</link>
<guid>
https://danlebrero.com/2020/08/31/good-strategy-bad-strategy-summary/
</guid>
<pubDate>
Mon, 31 Aug 2020 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on Professor Richard Rumelt&amp;rsquo;s &lt;a href=&quot;http://goodbadstrategy.com/&quot;&gt;Good Strategy / Bad Strategy&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;The book is an excellent introduction about what strategy is and what is not.&lt;/p&gt;&lt;p&gt;You can see Rumelt talking about the content of the book in &lt;a href=&quot;https://www.youtube.com/watch?v=UZrTl16hZdk&quot;&gt;this video&lt;/a&gt;.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Basic idea of strategy: apply strength to opportunity.&lt;/li&gt;
  &lt;li&gt;Subtle shifts in viewpoints is a huge source of strength.&lt;/li&gt;
  &lt;li&gt;Most useful shift in viewpoint: thinking about your own thinking.
  &lt;ul&gt;
    &lt;li&gt;Question your own ideas.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;A new strategy is an hypothesis and its implementation an experiment.&lt;/li&gt;
  &lt;li&gt;Good strategy:
  &lt;ul&gt;
    &lt;li&gt;Has:
    &lt;ol&gt;
      &lt;li&gt;Diagnosis:
      &lt;ul&gt;
        &lt;li&gt;Simplifies reality by identifying the critical aspects.&lt;/li&gt;
        &lt;li&gt;Answers: &amp;ldquo;What is going on here?&amp;rdquo;.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Guiding policy:
      &lt;ul&gt;
        &lt;li&gt;It channels action in certain direction without defining exactly what shall be done.&lt;/li&gt;
        &lt;li&gt;Drawn upon or creates sources of advantage.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Coherent action.&lt;/li&gt;
    &lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;Emphasize focus over compromise.&lt;/li&gt;
    &lt;li&gt;Build on knowledge only available to your company.&lt;/li&gt;
    &lt;li&gt;Is an advantage on itself.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Strategy is not about choice/decision but about design, more constructed than chosen.
  &lt;ul&gt;
    &lt;li&gt;Most of the work in system design is figuring out the interactions.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Strategy is as much what to do as what not to do.&lt;/li&gt;
  &lt;li&gt;The secret of using advantage is understanding the advantage itself:
  &lt;ul&gt;
    &lt;li&gt;Which kind it is.&lt;/li&gt;
    &lt;li&gt;Under which conditions it is.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Quality matters when quantity is an inadequate substitute.&lt;/li&gt;
  &lt;li&gt;The more uncertain the future, the more proximate objectives must be.
  &lt;ul&gt;
    &lt;li&gt;How proximate an objective is depends on the skills and accumulated resources of the organization.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Resources and tight coordination are partial substitutes for each other.&lt;/li&gt;
  &lt;li&gt;When change occurs, understand the forces underlying the main effect to find out the second order effects. These second effects are the ones to focus on.&lt;/li&gt;
  &lt;li&gt;Weakly managed organizations tend to be less organized and focused.&lt;/li&gt;
  &lt;li&gt;To change the culture, replace the alpha members.&lt;/li&gt;
  &lt;li&gt;Make a list.&lt;/li&gt;
  &lt;li&gt;Judgment can be practiced.&lt;/li&gt;
  &lt;li&gt;Learn both from successful and failing organizations.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#part-0&quot;&gt;Introduction: Overwhelming obstacles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-one&quot;&gt;Part one: Good and bad strategy&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;Chapter 1 - Good strategy is unexpected&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;Chapter 2 - Discovering power&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;Chapter 3 - Bad strategy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;Chapter 4 - Why so much bad strategy?&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;Chapter 5 - The Kernel of good strategy&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-2&quot;&gt;Part 2: Sources of power&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;Chapter 6 - Using leverage&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;Chapter 7 - Proximate objectives&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;Chapter 8 - Chain-link systems.&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;Chapter 9 - Using Design&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;Chapter 10 - Focus&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-11&quot;&gt;Chapter 11 - Growth&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-12&quot;&gt;Chapter 12 - Using advantage&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-13&quot;&gt;Chapter 13 - Using dynamics&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-14&quot;&gt;Chapter 14 - Inertia and entropy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-15&quot;&gt;Chapter 15 - Putting it together&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-3&quot;&gt;Part 3 - Thinking like a strategist&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-16&quot;&gt;Chapter 16 - The science of strategy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-17&quot;&gt;Chapter 17 - Using your head&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-18&quot;&gt;Chapter 18 - Keeping your head&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-0&quot;&gt;&lt;/a&gt;Introduction: Overwhelming obstacles&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Core of strategy work: Discovering the critical factors in a situation and designing a way of coordination and focusing actions to deal with those factors.&lt;/li&gt;
  &lt;li&gt;Good strategy honestly acknowledges the challenges being faces and provides an approach to overcoming them.&lt;/li&gt;
  &lt;li&gt;Strategy selects the path, identifying how, why, and where determination and leadership are to be applied.&lt;/li&gt;
  &lt;li&gt;Strategy must include concrete actions (&amp;ldquo;Implementation&amp;rdquo;).&lt;/li&gt;
  &lt;li&gt;Goal setting != strategy.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-one&quot;&gt;&lt;/a&gt;Part one: Good and bad strategy&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Basic idea of strategy: apply strength to opportunity.&lt;/li&gt;
  &lt;li&gt;Huge sources of strength:
  &lt;ul&gt;
    &lt;li&gt;Having a coherent strategy, one that creates strength.&lt;/li&gt;
    &lt;li&gt;Subtle shifts in viewpoints.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - Good strategy is unexpected&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Having a good strategy is an advantage because most companies do not have one and do not expect you to have one.&lt;/li&gt;
  &lt;li&gt;Apple strategy: survive and wait for the next big thing. Succeed on that next thing.&lt;/li&gt;
  &lt;li&gt;Strategy is as much what to do as what not to do.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Discovering power&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;When there is a successful company, there is always failing competition. Learn from both.
  &lt;ul&gt;
    &lt;li&gt;What the competition was not able to copy?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Wal-Mart: did not break conventional wisdom, it broke the definition of store.&lt;/li&gt;
  &lt;li&gt;US Department of Defense: From pure military capabilities to asymmetric cost on opponent.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - Bad strategy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Hallmarks of bad strategy:
  &lt;ol&gt;
    &lt;li&gt;Fluff:
    &lt;ul&gt;
      &lt;li&gt;Origin in [&amp;hellip;] and recently in the IT industry.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Failure to face the challenge.&lt;/li&gt;
    &lt;li&gt;Mistaking goals for strategy.&lt;/li&gt;
    &lt;li&gt;Bad strategic objectives:
    &lt;ul&gt;
      &lt;li&gt;Fail to address critical issues.&lt;/li&gt;
      &lt;li&gt;Impracticable.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;True expertise is making a complex subject understandable.&lt;/li&gt;
  &lt;li&gt;If a challenge is not defined, it is impossible to assess the quality of the strategy.&lt;/li&gt;
  &lt;li&gt;Strategy work is episodic, not annual.&lt;/li&gt;
  &lt;li&gt;One of the challenges of being a leader is mastering the shift from having others define your goals to being the architect of the organization&amp;rsquo;s purpose and objectives.&lt;/li&gt;
  &lt;li&gt;Goal: overall values and desires.&lt;/li&gt;
  &lt;li&gt;Objective: specific operational target.&lt;/li&gt;
  &lt;li&gt;Strategy transforms goals into coherent actionable objectives.&lt;/li&gt;
  &lt;li&gt;Underperformance is not a challenge. Is a result.
  &lt;ul&gt;
    &lt;li&gt;The true challenges are the reasons for it.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Why so much bad strategy?&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Bad strategy is the active avoidance of the hard work of crafting a good strategy.&lt;/li&gt;
  &lt;li&gt;Pathways to bad strategy:
  &lt;ol&gt;
    &lt;li&gt;Unwillingness or inability to choose:
    &lt;ul&gt;
      &lt;li&gt;Essential difficulty in creating strategy is not logical, it is choice itself.&lt;/li&gt;
      &lt;li&gt;Universal buy-in usually signals the absence of choice.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Template-style strategy:
    &lt;ul&gt;
      &lt;li&gt;Charisma does not guarantee effective leadership.&lt;/li&gt;
      &lt;li&gt;Charisma (transformational) leadership:
      &lt;ol&gt;
        &lt;li&gt;Set vision.&lt;/li&gt;
        &lt;li&gt;Inspire people to change for the org.&lt;/li&gt;
        &lt;li&gt;Empowers people to accomplish the vision.&lt;/li&gt;
      &lt;/ol&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;New Thought (aka New Age):
    &lt;ul&gt;
      &lt;li&gt;The believe that thinking in success and avoiding thinking in failure is enough to be successful.&lt;/li&gt;
      &lt;li&gt;A shared vision within an organization being required for success is part of the New Thought.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - The Kernel of good strategy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Good strategy has an essential logical structure called Kernel, that has:
  &lt;ol&gt;
    &lt;li&gt;Diagnosis:
    &lt;ul&gt;
      &lt;li&gt;Simplifies reality by identifying the critical aspects.&lt;/li&gt;
      &lt;li&gt;Leaders must absorb a large part of a situation/problem&amp;rsquo;s complexity and ambiguity and pass on to the organization a simpler problem, one that is solvable.&lt;/li&gt;
      &lt;li&gt;Answers: &amp;ldquo;What is going on here?&amp;rdquo;.&lt;/li&gt;
      &lt;li&gt;At minimum:
      &lt;ul&gt;
        &lt;li&gt;Names/classifies situation.&lt;/li&gt;
        &lt;li&gt;Links facts into patterns.&lt;/li&gt;
        &lt;li&gt;Highlights important issues.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;It defines a domain of action:
      &lt;ul&gt;
        &lt;li&gt;If no action can be derived from it, the diagnosis is useless.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;If a challenge is ill-structured, the diagnosis has to be an educated guess.&lt;/li&gt;
      &lt;li&gt;In business, most deep strategic changes are brought about by a change in diagnosis.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Guiding policy:
    &lt;ul&gt;
      &lt;li&gt;Overall approach to cope or overcome the obstacles identified in the diagnosis.&lt;/li&gt;
      &lt;li&gt;Drawn upon or creates sources of advantage.&lt;/li&gt;
      &lt;li&gt;It channels action in certain direction without defining exactly what shall be done.&lt;/li&gt;
      &lt;li&gt;Not goals or vision.&lt;/li&gt;
      &lt;li&gt;In nonprofit and public policy, good strategy creates advantage by magnifying the effects of resources and actions.&lt;/li&gt;
      &lt;li&gt;A good guiding policy itself can be a source of advantage by:
      &lt;ul&gt;
        &lt;li&gt;Anticipating actions of others.&lt;/li&gt;
        &lt;li&gt;Reducing complexity and ambiguity.&lt;/li&gt;
        &lt;li&gt;Concentrating effort on critical aspects.&lt;/li&gt;
        &lt;li&gt;Create coherent actions.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Coherent action:
    &lt;ul&gt;
      &lt;li&gt;Non conflicting and coordinated.&lt;/li&gt;
      &lt;li&gt;Resource commitments.&lt;/li&gt;
      &lt;li&gt;Coordination by itself can be a source of advantage.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Strategy is visible as coordinated action imposed on a system.
  &lt;ul&gt;
    &lt;li&gt;Imposed: exercise in centralized power used to overcome the natural workings of a system.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-2&quot;&gt;&lt;/a&gt;Part 2: Sources of power&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Using leverage&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Strategic leverage, mix of:
  &lt;ul&gt;
    &lt;li&gt;Anticipation:
    &lt;ul&gt;
      &lt;li&gt;Buyer demand.&lt;/li&gt;
      &lt;li&gt;Competition reactions.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Pivot points:
    &lt;ul&gt;
      &lt;li&gt;Small adjustment magnifies effect of effort.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Concentration:
    &lt;ul&gt;
      &lt;li&gt;Focus on few objectives.&lt;/li&gt;
      &lt;li&gt;Due to:
      &lt;ul&gt;
        &lt;li&gt;Limited resources.&lt;/li&gt;
        &lt;li&gt;Limited leadership cognition.&lt;/li&gt;
        &lt;li&gt;Perceived effectiveness:
        &lt;ul&gt;
          &lt;li&gt;A 100% improvement in one department seems more effective than a 10% improvement in 100 departments.&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Proximate objectives&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Proximate objective: one that is close enough at hand to be feasible.&lt;/li&gt;
  &lt;li&gt;Proximate objective is guided by forecast of the future.
  &lt;ul&gt;
    &lt;li&gt;The more uncertain the future, the more proximate objective must be.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;How proximate an objective is depends on the skills and accumulated resources of the organization.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Chain-link systems.&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Strengthen the weakest link.&lt;/li&gt;
  &lt;li&gt;Quality matters when quantity is an inadequate substitute.&lt;/li&gt;
  &lt;li&gt;Find limiting factors.&lt;/li&gt;
  &lt;li&gt;Quality matching: when each link is managed separately, the system can get stuck in a low-effectiveness state:
  &lt;ul&gt;
    &lt;li&gt;Quality of the chain is equal to the lowest link.&lt;/li&gt;
    &lt;li&gt;Improving on any other link is a waste.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Problems with chain-linked:
  &lt;ol&gt;
    &lt;li&gt;Identify bottlenecks.&lt;/li&gt;
    &lt;li&gt;Incremental change may not pay off and even make things worse:
    &lt;ul&gt;
      &lt;li&gt;Focus success measurement on change itself.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Excellence in a chain-linked system is difficult to replicate.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Using Design&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Strategy is not about choice/decision but about design, more constructed than chosen.&lt;/li&gt;
  &lt;li&gt;In design, issue of mutual adjustment:
  &lt;ul&gt;
    &lt;li&gt;Sharp gain or cost on getting the combinations right or wrong.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Most of the work in system design is figuring out the interactions.&lt;/li&gt;
  &lt;li&gt;A design-type strategy is an adroit configuration of resources and actions that yields an advantage in a challenging situation.&lt;/li&gt;
  &lt;li&gt;Given a set bundle of resources, the greater the competitive challenge, the greater the need for the clever, tight integration of resources and actions.&lt;/li&gt;
  &lt;li&gt;Given a set level of challenge, higher-quality resources lessen the need for the tight integration of resources and actions.&lt;/li&gt;
  &lt;li&gt;Resources and tight coordination are partial substitutes for each other.&lt;/li&gt;
  &lt;li&gt;Tight integration cost:
  &lt;ul&gt;
    &lt;li&gt;Harder to create.&lt;/li&gt;
    &lt;li&gt;Narrower focus.&lt;/li&gt;
    &lt;li&gt;More fragile.&lt;/li&gt;
    &lt;li&gt;Less flexible to change.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Strategic resource is one that competitors cannot duplicate without suffering a net economic loss.
  &lt;ul&gt;
    &lt;li&gt;High quality strategic resource yielding a powerful competitive advantage makes for great strategy simplicity (think useful patents).&lt;/li&gt;
    &lt;li&gt;But it can impede innovation.&lt;/li&gt;
    &lt;li&gt;Current profits are rarely associated with recent action, but with actions from the past.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Success leads to laxity and bloat, and these lead to decline.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Chapter 10 - Focus&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;To identify a company&amp;rsquo;s strategy:
  &lt;ol&gt;
    &lt;li&gt;Studying how competitors make their living.&lt;/li&gt;
    &lt;li&gt;Notice each policy on that company that are different from the norm in the industry.&lt;/li&gt;
    &lt;li&gt;Figure out the common target of those policies.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;When doing analysis, do not stop at the first reasonable explanation. Test against evidence.&lt;/li&gt;
  &lt;li&gt;Focus:
  &lt;ol&gt;
    &lt;li&gt;Coordination of policies that produce extra power through their interacting and overlapping effects.&lt;/li&gt;
    &lt;li&gt;Application of that power to the right markets.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-11&quot;&gt;&lt;/a&gt;Chapter 11 - Growth&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Growth cannot be brought through acquisitions.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-12&quot;&gt;&lt;/a&gt;Chapter 12 - Using advantage&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The secret of using advantage is understanding the advantage itself:
  &lt;ul&gt;
    &lt;li&gt;Which kind it is.&lt;/li&gt;
    &lt;li&gt;Under which conditions it is.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;By providing more value you avoid being a commodity.&lt;/li&gt;
  &lt;li&gt;When another person speaks, you hear both less and more than they mean.&lt;/li&gt;
  &lt;li&gt;A competitive advantage is interesting when one has insights into ways to increase its value.&lt;/li&gt;
  &lt;li&gt;Competitive advantage != high profitability.&lt;/li&gt;
  &lt;li&gt;Increasing value requires a strategy for:
  &lt;ul&gt;
    &lt;li&gt;Deepening advantages: increase value or reduce cost.&lt;/li&gt;
    &lt;li&gt;Broadening the extent of advantages:
    &lt;ul&gt;
      &lt;li&gt;Based on know-how is easier.&lt;/li&gt;
      &lt;li&gt;Based on customer beliefs (like brand) can damage if extension is a failure.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Creating higher demand.&lt;/li&gt;
    &lt;li&gt;Strengthening the isolation mechanism that blocks easy replication.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-13&quot;&gt;&lt;/a&gt;Chapter 13 - Using dynamics&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Restate a general question in specific terms help to answer the general question.&lt;/li&gt;
  &lt;li&gt;To gain strategic advantage, exploit a wave of change.&lt;/li&gt;
  &lt;li&gt;Waves of change are exogenous.&lt;/li&gt;
  &lt;li&gt;Most industries, most of the time, are fairly stable.&lt;/li&gt;
  &lt;li&gt;When change occurs, understand the forces underlying the main effect to find out the second order effects. These second effects are the ones to focus on.&lt;/li&gt;
  &lt;li&gt;To discern a wave of change, you need to understand the gritty details well enough to question experts.&lt;/li&gt;
  &lt;li&gt;Guidepost:
  &lt;ol&gt;
    &lt;li&gt;Rising fixed costs, especially product development.&lt;/li&gt;
    &lt;li&gt;Deregulation.&lt;/li&gt;
    &lt;li&gt;Predictable biases in forecasting:
    &lt;ul&gt;
      &lt;li&gt;Ignore the fact that all business trends peak and then decline.&lt;/li&gt;
      &lt;li&gt;Market leaders will duke it out for supremacy.&lt;/li&gt;
      &lt;li&gt;The future winners will be the current apparent winners.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Incumbent response (see (chapter 14)[#ch-14]).&lt;/li&gt;
    &lt;li&gt;Attractors state:
    &lt;ul&gt;
      &lt;li&gt;How the industry &amp;ldquo;should&amp;rdquo; work based on demand and overall efficiency.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-14&quot;&gt;&lt;/a&gt;Chapter 14 - Inertia and entropy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Entropy: weakly managed organizations tend to be less organized and focused.&lt;/li&gt;
  &lt;li&gt;Inertia:
  &lt;ul&gt;
    &lt;li&gt;Even when change programs at full speed, it can take years to alter a large company.&lt;/li&gt;
    &lt;li&gt;Types:
    &lt;ol&gt;
      &lt;li&gt;Routine:
      &lt;ul&gt;
        &lt;li&gt;If top management are convinced that new routines are essential, change can be quick.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Culture:
      &lt;ul&gt;
        &lt;li&gt;To break:
        &lt;ol&gt;
          &lt;li&gt;Simplification: it will highlight obsolete units, waste, bad behaviour.&lt;/li&gt;
          &lt;li&gt;Fragment the operation units.&lt;/li&gt;
          &lt;li&gt;Triage units: close, repair or empower.&lt;/li&gt;
        &lt;/ol&gt;&lt;/li&gt;
        &lt;li&gt;To change the culture, replace the alpha members.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;By proxy:
      &lt;ul&gt;
        &lt;li&gt;Abandon old profit streams.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ol&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-15&quot;&gt;&lt;/a&gt;Chapter 15 - Putting it together&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Nvidia strategy.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-3&quot;&gt;&lt;/a&gt;Part 3 - Thinking like a strategist&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Change in viewpoint is important when creating strategy.&lt;/li&gt;
  &lt;li&gt;Most useful shift in viewpoint: thinking about your own thinking.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-16&quot;&gt;&lt;/a&gt;Chapter 16 - The science of strategy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A new strategy is an hypothesis and its implementation an experiment.&lt;/li&gt;
  &lt;li&gt;Best knowledge to build good strategy is the one available only to your company.&lt;/li&gt;
  &lt;li&gt;If new insights or ideas are not needed, deduction is sufficient.&lt;/li&gt;
  &lt;li&gt;Strategy requires induction.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-17&quot;&gt;&lt;/a&gt;Chapter 17 - Using your head&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Make a short list of the most important and actionable.
  &lt;ul&gt;
    &lt;li&gt;Things to do, not things to worry about.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;It is unnatural, even painful, to question your own ideas.&lt;/li&gt;
  &lt;li&gt;Good strategy emphasize focus over compromise.&lt;/li&gt;
  &lt;li&gt;Judgment can be practiced:
  &lt;ul&gt;
    &lt;li&gt;Write down before every meeting what issues will arise and who will take which positions.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-18&quot;&gt;&lt;/a&gt;Chapter 18 - Keeping your head&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Independent, not eccentric.&lt;/li&gt;
  &lt;li&gt;Doubting without curmudgeon.&lt;/li&gt;
  &lt;li&gt;Errors in judgment:
  &lt;ol&gt;
    &lt;li&gt;Engineering overreach: when failure modes and consequences are not understood.&lt;/li&gt;
    &lt;li&gt;Smooth-sailing fallacy: when lack of recent failures make people overconfident.&lt;/li&gt;
    &lt;li&gt;Working under risk-seeking malincentives:
    &lt;ul&gt;
      &lt;li&gt;You profit if things go well, others pay if things go bad.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Social herding.&lt;/li&gt;
    &lt;li&gt;Inside view: believe &amp;ldquo;this case is different&amp;rdquo; despite data.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Book notes: Elements of Clojure
</title>
<link>
https://danlebrero.com/2020/08/12/elements-of-clojure-book-summary/
</link>
<guid>
https://danlebrero.com/2020/08/12/elements-of-clojure-book-summary/
</guid>
<pubDate>
Wed, 12 Aug 2020 10:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/ztellman&quot;&gt;Zachary Tellman&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://leanpub.com/elementsofclojure&quot;&gt;Elements of Clojure&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;There are some elements of Clojure on the book, but most of the content covered is universal to any language. &lt;/p&gt;&lt;p&gt;Zach has several talks were he covers the subjects of the book: &lt;a href=&quot;https://www.youtube.com/watch?v=JaKLSH4csqE&quot;&gt;names&lt;/a&gt;, &lt;a href=&quot;https://www.youtube.com/watch?v=x9pxbnFC4aQ&quot;&gt;abstraction&lt;/a&gt; and &lt;a href=&quot;https://clojuresync.com/zach-tellman/&quot;&gt;composition&lt;/a&gt;.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Good software is built through effective indirection.&lt;/li&gt;
  &lt;li&gt;Names are the most common way of creating indirection.&lt;/li&gt;
  &lt;li&gt;The act of writing software is the act of naming repeated over and over again.&lt;/li&gt;
  &lt;li&gt;Any project involving multiple people exists in a continuous state of low-level confusion.&lt;/li&gt;
  &lt;li&gt;We are constantly drawn to software we don&amp;rsquo;t know well enough to dislike.&lt;/li&gt;
  &lt;li&gt;The models of SW are build atop inductive analogies and aspire only to satisfice.&lt;/li&gt;
  &lt;li&gt;Broad assumptions means smaller models which means simpler code.
  &lt;ul&gt;
    &lt;li&gt;Over-engineered code == too few assumptions.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If a model cant fit in our head, it has little value.&lt;/li&gt;
  &lt;li&gt;Build SW from principled components (build to be discarded), separated by interfaces where necessary (build to last).&lt;/li&gt;
  &lt;li&gt;City planning is a better metaphor for SW development than civil engineering.&lt;/li&gt;
  &lt;li&gt;The ultimate goal of composition is to define processes.&lt;/li&gt;
  &lt;li&gt;Any system that exceeds our understanding will inevitably grow a bit slow and flaky.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-0&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - Names&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Idioms&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - Indirection&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Composition&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-0&quot;&gt;&lt;/a&gt;Introduction&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;To write software we must learn to draw boundaries.&lt;/li&gt;
  &lt;li&gt;Good software is built through effective indirection.&lt;/li&gt;
  &lt;li&gt;Finding good names is difficult, so we should try to avoid.&lt;/li&gt;
  &lt;li&gt;Any project involving multiple people exists in a continuous state of low-level confusion.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Names&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Names are the most common way of creating indirection.&lt;/li&gt;
  &lt;li&gt;The act of writing software is the act of naming repeated over and over again.&lt;/li&gt;
  &lt;li&gt;Names are composed of:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;In SW terms &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Sign &lt;/td&gt;
      &lt;td&gt;Textual representation &lt;/td&gt;
      &lt;td&gt;Textual representation &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Referent &lt;/td&gt;
      &lt;td&gt;What it references &lt;/td&gt;
      &lt;td&gt;Current implementation &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Sense &lt;/td&gt;
      &lt;td&gt;How it is referenced &lt;/td&gt;
      &lt;td&gt;Set of fundamental properties we ascribe to it &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;When finding a new name, we only need to understand its sense.&lt;/li&gt;
  &lt;li&gt;Sense can be communicated through:
  &lt;ul&gt;
    &lt;li&gt;Sign.&lt;/li&gt;
    &lt;li&gt;Context.&lt;/li&gt;
    &lt;li&gt;Documentation.&lt;/li&gt;
    &lt;li&gt;Everyday conversation.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Names should be:
  &lt;ul&gt;
    &lt;li&gt;Narrow:
    &lt;ul&gt;
      &lt;li&gt;Exclude things it cannot represent.&lt;/li&gt;
      &lt;li&gt;Reveals its sense:
      &lt;ul&gt;
        &lt;li&gt;Too specific leaks implementation details.&lt;/li&gt;
        &lt;li&gt;Too general misses fundamental properties, inviting breaking changes.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Consistent: easily understood in its context.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Any project involving multiple people exists in a continuous state of low-level confusion.&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Natural Names &lt;/th&gt;
      &lt;th&gt;Synthetic Names &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Multiple senses &lt;/td&gt;
      &lt;td&gt;One sense &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ambiguous &lt;/td&gt;
      &lt;td&gt;Fully consistent with sign &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Reason by analogy&lt;/td&gt;
      &lt;td&gt;Sense must be learn &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lower entry barrier&lt;/td&gt;
      &lt;td&gt;High entry barrier &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;The threshold for self-evidency depends on the reader.&lt;/li&gt;
  &lt;li&gt;Finding good names is difficult, so we should try to avoid.&lt;/li&gt;
  &lt;li&gt;Functions can do three things:
  &lt;ul&gt;
    &lt;li&gt;Pull data into scope: Name should describe the data type it returns.&lt;/li&gt;
    &lt;li&gt;Transform data in scope: Avoid verbs.&lt;/li&gt;
    &lt;li&gt;Push data to another scope: Name should be the effect it has.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;At least one function in every process must do all three. This functions are difficult to reuse.&lt;/li&gt;
  &lt;li&gt;All functions in a namespace should operate on a common data type and/or data scope.&lt;/li&gt;
  &lt;li&gt;As few namespaces as possible.&lt;/li&gt;
  &lt;li&gt;Macros are poor means of indirection.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Idioms&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Prefer &lt;code&gt;&amp;lt;&lt;/code&gt; or &lt;code&gt;&amp;lt;=&lt;/code&gt;. Always use the same.&lt;/li&gt;
  &lt;li&gt;Avoid named parameters.&lt;/li&gt;
  &lt;li&gt;Only use &lt;code&gt;letfn&lt;/code&gt; when mutual recursion is required.&lt;/li&gt;
  &lt;li&gt;Use &lt;code&gt;for&lt;/code&gt; for cartesian products.&lt;/li&gt;
  &lt;li&gt;Check for &lt;code&gt;nil&lt;/code&gt; at regular intervals.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Indirection&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Two indirection tools:
  &lt;ul&gt;
    &lt;li&gt;References:
    &lt;ul&gt;
      &lt;li&gt;Conveys values.&lt;/li&gt;
      &lt;li&gt;Open.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Conditionals:
    &lt;ul&gt;
      &lt;li&gt;Decides based upon values.&lt;/li&gt;
      &lt;li&gt;Closed: to change them, we need to change code.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;nil&lt;/code&gt; has been know to cause runtime errors.&lt;/li&gt;
  &lt;li&gt;For a decision mechanism to be open it must be unordered: table with unique keys.&lt;/li&gt;
  &lt;li&gt;Indirection is a mechanism for creating abstractions.&lt;/li&gt;
  &lt;li&gt;Indirection allow us to work with a codebase without completely understand it.&lt;/li&gt;
  &lt;li&gt;Proofs lack context: they are only concern with being self-consistent.&lt;/li&gt;
  &lt;li&gt;In SW, we don&amp;rsquo;t have the luxury of ignoring context. Our models must be self-consistent and useful within our context.&lt;/li&gt;
  &lt;li&gt;Self-consistency is objective, usefulness is subjective.&lt;/li&gt;
  &lt;li&gt;Model for modules:
  &lt;ul&gt;
    &lt;li&gt;Model: data and functions.&lt;/li&gt;
    &lt;li&gt;Interface: means by which model and environment interact.&lt;/li&gt;
    &lt;li&gt;Environment: everything else.&lt;/li&gt;
    &lt;li&gt;Assumption: everything that the model does not represent.&lt;/li&gt;
    &lt;li&gt;Invariants: to avoid model&amp;rsquo;s invalid states.&lt;/li&gt;
    &lt;li&gt;Invalid states: those which cannot be found in the environment.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/elements-of-clojure/modules-model.jpg&quot; alt=&quot;Module model&quot; title=&quot;A model for modules&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Better models: those with less exceptions.&lt;/li&gt;
  &lt;li&gt;Reasoning:
  &lt;ul&gt;
    &lt;li&gt;Deductive:
    &lt;ul&gt;
      &lt;li&gt;Conclusions are necessary: if they are wrong is because the initial assumptions were wrong.&lt;/li&gt;
      &lt;li&gt;Tries to predict.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Inductive:
    &lt;ul&gt;
      &lt;li&gt;By analogy, only compares.&lt;/li&gt;
      &lt;li&gt;Conclusions are contingent: they are allowed to be wrong.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Inductive is more resilient than deductive at the cost of not being optimal.&lt;/li&gt;
  &lt;li&gt;Model satisfices if it is good enough given the environment.&lt;/li&gt;
  &lt;li&gt;The models of SW are build atop inductive analogies and aspire only to satisfice.&lt;/li&gt;
  &lt;li&gt;Broad assumptions means smaller models which means simpler code.&lt;/li&gt;
  &lt;li&gt;Group models with similar assumptions, wrap them in a single layer that enforces those assumptions.&lt;/li&gt;
  &lt;li&gt;Abstractions that fail together should stay together.&lt;/li&gt;
  &lt;li&gt;Better modules == more useful.&lt;/li&gt;
  &lt;li&gt;Models reflect our perception of their environment.
  &lt;ul&gt;
    &lt;li&gt;There is no objective measure of the importance of a given facet.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;A module is useful only if its assumptions are sound now and in the near future.&lt;/li&gt;
  &lt;li&gt;Over-engineered code == too few assumptions.&lt;/li&gt;
  &lt;li&gt;Every conversation about SW can be more productive by describing, up front, our subjective understanding of its environment.&lt;/li&gt;
  &lt;li&gt;We are constantly drawn to software we don&amp;rsquo;t know well enough to dislike.&lt;/li&gt;
  &lt;li&gt;Confidence requires understanding: I disagree! &lt;a href=&quot;https://en.wikipedia.org/wiki/Four_stages_of_competence&quot;&gt;Unconscious incompetence&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;A module cannot prevent itself to be misused.&lt;/li&gt;
  &lt;li&gt;Convention: how we enforce assumptions that are not hidden away by an abstraction layer (because abstraction layer is too expensive to build or execute)
  &lt;ul&gt;
    &lt;li&gt;Are a useful tool but not a solution.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The &amp;ldquo;seniority&amp;rdquo; of an engineer derives more from their ability to predict adverse environments than from mastery of any particular technology.&lt;/li&gt;
  &lt;li&gt;The easiest way to know that a failure mode exists is to see it happen.&lt;/li&gt;
  &lt;li&gt;If a model cant fit in our head, it has little value.
  &lt;ul&gt;
    &lt;li&gt;As growing a model is not a problem if our understanding grows with it. Still a problem for new people.&lt;/li&gt;
    &lt;li&gt;As we internalize a model, individual faces coalesce into larger, more manageable concepts.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If we dont solve a user&amp;rsquo;s problem, someone else will.&lt;/li&gt;
  &lt;li&gt;City planning is a better metaphor for SW development than civil engineering.&lt;/li&gt;
  &lt;li&gt;SW would be easy if thing never changed.&lt;/li&gt;
  &lt;li&gt;Build SW from principled components (build to be discarded), separated by interfaces where necessary (build to last).&lt;/li&gt;
  &lt;li&gt;Principled systems:
  &lt;ul&gt;
    &lt;li&gt;Minimal indirection.&lt;/li&gt;
    &lt;li&gt;Hierarchical: each layer smaller, faster and with broader assumptions.&lt;/li&gt;
    &lt;li&gt;Fragile.&lt;/li&gt;
    &lt;li&gt;Easier to understand (per layer).&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Adaptable system:
  &lt;ul&gt;
    &lt;li&gt;Loads of indirection.&lt;/li&gt;
    &lt;li&gt;Larger component, less efficient, redundant.&lt;/li&gt;
    &lt;li&gt;More flexible.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Clojure promote the creation of adaptable software.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Composition&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The ultimate goal of composition is to define processes.&lt;/li&gt;
  &lt;li&gt;Process always:
  &lt;ul&gt;
    &lt;li&gt;Pull data from environment.&lt;/li&gt;
    &lt;li&gt;Transform data.&lt;/li&gt;
    &lt;li&gt;Push data to environment.&lt;/li&gt;
    &lt;li&gt;Keep them separated until the last possible moment.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Communication between processes is only possible via shared references.&lt;/li&gt;
  &lt;li&gt;(side) effect: any change to shared references.&lt;/li&gt;
  &lt;li&gt;We can consider a process in isolation if:
  &lt;ul&gt;
    &lt;li&gt;Performance isnt a primary concern.&lt;/li&gt;
    &lt;li&gt;Some (timeout) failures are acceptable.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Any system that exceeds our understanding will inevitably grow a bit slow and flaky.&lt;/li&gt;
  &lt;li&gt;Execution model: strategies describing what our process will do when its environment provides too much or too little.&lt;/li&gt;
  &lt;li&gt;Push and pull phases:
  &lt;ul&gt;
    &lt;li&gt;Enforce invariants.&lt;/li&gt;
    &lt;li&gt;Context dependant.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Transform:
  &lt;ul&gt;
    &lt;li&gt;Functional.&lt;/li&gt;
    &lt;li&gt;Either accrete, reduce or reshape.&lt;/li&gt;
    &lt;li&gt;Return a descriptor of the effects to be performed.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Keep transform code in a different namespace than push/pull code.&lt;/li&gt;
  &lt;li&gt;In a robust process, pull phase invokes transform phase so handling errors is a pull phase concern.
  &lt;ul&gt;
    &lt;li&gt;Using lazy-seqs with side effects breaks this rule.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Book notes: The Manager's Path
</title>
<link>
https://danlebrero.com/2020/07/22/the-managers-path-book-summary/
</link>
<guid>
https://danlebrero.com/2020/07/22/the-managers-path-book-summary/
</guid>
<pubDate>
Wed, 22 Jul 2020 10:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/skamille&quot;&gt;Camille Fournier&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://www.amazon.com/Managers-Path-Leaders-Navigating-Growth-ebook/dp/B06XP3GJ7F&quot;&gt;The Manager&amp;rsquo;s Path&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;I specially liked that the book is IT specific and that it lays down all the different levels on the management ladder, so you can get a feeling of what you will be expected to do at each level and decide which level is the one that you would like to aspire to.&lt;/p&gt;&lt;p&gt;Excellent read. &lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;The only person you can change is yourself.&lt;/li&gt;
  &lt;li&gt;Asking for advice is a way of showing trust and respect.&lt;/li&gt;
  &lt;li&gt;Listening is a precursor to empathy.&lt;/li&gt;
  &lt;li&gt;If you want autonomy over your work, you must gain mastery over your time.&lt;/li&gt;
  &lt;li&gt;Create a safe environment for disagreement to work itself out.&lt;/li&gt;
  &lt;li&gt;Practice continuous feedback.&lt;/li&gt;
  &lt;li&gt;Real potential in people show itself quickly.&lt;/li&gt;
  &lt;li&gt;Be kind, not nice.&lt;/li&gt;
  &lt;li&gt;Delegation is essential for career growth.&lt;/li&gt;
  &lt;li&gt;Ways to say no:
  &lt;ul&gt;
    &lt;li&gt;&amp;ldquo;YES, AND &amp;hellip;&amp;rdquo; state what would require to say yes or what it will impact.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;As a manager, your first team is not the people that report to you but your peers.&lt;/li&gt;
  &lt;li&gt;As a manager, ask yourself:
  &lt;ul&gt;
    &lt;li&gt;Can I do this faster (by cutting scope)?&lt;/li&gt;
    &lt;li&gt;Do I need to be doing this at all?&lt;/li&gt;
    &lt;li&gt;What value am I providing with this work?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Management is a very culture-specific task.&lt;/li&gt;
  &lt;li&gt;Managing outside your skill set: be curious, ask questions, learn.&lt;/li&gt;
  &lt;li&gt;Boring meetings are a sign of dysfunctional teams.&lt;/li&gt;
  &lt;li&gt;We learn the most from failures.&lt;/li&gt;
  &lt;li&gt;Process is risk management.&lt;/li&gt;
  &lt;li&gt;CTO shape business strategy through the lens of technology.&lt;/li&gt;
  &lt;li&gt;You will be measured against the company&amp;rsquo;s values.
  &lt;ul&gt;
    &lt;li&gt;If your values are not those of the company, you will struggle.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;You have to be able to manage yourself if you want to be good at managing others.
  &lt;ul&gt;
    &lt;li&gt;For this, you need to understand yourself.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - Management 101&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Mentoring&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - Tech Lead&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Managing People&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - Managing a team&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - Managing Multiple Teams&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - Managing Managers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - The Big Leagues&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - Bootstrapping Culture&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - Management 101&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;What to expect from a manager:
  &lt;ul&gt;
    &lt;li&gt;Grow your career:
    &lt;ul&gt;
      &lt;li&gt;Help find the training/conf/books.&lt;/li&gt;
      &lt;li&gt;Find &amp;ldquo;stretch&amp;rdquo; projects.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Feedback.&lt;/li&gt;
    &lt;li&gt;Figure out what you need to learn.&lt;/li&gt;
    &lt;li&gt;Understand what to focus on and enable you to have that focus.&lt;/li&gt;
    &lt;li&gt;Take your manager&amp;rsquo;s job.&lt;/li&gt;
    &lt;li&gt;Find a sense of purpose in day-to-day by connecting what you do with the overall picture.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;1-2-1 purpose:
  &lt;ul&gt;
    &lt;li&gt;Create human connection.&lt;/li&gt;
    &lt;li&gt;Discuss privately.&lt;/li&gt;
    &lt;li&gt;Not a status meeting.&lt;/li&gt;
    &lt;li&gt;Must be regular.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Feedback:
  &lt;ul&gt;
    &lt;li&gt;Public for praise, private for criticism.&lt;/li&gt;
    &lt;li&gt;Behavioural feedback.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;How to be managed:
  &lt;ul&gt;
    &lt;li&gt;Spend time thinking about what you want.&lt;/li&gt;
    &lt;li&gt;You are responsible for yourself.&lt;/li&gt;
    &lt;li&gt;The only person you can change is yourself.&lt;/li&gt;
    &lt;li&gt;Asking for advice is a way of showing trust and respect.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Mentoring&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Listening is a precursor to empathy.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - Tech Lead&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Not a point in the ladder, but a temporal role.&lt;/li&gt;
  &lt;li&gt;At least 30% time coding.&lt;/li&gt;
  &lt;li&gt;Main new skill: project management.&lt;/li&gt;
  &lt;li&gt;Learn how to balance your time of tech work vs management work.&lt;/li&gt;
  &lt;li&gt;If you want autonomy over your work, you must gain mastery over your time.&lt;/li&gt;
  &lt;li&gt;Tech Lead roles:
  &lt;ul&gt;
    &lt;li&gt;Software developer.&lt;/li&gt;
    &lt;li&gt;System architect.&lt;/li&gt;
    &lt;li&gt;Business analysts.&lt;/li&gt;
    &lt;li&gt;Project planner.&lt;/li&gt;
    &lt;li&gt;Team leader.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Expect the tech lead position to be a big increase in responsibility and workload.&lt;/li&gt;
  &lt;li&gt;Project management is a necessary pain:
  &lt;ul&gt;
    &lt;li&gt;Break deliverables into small tasks.&lt;/li&gt;
    &lt;li&gt;Sort task in the most efficient way.&lt;/li&gt;
    &lt;li&gt;Push through unknowns.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Successful team leads excel at communication:
  &lt;ul&gt;
    &lt;li&gt;Read/write.&lt;/li&gt;
    &lt;li&gt;Speak/listen.&lt;/li&gt;
    &lt;li&gt;Note taking.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Managing People&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;New hire:
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;https://larahogan.me/blog/first-one-on-one-questions/&quot;&gt;First 1-2-1 questions&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;Create a 30/60/90 plan.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;1-2-1 styles:
  &lt;ul&gt;
    &lt;li&gt;TODO list:
    &lt;ul&gt;
      &lt;li&gt;Professional and efficient but cold.&lt;/li&gt;
      &lt;li&gt;Forces to think beforehand.&lt;/li&gt;
      &lt;li&gt;Items to discuss should be worth the face to face time.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Catch-up:
    &lt;ul&gt;
      &lt;li&gt;Listen to what report thinks is most important.&lt;/li&gt;
      &lt;li&gt;Careful with too much complaining.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Feedback meeting:
    &lt;ul&gt;
      &lt;li&gt;Quarterly enough for career development.&lt;/li&gt;
      &lt;li&gt;Review process towards goals.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Progress report (when managing managers).&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Get to know your report at a personal level.&lt;/li&gt;
  &lt;li&gt;Take notes in a shared document.&lt;/li&gt;
  &lt;li&gt;Delegate effectively:
  &lt;ul&gt;
    &lt;li&gt;Do not &amp;ldquo;intervene&amp;rdquo; if:
    &lt;ul&gt;
      &lt;li&gt;Team is making progress on its goals.&lt;/li&gt;
      &lt;li&gt;System&amp;rsquo;s are stable.&lt;/li&gt;
      &lt;li&gt;Product manager is happy.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;If a team has no goals, use what you want to monitor to help them create one.&lt;/li&gt;
    &lt;li&gt;Gather information yourself from system instead of asking the team.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Continuous feedback:
  &lt;ul&gt;
    &lt;li&gt;You must know your people.&lt;/li&gt;
    &lt;li&gt;Forces you to pay attention to individuals.&lt;/li&gt;
    &lt;li&gt;Makes it easy to foster talent.&lt;/li&gt;
    &lt;li&gt;Practice tricky conversations in the small.&lt;/li&gt;
    &lt;li&gt;Weekly for everyone who reports to you.&lt;/li&gt;
    &lt;li&gt;Start with positive feedback.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Performance reviews:
  &lt;ul&gt;
    &lt;li&gt;Include the whole year: summarize the 1-2-1.&lt;/li&gt;
    &lt;li&gt;It is not a one hour process, but much longer.&lt;/li&gt;
    &lt;li&gt;Use concrete examples to avoid bias.&lt;/li&gt;
    &lt;li&gt;Spend plenty of time on accomplishments.&lt;/li&gt;
    &lt;li&gt;Keep the areas of improvement focus.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Real potential in people show itself quickly.&lt;/li&gt;
  &lt;li&gt;Keep an eye out for opportunities for your team members to stretch themselves and grow.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - Managing a team&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;New set of skills and challenges.&lt;/li&gt;
  &lt;li&gt;Engineering managers:
  &lt;ul&gt;
    &lt;li&gt;Must be technically credible to get the respect of the engineering team.&lt;/li&gt;
    &lt;li&gt;Keep contributing to code so you can see the bottlenecks.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Dysfunctional teams:
  &lt;ul&gt;
    &lt;li&gt;Not shipping: Tools/processes poor.&lt;/li&gt;
    &lt;li&gt;People drama: negative, brilliant jerk, gossip.&lt;/li&gt;
    &lt;li&gt;Unhappiness due to overwork:
    &lt;ul&gt;
      &lt;li&gt;Pay tech debt.&lt;/li&gt;
      &lt;li&gt;If time-critical release:
      &lt;ul&gt;
        &lt;li&gt;Play cheerleader.&lt;/li&gt;
        &lt;li&gt;Cut features.&lt;/li&gt;
        &lt;li&gt;Push back date.&lt;/li&gt;
        &lt;li&gt;Contribute.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Collaboration problems:
    &lt;ul&gt;
      &lt;li&gt;With other teams:
      &lt;ul&gt;
        &lt;li&gt;Regular catch up with peers to work through issues.&lt;/li&gt;
        &lt;li&gt;Actionable feedback.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Within the team:
      &lt;ul&gt;
        &lt;li&gt;Team building activities.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Learn enough about the product and customers.&lt;/li&gt;
  &lt;li&gt;Long term vision of technology and product.&lt;/li&gt;
  &lt;li&gt;Create a safe environment for disagreement to work itself out.&lt;/li&gt;
  &lt;li&gt;Managing conflict:
  &lt;ul&gt;
    &lt;li&gt;Don&amp;rsquo;t rely exclusively on voting.&lt;/li&gt;
    &lt;li&gt;Set up clear process to depersonalize decisions.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t turn a blind eye on simmering issues.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t take it out on the other teams.&lt;/li&gt;
    &lt;li&gt;Be kind, not nice.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t be afraid of conflict.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Psychological safety: you are willing to take risks and make mistakes in front of others.&lt;/li&gt;
  &lt;li&gt;Don&amp;rsquo;t hire brilliant jerks as it is too difficult to get rid of one.&lt;/li&gt;
  &lt;li&gt;Get rid of the people that don&amp;rsquo;t respect you as a manager, or the team.&lt;/li&gt;
  &lt;li&gt;Non-communicator:
  &lt;ul&gt;
    &lt;li&gt;Raise his habits asap.&lt;/li&gt;
    &lt;li&gt;Find the root cause of the hiding.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Advanced project management:
  &lt;ul&gt;
    &lt;li&gt;Use agile for short term.&lt;/li&gt;
    &lt;li&gt;10 productive weeks per quarter.&lt;/li&gt;
    &lt;li&gt;Budget 20% for tech debt.&lt;/li&gt;
    &lt;li&gt;Cut features as deadline approaches.&lt;/li&gt;
    &lt;li&gt;Spend time planning and estimating.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Managing Multiple Teams&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;No more coding. You will miss coding.&lt;/li&gt;
  &lt;li&gt;Be fluent in at least one programming language before taking this role.&lt;/li&gt;
  &lt;li&gt;Manage your own time: &lt;a href=&quot;https://jamesclear.com/eisenhower-box&quot;&gt;Eisenhower Matrix&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;How much time did you spent on non-urgent but important tasks?&lt;/li&gt;
  &lt;li&gt;Delegate:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;Frequent &lt;/th&gt;
      &lt;th&gt;Infrequent &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Simple &lt;/td&gt;
      &lt;td&gt;Delegate &lt;/td&gt;
      &lt;td&gt;Do it yourself &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Complex &lt;/td&gt;
      &lt;td&gt;Delegate carefully &lt;/td&gt;
      &lt;td&gt;Delegate for training &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;Delegation is essential for career growth.&lt;/li&gt;
  &lt;li&gt;Ways to say no:
  &lt;ul&gt;
    &lt;li&gt;&amp;ldquo;YES, AND &amp;hellip;&amp;rdquo; state what would require to say yes or what it will impact.&lt;/li&gt;
    &lt;li&gt;Create policies that clearly define what is needed for a yes.&lt;/li&gt;
    &lt;li&gt;&amp;ldquo;Help me say yes&amp;rdquo;: ask questions.&lt;/li&gt;
    &lt;li&gt;&amp;ldquo;Not right now&amp;rdquo;: you must do something later.&lt;/li&gt;
    &lt;li&gt;Ask a peer to say no in your behalf.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t delay saying no.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Your technical focus at this level is to improve the system of work that your developers are operating within.&lt;/li&gt;
  &lt;li&gt;Durable teams are built on a shared purpose that comes from the company itself, and they align themselves with the company&amp;rsquo;s values.&lt;/li&gt;
  &lt;li&gt;As a manager, your first team is not the people that report to you but your peers.&lt;/li&gt;
  &lt;li&gt;Ask yourself:
  &lt;ul&gt;
    &lt;li&gt;Can I do this faster (by cutting scope)?&lt;/li&gt;
    &lt;li&gt;Do I need to be doing this at all?&lt;/li&gt;
    &lt;li&gt;What value am I providing with this work?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Managing Managers&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Same as managing multiple teams, but an order of magnitude bigger. New set of skills.&lt;/li&gt;
  &lt;li&gt;Things are obscured by the additional level of abstraction.&lt;/li&gt;
  &lt;li&gt;Skip-Level meetings:
  &lt;ul&gt;
    &lt;li&gt;Critical to build trust and engagement.&lt;/li&gt;
    &lt;li&gt;Either quarterly 1-2-1 or group lunches.&lt;/li&gt;
    &lt;li&gt;Prompts in page 129.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Open-Door policy does not work.&lt;/li&gt;
  &lt;li&gt;Managers should make your life easier, by bringing clear problems before they turn into raging fires.&lt;/li&gt;
  &lt;li&gt;Make managers accountable for their teams.&lt;/li&gt;
  &lt;li&gt;New managers need a lot of coaching:
  &lt;ul&gt;
    &lt;li&gt;How to do 1-2-1.&lt;/li&gt;
    &lt;li&gt;How to let go previous work.&lt;/li&gt;
    &lt;li&gt;How to not become a control freak.&lt;/li&gt;
    &lt;li&gt;Find external training.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Management is a very culture-specific task,
  &lt;ul&gt;
    &lt;li&gt;Hence is better to promote people that has been in the company for long and already understand the culture.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Culture fit more important than industry-specific knowledge.&lt;/li&gt;
  &lt;li&gt;Hiring managers - Page 140:
  &lt;ul&gt;
    &lt;li&gt;Do reference checks.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Managing outside your skill set: be curious, ask questions, learn.&lt;/li&gt;
  &lt;li&gt;Boring meetings are a sign of dysfunctional teams.&lt;/li&gt;
  &lt;li&gt;People need to feel an understanding and connection with the purpose of their work.&lt;/li&gt;
  &lt;li&gt;Your technical responsibility is to optimize tech investments by matching it to future product or customer needs.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - The Big Leagues&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;As tech senior managers, we bring a willingness to embrace and drive change as needed.&lt;/li&gt;
  &lt;li&gt;Be a leader; your company looks to you for:
  &lt;ul&gt;
    &lt;li&gt;What to do.&lt;/li&gt;
    &lt;li&gt;Where to go.&lt;/li&gt;
    &lt;li&gt;How to act.&lt;/li&gt;
    &lt;li&gt;How to think.&lt;/li&gt;
    &lt;li&gt;What to value.&lt;/li&gt;
    &lt;li&gt;Make hard decisions without perfect information.&lt;/li&gt;
    &lt;li&gt;Understand current business landscape and plan for possible futures.&lt;/li&gt;
    &lt;li&gt;Hold individuals/teams accountable.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;4 tasks:
  &lt;ul&gt;
    &lt;li&gt;Information gathering or sharing.&lt;/li&gt;
    &lt;li&gt;Nudging.&lt;/li&gt;
    &lt;li&gt;Decision making.&lt;/li&gt;
    &lt;li&gt;Role modeling.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Possible roles:
  &lt;ul&gt;
    &lt;li&gt;R&amp;amp;D.&lt;/li&gt;
    &lt;li&gt;Tech strategy.&lt;/li&gt;
    &lt;li&gt;Organization.&lt;/li&gt;
    &lt;li&gt;Execution.&lt;/li&gt;
    &lt;li&gt;External face of technology.&lt;/li&gt;
    &lt;li&gt;Infrastructure and tech operations manager.&lt;/li&gt;
    &lt;li&gt;Business executive.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;CTO must care about business and shape business strategy through the lens of technology.&lt;/li&gt;
  &lt;li&gt;CTO without management responsibilities will have little influence.&lt;/li&gt;
  &lt;li&gt;To make something top priority, ou need to explicitly kill or postpone in-flight work.&lt;/li&gt;
  &lt;li&gt;You need to communicate things three or more times before it sinks.&lt;/li&gt;
  &lt;li&gt;Setting strategy:
  &lt;ul&gt;
    &lt;li&gt;Improve operational efficiency.&lt;/li&gt;
    &lt;li&gt;Expand features.&lt;/li&gt;
    &lt;li&gt;Grow the business.&lt;/li&gt;
    &lt;li&gt;It entitles:
    &lt;ul&gt;
      &lt;li&gt;Tech architecture.&lt;/li&gt;
      &lt;li&gt;Team structure.&lt;/li&gt;
      &lt;li&gt;Understanding direction of business.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Delivery bad news:
  &lt;ul&gt;
    &lt;li&gt;Do it by individuals or small groups.&lt;/li&gt;
    &lt;li&gt;Must be in-person.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t force yourself to delive if you cannot stand behind it.&lt;/li&gt;
    &lt;li&gt;Be honest.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;CEO as a boss:
  &lt;ul&gt;
    &lt;li&gt;Getting 1-2-1 time is a challenge.
    &lt;ul&gt;
      &lt;li&gt;Bring topics, set up agenda.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Bring solutions, not problems.&lt;/li&gt;
    &lt;li&gt;Ask for advice.&lt;/li&gt;
    &lt;li&gt;Don&amp;rsquo;t be afraid of repeating yourself.&lt;/li&gt;
    &lt;li&gt;Be supportive.&lt;/li&gt;
    &lt;li&gt;Look for coaching and skills development in other places.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Your team:
  &lt;ul&gt;
    &lt;li&gt;Peers in other functions.&lt;/li&gt;
    &lt;li&gt;First focus on the success of business, then on their departments.&lt;/li&gt;
    &lt;li&gt;You trust them as experts in their areas.&lt;/li&gt;
    &lt;li&gt;You trust they are not trying to undermine you.&lt;/li&gt;
    &lt;li&gt;Disagreement in leadership team is ok, but once a decision is made, team shows a united front.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;You need to detach from your previous team:
  &lt;ul&gt;
    &lt;li&gt;Avoid having favourites.&lt;/li&gt;
    &lt;li&gt;People to take you seriously.&lt;/li&gt;
    &lt;li&gt;People will copy your behaviours.&lt;/li&gt;
    &lt;li&gt;Your presence will change the behaviour.&lt;/li&gt;
    &lt;li&gt;Do not discuss uncertainty with your old peers.&lt;/li&gt;
    &lt;li&gt;Care even more about individuals.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;True North: core principles that a person in a functional role must keep in mind as he does his job.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Bootstrapping Culture&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You need an hypothesis to learn from new processes and structures.&lt;/li&gt;
  &lt;li&gt;Structure allow to scale, diversify and take on more complex long-term tasks.&lt;/li&gt;
  &lt;li&gt;We learn the most from failures: examine failures to decide what structure needs to be added.&lt;/li&gt;
  &lt;li&gt;Culture is how things get done, without people having to think about it &amp;ndash; Frederick Laloux.&lt;/li&gt;
  &lt;li&gt;You will be measured against the company&amp;rsquo;s values.
  &lt;ul&gt;
    &lt;li&gt;If your values are not those of the company, you will struggle.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Culture:
  &lt;ul&gt;
    &lt;li&gt;Map company values to tech team, maybe adding a couple that are specially important.&lt;/li&gt;
    &lt;li&gt;Reinforce by rewarding people that exhibit the values in a positive way.&lt;/li&gt;
    &lt;li&gt;Use when hiring.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Create a career ladder - Page 202.&lt;/li&gt;
  &lt;li&gt;Process is risk management.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Conclusion&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You have to be able to manage yourself if you want to be good at managing others.
  &lt;ul&gt;
    &lt;li&gt;You need to understand yourself.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Masters of working through conflict.&lt;/li&gt;
  &lt;li&gt;Meditate.&lt;/li&gt;
  &lt;li&gt;Get curious.&lt;/li&gt;
  &lt;li&gt;Look for the other side of the story.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Book notes: The Pragmatic Programmer, 20th Anniversary Edition
</title>
<link>
https://danlebrero.com/2020/07/08/the-pragmatic-programmer-20th-anniversary-edition-book-summary/
</link>
<guid>
https://danlebrero.com/2020/07/08/the-pragmatic-programmer-20th-anniversary-edition-book-summary/
</guid>
<pubDate>
Wed, 08 Jul 2020 10:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/pragdave&quot;&gt;David Thomas&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/PragmaticAndy&quot;&gt;Andrew Hunt&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://pragprog.com/titles/tpp20/&quot;&gt;The Pragmatic Programmer, 20th anniversary edition&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;The original version was in my &amp;ldquo;must read&amp;rdquo; list for any software developer, and this update version one is no different.&lt;/p&gt;&lt;p&gt;Key insight: After reading the new edition, I have come to realize of how huge an impact the first edition made on my career. I can see that most of &lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;my advice&lt;/a&gt; is rooted in this book.&lt;/p&gt;&lt;p&gt;It is also nice to see how the authors have come to the same conclusions regarding functional programming (Clojure style) and OO that I have. From the &amp;ldquo;transforming programming&amp;rdquo; section:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;All programs transform data, converting input into an output.&lt;/li&gt;
  &lt;li&gt;When we think of programs as something that transforms input into output, many of the details we previously worry about just evaporate. The structure becomes clearer, the error handling consistent and coupling drops way down.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;See &lt;a href=&quot;https://www.youtube.com/watch?v=iLMiPhYVG8w&quot;&gt;Dave Thoma&amp;rsquo;s YOW! keynote&lt;/a&gt; for a longer explanation.&lt;/p&gt;&lt;p&gt;You can find all the tips &lt;a href=&quot;https://pragprog.com/tips/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;You own your life.&lt;/li&gt;
  &lt;li&gt;Good enough software.&lt;/li&gt;
  &lt;li&gt;Most important strategic asset: learn to learn.&lt;/li&gt;
  &lt;li&gt;A team that doesn&amp;rsquo;t continuously experiment with their process is not an agile team.&lt;/li&gt;
  &lt;li&gt;&lt;p&gt;Tip 76: Programmers help people understand what they want.&lt;/p&gt;
  &lt;blockquote&gt;Perfection is achieved not when there is nothing left to add but when there is nothing left to take away. &lt;cite&gt;Antoine de Saint-Exupéry, Wind, Sand and Stars 1939.&lt;/cite&gt;
  &lt;/blockquote&gt;&lt;/li&gt;
  &lt;li&gt;Try it.&lt;/li&gt;
  &lt;li&gt;How will you know that we&amp;rsquo;ve all been successful after this project is done?&lt;/li&gt;
  &lt;li&gt;Moral compass:
  &lt;ol&gt;
    &lt;li&gt;Have I protected the user?&lt;/li&gt;
    &lt;li&gt;Would I use this myself?&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-0&quot;&gt;Preface&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - Pragmatic Philosophy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - A Pragmatic Approach&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - The Basic Tools&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Pragmatic Paranoia&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - Bend, or Break&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - Concurrency&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - While You Are Coding&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - Before the Project&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - Pragmatic Projects&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;Postface&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-0&quot;&gt;&lt;/a&gt;Preface&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;There is no best solution.&lt;/li&gt;
  &lt;li&gt;Tip 1: Care about your craft.&lt;/li&gt;
  &lt;li&gt;Tip 2: Think about your work.&lt;/li&gt;
  &lt;li&gt;Software is engineering with individual craftsmanship.&lt;/li&gt;
  &lt;li&gt;Kaizen: continuous improvement, every day.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - Pragmatic Philosophy&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;You own your life.&lt;/li&gt;
  &lt;li&gt;Team trust is essential.&lt;/li&gt;
  &lt;li&gt;Provide options, not excuses.&lt;/li&gt;
  &lt;li&gt;Tip 5: No broken windows.&lt;/li&gt;
  &lt;li&gt;People find it easy to join an ongoing success.&lt;/li&gt;
  &lt;li&gt;Good enough software.&lt;/li&gt;
  &lt;li&gt;Most important strategic asset: learn to learn.&lt;/li&gt;
  &lt;li&gt;Your knowledge is the most important asset.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - A Pragmatic Approach&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Tip 14: Good design is easier to change.&lt;/li&gt;
  &lt;li&gt;Programmers are constantly in maintenance mode.&lt;/li&gt;
  &lt;li&gt;Tip 18: There are no final decisions.&lt;/li&gt;
  &lt;li&gt;Tip 20: Tracer Bullets (aka. walking skeleton).&lt;/li&gt;
  &lt;li&gt;Tip 21: Prototype to learn.&lt;/li&gt;
  &lt;li&gt;Learn what you see risk in.&lt;/li&gt;
  &lt;li&gt;Keep a log of your estimates, find out why went wrong for those with &amp;gt; 50% of error.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - The Basic Tools&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Tip 25: Keep knowledge in plain text.&lt;/li&gt;
  &lt;li&gt;Keep an engineering daybook.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Pragmatic Paranoia&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.c2.com/?LetItCrash&quot;&gt;Crash, dont trash&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Leave assertions on in production.&lt;/li&gt;
  &lt;li&gt;Tip 42: Take small steps - Always.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - Bend, or Break&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Tip 45: Tell, dont ask&lt;/li&gt;
  &lt;li&gt;Events:
  &lt;ul&gt;
    &lt;li&gt;Finite state machines.&lt;/li&gt;
    &lt;li&gt;PubSub&lt;/li&gt;
    &lt;li&gt;Reactive programming.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;All programs transform data, converting input into an output.&lt;/li&gt;
  &lt;li&gt;When we think of programs as something that transforms input into output, many of the details we previously worry about just evaporate. The structure becomes clearer, the error handling consistent and coupling drops way down.&lt;/li&gt;
  &lt;li&gt;Big reason that OO systems are hard to change: encapsulation.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Concurrency&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Agents.&lt;/li&gt;
  &lt;li&gt;Blackboards.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - While You Are Coding&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;When stuck, give yourself a break.&lt;/li&gt;
  &lt;li&gt;Tip 34: Dont assume, prove it.&lt;/li&gt;
  &lt;li&gt;Dont let existing code dictate future code.&lt;/li&gt;
  &lt;li&gt;Tip 65: Refactor early, refactor often.&lt;/li&gt;
  &lt;li&gt;TDD FTW.&lt;/li&gt;
  &lt;li&gt;Property-based testing FTW.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Before the Project&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Perfection is achieved not when there is nothing left to add but when there is nothing left to take away. Antonie de St. Exupery, Wind, Sand and Stars 1939.&lt;/li&gt;
  &lt;li&gt;Tip 75: No one know what exactly what they want.&lt;/li&gt;
  &lt;li&gt;Tip 76: Programmers help people understand what they want.&lt;/li&gt;
  &lt;li&gt;Tip 78: Work with a user to think like a user.&lt;/li&gt;
  &lt;li&gt;The only requirements document is working code.&lt;/li&gt;
  &lt;li&gt;Tip 80: Use a project glossary.&lt;/li&gt;
  &lt;li&gt;A team that doesn&amp;rsquo;t continuously experiment with their process is not an agile team.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Pragmatic Projects&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Tip 84: Maintain small, stable teams.&lt;/li&gt;
  &lt;li&gt;Tip 85: Schedule it to make it happen.&lt;/li&gt;
  &lt;li&gt;Team speaks with one voice to the rest of the org.&lt;/li&gt;
  &lt;li&gt;Generate a team brand.&lt;/li&gt;
  &lt;li&gt;Good communication: instant and frictionless.&lt;/li&gt;
  &lt;li&gt;Try it.&lt;/li&gt;
  &lt;li&gt;How will you know that we&amp;rsquo;ve all been successful after this project is done?&lt;/li&gt;
  &lt;li&gt;Tip 97: Sign your work.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Postface&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Moral compass:
  &lt;ol&gt;
    &lt;li&gt;Have I protected the user?&lt;/li&gt;
    &lt;li&gt;Would I use this myself?&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Tip 99: Dont enable scumbags.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Book notes: Implementing Lean Software Development
</title>
<link>
https://danlebrero.com/2020/06/24/implementing-lean-software-development-book-summary/
</link>
<guid>
https://danlebrero.com/2020/06/24/implementing-lean-software-development-book-summary/
</guid>
<pubDate>
Wed, 24 Jun 2020 10:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/mpoppendieck&quot;&gt;Mary Poppendieck&lt;/a&gt; and Tom Poppendieck&amp;rsquo;s &lt;a href=&quot;https://www.amazon.com/Implementing-Lean-Software-Development-Concept/dp/0321437381&quot;&gt;Implementing Lean Software Development&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;After reading &lt;a href=&quot;/2020/03/04/the-lean-mindset-summary/#content&quot;&gt;The Lean Mindset&lt;/a&gt;, I decided to reread my old (13 years!) &amp;ldquo;Implementing Lean Software Development&amp;rdquo; copy. Unsurprisingly, most of the content still applies today.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Software development is a knowledge-creating process.&lt;/li&gt;
  &lt;li&gt;Process should be improved by the team doing the work.&lt;/li&gt;
  &lt;li&gt;Instead of predicting the future, aim to reduce response time so we can respond correctly as the future unfolds.&lt;/li&gt;
  &lt;li&gt;Product quality is determined by quality of information flow.&lt;/li&gt;
  &lt;li&gt;The cost of complexity is exponential.&lt;/li&gt;
  &lt;li&gt;Dont automate complexity. Simplify before automating.&lt;/li&gt;
  &lt;li&gt;Synergy between parts of any system is the key to the success of the system.&lt;/li&gt;
  &lt;li&gt;When things go wrong, the cause is inherent to the system, and therefore is a management problem.&lt;/li&gt;
  &lt;li&gt;Build cause of low quality and productivity is inherent to the system, hence must change the system to address those.&lt;/li&gt;
  &lt;li&gt;The thing that turns a group into a team is the mutual commitment of the members to pool their various skills and work together for a common purpose.&lt;/li&gt;
  &lt;li&gt;Teamwork is essential, but someone always needs to be responsible.&lt;/li&gt;
  &lt;li&gt;You get what you reward:
  &lt;ul&gt;
    &lt;li&gt;Find effective ways to reward collaboration.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Decisions: First decide when the decision must be made.&lt;/li&gt;
  &lt;li&gt;IT Contracts: focus on how parties will work together to determine what to deliver, instead of an specification of what to build.&lt;/li&gt;
  &lt;li&gt;Measure a few key indicators:
  &lt;ul&gt;
    &lt;li&gt;cycle time.&lt;/li&gt;
    &lt;li&gt;financial results.&lt;/li&gt;
    &lt;li&gt;customer satisfaction (NPS).&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - History&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Principles&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - Value&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Waste&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - Speed&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - People&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - Knowledge&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - Quality&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - Partners&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;10 - Journey&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - History&lt;/h1&gt;&lt;p&gt;Main point repeated in other chapters.&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Principles&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Software development should be an empirical process.&lt;/li&gt;
  &lt;li&gt;7 Principles:
  &lt;ol&gt;
    &lt;li&gt;Eliminate waste.&lt;/li&gt;
    &lt;li&gt;Build Quality in:
    &lt;ul&gt;
      &lt;li&gt;Target is to not need a defect tracking system.&lt;/li&gt;
      &lt;li&gt;Job of testing is to prevent defects.&lt;/li&gt;
      &lt;li&gt;If final verification routinely triggers test-and-fix cycles, then the development process is defective.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Create Knowledge:
    &lt;ul&gt;
      &lt;li&gt;Codify knowledge for use in future products is essential.&lt;/li&gt;
      &lt;li&gt;Instead of predicting the future, aim to reduce response time so we can respond correctly as the future unfolds.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Defer commitment:
    &lt;ul&gt;
      &lt;li&gt;Make decisions reversible.&lt;/li&gt;
      &lt;li&gt;Last responsible moment.&lt;/li&gt;
      &lt;li&gt;Plans are useless, planning is indispensable &amp;ndash; Eisenhower.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Deliver fast:
    &lt;ul&gt;
      &lt;li&gt;Repeatable and reliable speed is impossible without superior quality.&lt;/li&gt;
      &lt;li&gt;Deep customer understanding.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Respect people:
    &lt;ul&gt;
      &lt;li&gt;Give people goals.&lt;/li&gt;
      &lt;li&gt;Process should be improved by the team doing the work.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Optimize the whole (value stream):
    &lt;ul&gt;
      &lt;li&gt;From order to real need is addressed.&lt;/li&gt;
      &lt;li&gt;Crossing organizational boundaries is expensive.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - Value&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Product development performance (Clack and Fujimoto, 1991):
  &lt;ul&gt;
    &lt;li&gt;Product quality is determined by quality of information flow.&lt;/li&gt;
    &lt;li&gt;Customer quality: flow between marketplace and development team.&lt;/li&gt;
    &lt;li&gt;Technical quality: flow between technical team members.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;To facilitate information flow:
  &lt;ol&gt;
    &lt;li&gt;Leadership:
    &lt;ul&gt;
      &lt;li&gt;Champion:
      &lt;ul&gt;
        &lt;li&gt;Understands the customer&amp;rsquo;s job.&lt;/li&gt;
        &lt;li&gt;Understands the technology that surprise them.&lt;/li&gt;
        &lt;li&gt;Makes key product decisions.&lt;/li&gt;
        &lt;li&gt;Accountable.&lt;/li&gt;
        &lt;li&gt;Possible models:
        &lt;ol&gt;
          &lt;li&gt;Chief engineer:
          &lt;ul&gt;
            &lt;li&gt;Learn what the customer wants.&lt;/li&gt;
            &lt;li&gt;With senior management direction.&lt;/li&gt;
            &lt;li&gt;Role: Integrate knowledge.&lt;/li&gt;
          &lt;/ul&gt;&lt;/li&gt;
          &lt;li&gt;Leadership team:
          &lt;ul&gt;
            &lt;li&gt;Market expert + Technical expert (+ manufacturing expert)&lt;/li&gt;
          &lt;/ul&gt;&lt;/li&gt;
          &lt;li&gt;Shared leadership.&lt;/li&gt;
        &lt;/ol&gt;&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Complete teams: Marketing + customer support + ops.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Delight customers:
  &lt;ul&gt;
    &lt;li&gt;Discover needs that customer is not aware of.&lt;/li&gt;
    &lt;li&gt;Exponential increase in satisfaction (&lt;a href=&quot;https://en.wikipedia.org/wiki/Kano_model&quot;&gt;Kano model&lt;/a&gt;).&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Internal IT should be run as a software company:
  &lt;ul&gt;
    &lt;li&gt;Research what the market wants. Do not expect other to do it.&lt;/li&gt;
    &lt;li&gt;Perform cost/benefit analysis. Do not implement everything that business asks for.&lt;/li&gt;
    &lt;li&gt;Products are successful. Do not leave all responsibility to the business unit.&lt;/li&gt;
    &lt;li&gt;Accountability rests on the business funding the effort.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Waste&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Waste: Anything that does not add customer value or delays it.&lt;/li&gt;
  &lt;li&gt;Write less code:
  &lt;ul&gt;
    &lt;li&gt;The cost of complexity is exponential.&lt;/li&gt;
    &lt;li&gt;Justify every feature.&lt;/li&gt;
    &lt;li&gt;Less bugs.&lt;/li&gt;
    &lt;li&gt;Minimum useful feature set.&lt;/li&gt;
    &lt;li&gt;Dont automate complexity. Simplify before automating.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Seven wastes:
  &lt;ul&gt;
    &lt;li&gt;Partially done work:
    &lt;ul&gt;
      &lt;li&gt;Avoid with small batches.&lt;/li&gt;
      &lt;li&gt;Too early requirements.&lt;/li&gt;
      &lt;li&gt;Long live branches.&lt;/li&gt;
      &lt;li&gt;Untested code.&lt;/li&gt;
      &lt;li&gt;Undocumented features.&lt;/li&gt;
      &lt;li&gt;Undeployed code.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Extra features.&lt;/li&gt;
    &lt;li&gt;Relearning:
    &lt;ul&gt;
      &lt;li&gt;Retrying something that did not work in the past.&lt;/li&gt;
      &lt;li&gt;Not leveraging on existing knowledge.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Hand-offs: tacit knowledge is lost.&lt;/li&gt;
    &lt;li&gt;Task switching.&lt;/li&gt;
    &lt;li&gt;Delays.&lt;/li&gt;
    &lt;li&gt;Defects.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Mapping the value stream:
  &lt;ul&gt;
    &lt;li&gt;Find the delays (queues) and loop-backs (churn).&lt;/li&gt;
    &lt;li&gt;Map the process, not an event.&lt;/li&gt;
    &lt;li&gt;Concept to cash.&lt;/li&gt;
    &lt;li&gt;Preparation:
    &lt;ul&gt;
      &lt;li&gt;What to map.&lt;/li&gt;
      &lt;li&gt;When to start/stop the timeline.&lt;/li&gt;
      &lt;li&gt;Approval process should be included.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Value from the point of view of the customer.&lt;/li&gt;
    &lt;li&gt;Identify value stream owner.
    &lt;ul&gt;
      &lt;li&gt;Someone that cares about organization cross-boundary issues.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Keep it simple:
    &lt;ul&gt;
      &lt;li&gt;About 10 steps.&lt;/li&gt;
      &lt;li&gt;Value stream maps have no value by themselves.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - Speed&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Speed is the absence of waste.&lt;/li&gt;
  &lt;li&gt;Cycle time is the measurement that alert us when anything is going wrong.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Little%27s_law&quot;&gt;Little&amp;rsquo;s Law&lt;/a&gt;: in a stable system cycle time = things in process / average completion time.&lt;/li&gt;
  &lt;li&gt;Reduce cycle time by:
  &lt;ul&gt;
    &lt;li&gt;Reduce WIP. (&amp;lt;&amp;ndash; cheaper)&lt;/li&gt;
    &lt;li&gt;Increase speed.&lt;/li&gt;
    &lt;li&gt;Event out the arrival of work.&lt;/li&gt;
    &lt;li&gt;Establish regular cadence:
    &lt;ul&gt;
      &lt;li&gt;If big flurry of activity at the end of iteration, then iteration is too long.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Limit work to capacity.&lt;/li&gt;
    &lt;li&gt;Use pull schedule:
    &lt;ul&gt;
      &lt;li&gt;Queuing at the edges of the organization.&lt;/li&gt;
      &lt;li&gt;Keep queues short: two cycles of work.&lt;/li&gt;
      &lt;li&gt;Changes in queues are ok, but not once the work is being done.&lt;/li&gt;
      &lt;li&gt;Team pulls works.&lt;/li&gt;
      &lt;li&gt;Queue must have a max size.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Unstable systems:
  &lt;ul&gt;
    &lt;li&gt;High variation: Fix by small batches.&lt;/li&gt;
    &lt;li&gt;High utilization: Above 80%, things start to slow down.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - People&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/10x-curiosity/system-of-profound-knowledge-ce8cd368ca62&quot;&gt;System of profound knowledge&lt;/a&gt; (Edwards Deming):
  &lt;ol&gt;
    &lt;li&gt;Appreciation for a system:
    &lt;ul&gt;
      &lt;li&gt;Synergy between parts of any system is the key to the success of the system.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Knowledge about variation:
    &lt;ul&gt;
      &lt;li&gt;Build cause of low quality and productivity is inherent to the system, hence must change the system to address those.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Theory of knowledge:
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/PDCA&quot;&gt;Deming cycle&lt;/a&gt;: plan, do, check, act.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Psychology:
    &lt;ul&gt;
      &lt;li&gt;When it comes to people, things that make a difference are skills, pride, expertise, confidence and cooperation.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Deming&amp;rsquo;s 14 points on quality for management (page 122):
  &lt;ul&gt;
    &lt;li&gt;(1) Dont focus on short-term profitability.&lt;/li&gt;
    &lt;li&gt;(3) Quit depending on inspection to find defects.&lt;/li&gt;
    &lt;li&gt;(6) Institute training.&lt;/li&gt;
    &lt;li&gt;(8) Drive out fear.&lt;/li&gt;
    &lt;li&gt;(9) Break down barriers between departments. Do not undermine team cooperation by rewarding individual performance.&lt;/li&gt;
    &lt;li&gt;(11) Eliminate arbitrary deadlines. This is management by fear.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;When things go wrong, the cause is inherent to the system, and therefore is a management problem.&lt;/li&gt;
  &lt;li&gt;Toyota&amp;rsquo;s real innovation is its ability to harness the intellect of &amp;ldquo;ordinary&amp;rdquo; employees.&lt;/li&gt;
  &lt;li&gt;Do you talk about trust with suppliers but insist on fixed price contracts?&lt;/li&gt;
  &lt;li&gt;The thing that turns a group into a team is the mutual commitment of the members to pool their various skills and work together for a common purpose.&lt;/li&gt;
  &lt;li&gt;Teamwork is essential, but someone always needs to be responsible.&lt;/li&gt;
  &lt;li&gt;Process leadership != product leadership != technical leadership.&lt;/li&gt;
  &lt;li&gt;Responsibility based planning and control:
  &lt;ul&gt;
    &lt;li&gt;Chief engineer sets synchronization events. Teams figure themselves how to meet them.&lt;/li&gt;
    &lt;li&gt;Remember to:
    &lt;ul&gt;
      &lt;li&gt;Give people the time to do the job.&lt;/li&gt;
      &lt;li&gt;Details will/can change.&lt;/li&gt;
      &lt;li&gt;Limit work to capacity.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;The job of managing dependencies should fall to the system design, not the schedule.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Self-directing work: everybody can figure out what is the most important thing they can do without being told.
  &lt;ul&gt;
    &lt;li&gt;Three levels of info:
    &lt;ol&gt;
      &lt;li&gt;Kanban:
      &lt;ul&gt;
        &lt;li&gt;Challenges:
        &lt;ul&gt;
          &lt;li&gt;Right size.&lt;/li&gt;
          &lt;li&gt;Enough detail.&lt;/li&gt;
          &lt;li&gt;Correct priority&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
        &lt;li&gt;The card is not a specification.&lt;/li&gt;
        &lt;li&gt;The card is a signal to bring together the right people to create the detailed design, verifications and implementations.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Anden: Board with any abnormalities that requires attention.&lt;/li&gt;
      &lt;li&gt;Dashboard:
      &lt;ul&gt;
        &lt;li&gt;How do people know their progress towards meeting the overall goal of their work?&lt;/li&gt;
        &lt;li&gt;How well the team is doing.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ol&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Two types of companies:
  &lt;ul&gt;
    &lt;li&gt;Economic company: exchange your skills for remuneration.&lt;/li&gt;
    &lt;li&gt;River company: exchange your care and commitment for the fact that the company will try to develop you to your maximum potential.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Eliminate annual performance ratings: They kill cooperation and pride.&lt;/li&gt;
  &lt;li&gt;You get what you reward: Find effective ways to reward collaboration.&lt;/li&gt;
  &lt;li&gt;Performance evaluation: time set aside to reflect on where your potential lies and next steps to develop that potential.&lt;/li&gt;
  &lt;li&gt;When an employee is not performing, the first question a manager should ask is: What am I doing wrong?&lt;/li&gt;
  &lt;li&gt;Compensation:
  &lt;ol&gt;
    &lt;li&gt;Make sure the promotion system is unassailable.&lt;/li&gt;
    &lt;li&gt;De-empathize annual raises.&lt;/li&gt;
    &lt;li&gt;Reward based on span of influence, not span of control.&lt;/li&gt;
    &lt;li&gt;Find better motivators than money.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Knowledge&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;First step in any improvement effort should be to ask two basic questions (Art Smalley):
  &lt;ul&gt;
    &lt;li&gt;How do you intend to make a profit and satisfy your customers?&lt;/li&gt;
    &lt;li&gt;What exactly is your main problem?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Disciplined problem-solving method. Train everybody on this.&lt;/li&gt;
  &lt;li&gt;Piles of documentation are useless as a learning tool:
  &lt;ul&gt;
    &lt;li&gt;Condense knowledge in a A3.&lt;/li&gt;
    &lt;li&gt;If it does not fit an A3, use an A4.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Decisions:
  &lt;ul&gt;
    &lt;li&gt;First decide when the decision must be made.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The work of any SW development process is to create knowledge that gets embedded in the software.&lt;/li&gt;
  &lt;li&gt;Set-Based design:
  &lt;ul&gt;
    &lt;li&gt;Implement several options at the same time.&lt;/li&gt;
    &lt;li&gt;Each option is better but less likely to hit the deadline.&lt;/li&gt;
    &lt;li&gt;When to use:
    &lt;ul&gt;
      &lt;li&gt;Unmovable deadline.&lt;/li&gt;
      &lt;li&gt;Failure is not an option.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Best method to meet deadlines and to learn the most.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Refactoring is the fundamental enabler of limiting code complexity, increase change tolerance, value and longevity of the code.&lt;/li&gt;
  &lt;li&gt;Kaizen Events:
  &lt;ul&gt;
    &lt;li&gt;Representatives from different functional areas to work intensely for a few days to solve a well defined critical problem.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;For longer improvements, see GE Workout.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Quality&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Prioritize:
  &lt;ol&gt;
    &lt;li&gt;High value before lower value.&lt;/li&gt;
    &lt;li&gt;High risk before lower risk.&lt;/li&gt;
    &lt;li&gt;Features that create new knowledge before those well understood.&lt;/li&gt;
    &lt;li&gt;Lower cost before higher cost.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Standards: follow them, but also challenge them.&lt;/li&gt;
  &lt;li&gt;Pair programming, automation, TDD, CI.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Partners&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The fundamental reason for partnership is synergy: achieve better results through cooperation.&lt;/li&gt;
  &lt;li&gt;Fuelled by trust and paid with applause.&lt;/li&gt;
  &lt;li&gt;How to build global teams:
  &lt;ul&gt;
    &lt;li&gt;Frequent integration.&lt;/li&gt;
    &lt;li&gt;Exchange people.&lt;/li&gt;
    &lt;li&gt;Exchange tests.&lt;/li&gt;
    &lt;li&gt;Proxy: one person acting as a proxy of a full remote team.&lt;/li&gt;
    &lt;li&gt;Traveling team leader.&lt;/li&gt;
    &lt;li&gt;No second-hand citizens.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Outsourcing: avoid conflict of interest of employees and companies involved.&lt;/li&gt;
  &lt;li&gt;Contracts&amp;rsquo; purpose, either:
  &lt;ol&gt;
    &lt;li&gt;Protects each party from opportunistic behaviour.&lt;/li&gt;
    &lt;li&gt;Setup appropriate incentives to work together in a synergistic way.&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Relational_contract&quot;&gt;Relational contracts&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;IT Contracts: focus on how parties will work together to determine what to deliver, instead of an specification of what to build.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Chapter 10 - Journey&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Start lean initiative by answering:
  &lt;ol&gt;
    &lt;li&gt;How do you create value for customers and make a profit?&lt;/li&gt;
    &lt;li&gt;What is your main problem right now?&lt;/li&gt;
    &lt;li&gt;What threatens your continued existence?&lt;/li&gt;
    &lt;li&gt;What do you really believe about people?&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Effective way to start lean development:
  &lt;ol&gt;
    &lt;li&gt;Train team leaders and supervisors.&lt;/li&gt;
    &lt;li&gt;Emphasize on-the-job thinking.&lt;/li&gt;
    &lt;li&gt;Measure a few key indicators:
    &lt;ul&gt;
      &lt;li&gt;cycle time.&lt;/li&gt;
      &lt;li&gt;financial results.&lt;/li&gt;
      &lt;li&gt;customer satisfaction (NPS).&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Automation should aim to &amp;ldquo;upskill&amp;rdquo; workers, not &amp;ldquo;deskill&amp;rdquo; the process.&lt;/li&gt;
  &lt;li&gt;Theory of Constraints:
  &lt;ul&gt;
    &lt;li&gt;New technology is useful if it removes a limitation.&lt;/li&gt;
    &lt;li&gt;We must deal with the existing accommodations: existing rules/mechanisms to cope with the limitation.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Critical chain:
  &lt;ul&gt;
    &lt;li&gt;Theory of constraints applied to projects.&lt;/li&gt;
    &lt;li&gt;Product development is a project.&lt;/li&gt;
    &lt;li&gt;Key constraint: estimates regarded as commitments.&lt;/li&gt;
    &lt;li&gt;Because of this, people over-estimate, and then &lt;a href=&quot;https://en.wikipedia.org/wiki/Parkinson%27s_law&quot;&gt;Parkinson&amp;rsquo;s law&lt;/a&gt;.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
You dont believe in clean code
</title>
<link>
https://danlebrero.com/2020/06/10/you-dont-believe-in-clean-code/
</link>
<guid>
https://danlebrero.com/2020/06/10/you-dont-believe-in-clean-code/
</guid>
<pubDate>
Wed, 10 Jun 2020 11:45:00 +0200
</pubDate>
<description>
&lt;p&gt;It happened again yesterday.&lt;/p&gt;&lt;p&gt;I was completely focused on some code when my manager jumped out of nowhere and started shouting: &amp;ldquo;The cyclomatic complexity is fine and the coupling between packages is acceptable! Stop splitting that class! Don’t extract a new method! And for god’s sake, don’t you dare to write another test!&amp;rdquo;&lt;/p&gt;&lt;p&gt;Or maybe it didn&amp;rsquo;t happen yesterday, or the day before, or any day in my 20 years of professional experience. In fact, I have never seen it happen to anybody else.&lt;/p&gt;&lt;p&gt;One reason is because no manager knows what cyclomatic complexity is, they cannot name any refactoring, and they cannot distinguish test code from production code. And why should they? It is none of their business.&lt;/p&gt;&lt;p&gt;Another reason could be because good managers, even if they know our jargon, also know their limits and wisely stay away from the code. It is none of their business.&lt;/p&gt;&lt;p&gt;So how come even if none of my dozens of managers have ever implicitly or explicitly forbidden any technical practice, I still have seen plenty of poor codebases, bug-ridden applications and unmaintainable systems?&lt;/p&gt;&lt;p&gt;Could it be our fault? &lt;/p&gt;&lt;h2&gt;Time pressure&lt;/h2&gt;&lt;p&gt;Of course it is never our fault. If we had just been given the time to write clean code, to do some refactoring here and there, to write more tests, to follow all those &amp;ldquo;best&amp;rdquo; practices …&lt;/p&gt;&lt;p&gt;But no, your manager keeps on pushing for more features and arbitrary deadlines. So we are forced to cut some corners, and which corners do we choose to cut?&lt;/p&gt;&lt;p&gt;It is you that decides to not clean up, it is you that decides that each one should work on its own, it is you that decides to not write any tests. All those practices to improve quality have an extra cost. &lt;/p&gt;&lt;p&gt;And quality is expensive. &lt;/p&gt;&lt;h2&gt;Application Quality vs Code Quality&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;Quality is value to some person &lt;cite&gt;Jerry Weinberg&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Application quality, without question, takes time: a pretty UI, an awesome UX, fast, slick, scalable, always available, feature &lt;strike&gt;rich&lt;/strike&gt; correct&amp;hellip; All those things are going to impact your clients’ perception of the quality of your application.&lt;/p&gt;&lt;p&gt;But what about code quality?&lt;/p&gt;&lt;p&gt;The state of your codebase and your systems, whether you use tabs or spaces, is completely irrelevant to your users. It has zero value to them.&lt;/p&gt;&lt;p&gt;Code quality is what developers value in a codebase.&lt;/p&gt;&lt;p&gt;And all the attributes that we value in a codebase can be distilled into one: how easy it is to change without negatively impacting the application quality.&lt;/p&gt;&lt;p&gt;And by easy to change, we mean that it is fast to make the change. &lt;/p&gt;&lt;p&gt;Code quality allows us to go faster, contradicting our perception of quality being expensive.&lt;/p&gt;&lt;h2&gt;Why code quality is perceived as expensive&lt;/h2&gt;&lt;p&gt;The reason code quality is perceived as expensive is because we are investing time on things that actually do not increase quality, that do not make us go faster. &lt;/p&gt;&lt;p&gt;Some of those things are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Beautiful code&lt;/li&gt;
  &lt;li&gt;Design for no change&lt;/li&gt;
  &lt;li&gt;Abstractions&lt;/li&gt;
  &lt;li&gt;Best practices&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;Beautiful code&lt;/h3&gt;&lt;p&gt;In my early years as a software developer, I read plenty of books and articles that made me believe that software development was like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/clean-code/dreamy-software-developer.jpg&quot; alt=&quot;dreamy-software-developer&quot; /&gt;&lt;br/&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Artist_at_Mansudae_Art_Studio,_Pyongyang_(10104200854).jpg&quot; title=&quot;via Wikimedia Commons&quot;&gt;Uri Tours (uritours.com)&lt;/a&gt; / &lt;a href=&quot;https://creativecommons.org/licenses/by-sa/2.0&quot;&gt;CC BY-SA&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;This perception, coupled with the fact that even for the simplest work we were treated as geniuses, gave us the license to behave like &lt;a href=&quot;https://en.wikipedia.org/wiki/Michelangelo&quot;&gt;Michelangelo&lt;/a&gt;:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/xPJzhocW7vw&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;But software development is not an art, code does not need to read as a novel, and your codebase is not a zen garden.&lt;/p&gt;&lt;p&gt;I have spent far too much time on pointless debates, endless refactorings and polishing sessions for the sake of &lt;em&gt;beautiful&lt;/em&gt; code. It was mentally very satisfying but it had little actual business value.&lt;/p&gt;&lt;p&gt;And as much as the romantic vision of craftsmanship is very appealing, I wish that the craftsmanship &lt;a href=&quot;https://www.amazon.com/Software-Craftsman-Professionalism-Pragmatism-Pride/dp/0134052501&quot;&gt;books&lt;/a&gt;’ &lt;a href=&quot;https://www.amazon.com/Software-Craftsmanship-Imperative-Pete-McBreen/dp/0201733862&quot;&gt;covers&lt;/a&gt; showed the kind of craftsman that I now identify the most with:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/clean-code/real-software-craftsman.jpg&quot; alt=&quot;real-software-craftman&quot; /&gt;&lt;br/&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://oficiossite.wordpress.com/2017/05/14/oficio-del-pintor-de-brocha-gorda/&quot;&gt;Pintor de brocha gorda&lt;/a&gt; by &lt;a href=&quot;https://oficiossite.wordpress.com&quot;&gt;&lt;a href=&quot;https://oficiossite.wordpress.com&quot;&gt;https://oficiossite.wordpress.com&lt;/a&gt;&lt;a&gt;&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Maybe not as sexy, but more in line with what we actually do.&lt;/p&gt;&lt;p&gt;Remember that the most &lt;em&gt;beautiful&lt;/em&gt; thing that you can do with any code is &lt;a href=&quot;http://blog.cognitect.com/blog/2016/3/17/the-new-normal-protected-asset-or-disposable-inventory&quot;&gt;delete it&lt;/a&gt;.&lt;/p&gt;&lt;h3&gt;Design for no change&lt;/h3&gt;&lt;p&gt;Change is a constant in software development.&lt;/p&gt;&lt;p&gt;The common wisdom to cope with change is to add enough hooks, extension points and interfaces in our design so that when change comes, we do not need to change the existing code.&lt;/p&gt;&lt;p&gt;We cope with change by designing for no-change. &lt;/p&gt;&lt;p&gt;And how &lt;em&gt;beautiful&lt;/em&gt; it is when a new requirement fits in the design and allows us to add new functionality without touching the existing code, without the fear of breaking existing functionality and with minimum effort.&lt;/p&gt;&lt;p&gt;This is the &lt;a href=&quot;https://en.wikipedia.org/wiki/Open–closed_principle&quot;&gt;Open-Closed principle&lt;/a&gt; at its best.&lt;/p&gt;&lt;p&gt;And of course this is extremely useful and you will be crazy of not trying to design for no-change, but how do you arrive at this design?&lt;/p&gt;&lt;p&gt;One approach is to look at the future and make a bet on what the system will need. Unless your precognition skills are particularly good, this usually leads to &lt;a href=&quot;https://en.wikipedia.org/wiki/Overengineering&quot;&gt;over-engineering&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The other approach is to aim to be &lt;a href=&quot;https://www.youtube.com/watch?v=gdbjw27QPJQ&quot;&gt;Captain Hindsight&lt;/a&gt;, so that when it is obvious what should have happened, we are in a position to make it happen. &lt;/p&gt;&lt;p&gt;What would you need to do in order to implement Captain Hindsight’s hindsight without the fear of breaking existing functionality?&lt;/p&gt;&lt;h3&gt;Abstractions&lt;/h3&gt;&lt;p&gt;Humans are notoriously good at finding patterns anywhere, even where there are none, and when coding we are no exception.&lt;/p&gt;&lt;p&gt;When we find such patterns in code, we are strongly compelled to codify them in an abstraction, which very often leads to the wrong abstraction.&lt;/p&gt;&lt;p&gt;And I could not explain better than &lt;a href=&quot;https://twitter.com/sandimetz&quot;&gt;Sandi Metz&lt;/a&gt; how expensive wrong abstractions are:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Duplication is far cheaper than the wrong abstraction &lt;cite&gt;&lt;a href=&quot;https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction&quot;&gt;https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;And worst of all, how &lt;em&gt;beautiful&lt;/em&gt; we find are our own abstractions.&lt;/p&gt;&lt;h3&gt;Best practices&lt;/h3&gt;&lt;p&gt;As a profession, we have managed to make a dogma of all the practices and processes that we have been discovering, transforming something that can be useful in some context, into something that must be universally applied, disregarding our context and failing to understand the context where the practice came from.&lt;/p&gt;&lt;p&gt;As I said in &lt;a href=&quot;https://dev.to/danlebrero/the-tragedy-of-100-code-coverage&quot;&gt;The tragedy of 100% code coverage&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Once a &amp;ldquo;good practice&amp;rdquo; becomes mainstream we seem to forget how it came to be, what its benefits are, and most importantly, what the cost of using it is. &lt;/p&gt;&lt;p&gt;Instead, we just mechanically apply it without too much thought, which usually means that we end up with at best mediocre results, losing most of the benefits but paying all (or even more) of the cost.&lt;/p&gt;
&lt;/blockquote&gt;&lt;h2&gt;We do not believe in clean code&lt;/h2&gt;&lt;p&gt;Because deep inside us, we still believe that none of the good practices makes us go faster. They slow us down for the sake of quality.&lt;/p&gt;&lt;p&gt;But application quality is different from code quality.&lt;/p&gt;&lt;p&gt;Code quality is not expensive, it is the only way to go fast.&lt;/p&gt;&lt;p&gt;It is up to you and your team to decide which practices to follow, which practices increase the quality of your code and systems, which practices make you go fast. And I am sorry but you will need to &lt;a href=&quot;/2020/01/22/accelerate-high-performing-technology-orgs-summary/#content&quot;&gt;measure it&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;And please, &lt;a href=&quot;/2017/05/24/clojure-most-important-lesson/#content&quot;&gt;be open&lt;/a&gt;. Code and practices are just tools. Don’t be proud of a hammer.&lt;/p&gt;&lt;p&gt;Be proud of your job, but remember that your job is a client problem solved in the most efficient and effective way.&lt;/p&gt;
</description>
</item>
<item>
<title>
In case of doubt, ask for clarification
</title>
<link>
https://danlebrero.com/2020/04/15/on-the-importance-of-clear-communication-in-devops/
</link>
<guid>
https://danlebrero.com/2020/04/15/on-the-importance-of-clear-communication-in-devops/
</guid>
<pubDate>
Wed, 15 Apr 2020 09:00:00 +0200
</pubDate>
<description>
&lt;p&gt;As an example of what not to do, here I am earlier this year with a teammate, doing some Ops work (&lt;a href=&quot;https://github.com/akvo/akvo-unified-log&quot;&gt;Unilog&lt;/a&gt; is a backend service, &lt;a href=&quot;https://github.com/akvo/akvo-flow/&quot;&gt;akvoflow-87&lt;/a&gt; is a tenant of another backend service that depends on the Unilog):&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/importance-of-communication/importance-of-clear-communication.jpg&quot; alt=&quot;Not so clear communication&quot; title=&quot;Not so clear communication&quot; /&gt;&lt;/p&gt;&lt;p&gt;I hope it is not obvious to you, as it was not for me, but what my teammate was actually asking was:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can I completely decommission Unilog forever?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;But what I understood was:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Can I stop Unilog for a minute?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Result: a massive slowdown of the whole system for a few hours.&lt;/p&gt;&lt;p&gt;We have been talking about decommissioning that Unilog service the whole week, so it even crossed my mind that maybe it was related to it, I thought &lt;em&gt;he surely cannot be asking about decommissioning it&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;Silly me for not asking.&lt;/p&gt;
</description>
</item>
<item>
<title>
Book notes: No-Nonsense Leadership
</title>
<link>
https://danlebrero.com/2020/04/01/no-nonsense-leadership-summary/
</link>
<guid>
https://danlebrero.com/2020/04/01/no-nonsense-leadership-summary/
</guid>
<pubDate>
Wed, 01 Apr 2020 09:00:00 +0200
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/NadiavdVlies&quot;&gt;Nadia van der Vlies&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://www.amazon.com/No-Nonsense-Leadership-Become-Effective-Manager-ebook/dp/B07S8CYNNT&quot;&gt;No-nonsense Leadership&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;It contains quite practical advice, but it is not software/engineering specific. &lt;/p&gt;&lt;p&gt;Keeps the trend on other leadership books: Empower people by letting them find their own solutions.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Mature leadership:
  &lt;ul&gt;
    &lt;li&gt;High empathy, High honesty.&lt;/li&gt;
    &lt;li&gt;Treat others as equals.&lt;/li&gt;
    &lt;li&gt;Everybody can self-manage.&lt;/li&gt;
    &lt;li&gt;Empower people to come up with solutions.&lt;/li&gt;
    &lt;li&gt;Bidirectional trust.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;New behaviours are acquired by doing, doing and doing.&lt;/li&gt;
  &lt;li&gt;To keep control, take ownership:&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/no-nonse-leadership/take-ownership.jpg&quot; alt=&quot;Take ownership&quot; title=&quot;Taking ownership&quot; /&gt; &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Keep sharing the mission, vision and strategy.&lt;/li&gt;
  &lt;li&gt;You are no longer one of your (ex-)co-workers.&lt;/li&gt;
  &lt;li&gt;Performance reviews:
  &lt;ul&gt;
    &lt;li&gt;Negative reviews should never come as a surprise.&lt;/li&gt;
    &lt;li&gt;Make notes through the year.&lt;/li&gt;
    &lt;li&gt;Would I hire this employee if they were applying for their current position?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Give compliments regularly:
  &lt;ul&gt;
    &lt;li&gt;Stimulate culture where people speak positively about others.&lt;/li&gt;
    &lt;li&gt;Be specific.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If you want your employees to feel safe, you have to show some vulnerability.&lt;/li&gt;
  &lt;li&gt;Coaching:
  &lt;ul&gt;
    &lt;li&gt;Coaching means biting your tongue a lot.&lt;/li&gt;
    &lt;li&gt;A success is an attempt to change behaviour, even if the attempt failed.&lt;/li&gt;
    &lt;li&gt;Coachee is responsible for his personal development.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;To reflect is to learn.&lt;/li&gt;
  &lt;li&gt;If you work hard, other wont have to.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#respectful-confrontation&quot;&gt;Respectful confrontation&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#bad-news&quot;&gt;Delivering bad news&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - No-Nonsense Leadership&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Leadership Skills&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - Leader, Manager, Coach&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Leader&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - Manager&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - Coach&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - Reflexes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - Tricky Situations&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - The truism of no-nonsense leadership&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - No-Nonsense Leadership&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Mature model based on &lt;a href=&quot;https://en.wikipedia.org/wiki/Transactional_analysis&quot;&gt;Transactional Analysis&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Mature:
  &lt;ul&gt;
    &lt;li&gt;Treat others as equals.&lt;/li&gt;
    &lt;li&gt;Everybody is a responsible human being.&lt;/li&gt;
    &lt;li&gt;Everybody can self-manage.&lt;/li&gt;
    &lt;li&gt;Coaching leadership style.&lt;/li&gt;
    &lt;li&gt;Empower people to come up with solutions.&lt;/li&gt;
    &lt;li&gt;Honest.&lt;/li&gt;
    &lt;li&gt;Conscious and considerate choice.&lt;/li&gt;
    &lt;li&gt;Bidirectional trust.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;You need:
  &lt;ul&gt;
    &lt;li&gt;Empathy.&lt;/li&gt;
    &lt;li&gt;Honesty.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Pitfalls:
  &lt;ul&gt;
    &lt;li&gt;Mother:
    &lt;ul&gt;
      &lt;li&gt;High empathy. Low Honesty.&lt;/li&gt;
      &lt;li&gt;Always eager to help.&lt;/li&gt;
      &lt;li&gt;Effects:
      &lt;ul&gt;
        &lt;li&gt;Takes away responsibility, hence opportunity to grow.&lt;/li&gt;
        &lt;li&gt;Leader become overworked.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Macho:
    &lt;ul&gt;
      &lt;li&gt;Low empathy. High Honesty.&lt;/li&gt;
      &lt;li&gt;I know better attitude. Judgemental.&lt;/li&gt;
      &lt;li&gt;Effects:
      &lt;ul&gt;
        &lt;li&gt;Obedient or rebel employees.&lt;/li&gt;
        &lt;li&gt;Takes away responsibility, hence opportunity to grow.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Mole:
    &lt;ul&gt;
      &lt;li&gt;Low empathy. Low Honesty.&lt;/li&gt;
      &lt;li&gt;Avoids confronting issues.&lt;/li&gt;
      &lt;li&gt;Effects:
      &lt;ul&gt;
        &lt;li&gt;Nothing is improved.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Pitfalls are not pitfalls if you consciously chose them and don’t use them often.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Leadership Skills&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Situational leadership:
  &lt;ul&gt;
    &lt;li&gt;Use a different kind of leadership depending on employee task maturity.&lt;/li&gt;
    &lt;li&gt;Task Maturity:
    &lt;ul&gt;
      &lt;li&gt;Willingness to do the task.&lt;/li&gt;
      &lt;li&gt;Ability to perform it.&lt;/li&gt;
      &lt;li&gt;Levels M1 to M6:
      &lt;ul&gt;
        &lt;li&gt;M1: Loads of detailed instructions.&lt;/li&gt;
        &lt;li&gt;M2: Still lots of instructions, but also explain the why.&lt;/li&gt;
        &lt;li&gt;M3: Focus on person, not task.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;How to asses task maturity? Ask employee.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/no-nonse-leadership/task-maturity.jpg&quot; alt=&quot;Situational leadership. Task Maturity&quot; title=&quot;Situational leadership. Task maturity.&quot; /&gt; &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Taking ownership:
  &lt;ul&gt;
    &lt;li&gt;Keep your values in mind.&lt;/li&gt;
    &lt;li&gt;When things do not go as expected, to keep control you have to:&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/no-nonse-leadership/take-ownership.jpg&quot; alt=&quot;Take ownership&quot; title=&quot;Taking ownership&quot; /&gt; &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Conversations:
  &lt;ul&gt;
    &lt;li&gt;Keep three perspectives: yours, the others, that of an objective observer.&lt;/li&gt;
    &lt;li&gt;Active listening:
    &lt;ul&gt;
      &lt;li&gt;Listen.&lt;/li&gt;
      &lt;li&gt;Recap:
      &lt;ul&gt;
        &lt;li&gt;Use your own words unless is a delicate matter.&lt;/li&gt;
        &lt;li&gt;Content and feelings.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Keep asking questions.&lt;/li&gt;
      &lt;li&gt;Tolerate silences.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Stay in control:
    &lt;ul&gt;
      &lt;li&gt;Commit: set the goal.&lt;/li&gt;
      &lt;li&gt;Monitor: check if the talking is relevant.&lt;/li&gt;
      &lt;li&gt;Off topic: draw attention and ask if it is relevant.&lt;/li&gt;
      &lt;li&gt;Difficult interaction: draw attention and ask why.&lt;/li&gt;
      &lt;li&gt;Two tracks: commit again.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - Leader, Manager, Coach&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You are no longer one of your (ex-)co-workers.&lt;/li&gt;
  &lt;li&gt;Leader before Manager or Coach.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Leader&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Enthusiastic, authentic.&lt;/li&gt;
  &lt;li&gt;Keep sharing the mission, vision and strategy.&lt;/li&gt;
  &lt;li&gt;Know and learn company values.&lt;/li&gt;
  &lt;li&gt;Motivate and inspire:
  &lt;ul&gt;
    &lt;li&gt;Share conclusions &lt;em&gt;and reasoning&lt;/em&gt;.&lt;/li&gt;
    &lt;li&gt;Show appreciation.&lt;/li&gt;
    &lt;li&gt;Repeat yourself.&lt;/li&gt;
    &lt;li&gt;Connect.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - Manager&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Translates Vision to Goals:
  &lt;ul&gt;
    &lt;li&gt;Employee translates goals to solutions.&lt;/li&gt;
    &lt;li&gt;Let employees have a say on their goals to create greater commitment.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Monitor and review results and behaviours:
  &lt;ul&gt;
    &lt;li&gt;&lt;a name=&quot;respectful-confrontation&quot;&gt;&lt;/a&gt;Respectful confrontation:
    &lt;ul&gt;
      &lt;li&gt;Step 0: reflect if it is you or the employee.&lt;/li&gt;
      &lt;li&gt;Step 1: Expose facts and only facts.
      &lt;ul&gt;
        &lt;li&gt;Use first person.&lt;/li&gt;
        &lt;li&gt;No judgement.&lt;/li&gt;
        &lt;li&gt;Be very specific.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Step 2: The effect it causes.
      &lt;ul&gt;
        &lt;li&gt;I think + I feel + I act.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Step 3: Ask &amp;ldquo;Is this something you recognize?&amp;rdquo;&lt;/li&gt;
      &lt;li&gt;Step 4: Explain your request/desire.&lt;/li&gt;
      &lt;li&gt;This is the kick-off for a conversation.&lt;/li&gt;
      &lt;li&gt;Dealing with responses:
      &lt;ul&gt;
        &lt;li&gt;Reflect on feeling.&lt;/li&gt;
        &lt;li&gt;Explain.&lt;/li&gt;
        &lt;li&gt;Guess underlying need.&lt;/li&gt;
        &lt;li&gt;Express your need.&lt;/li&gt;
        &lt;li&gt;Make your request/proposal.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Asses and adjust:
  &lt;ul&gt;
    &lt;li&gt;Performance review:
    &lt;ul&gt;
      &lt;li&gt;Your employee is never your equal.&lt;/li&gt;
      &lt;li&gt;Demotivating for others if poor performing coworkers get same pay raises.&lt;/li&gt;
      &lt;li&gt;Make notes through the year.&lt;/li&gt;
      &lt;li&gt;Would I hire this employee if they were applying for their current position?&lt;/li&gt;
      &lt;li&gt;SMART goals.&lt;/li&gt;
      &lt;li&gt;Start with the good things.&lt;/li&gt;
      &lt;li&gt;Negative reviews should never come as a surprise.&lt;/li&gt;
      &lt;li&gt;Ask for feedback on the assessment.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Give compliments regularly:
    &lt;ul&gt;
      &lt;li&gt;Stimulate culture where people speak positively about others.&lt;/li&gt;
      &lt;li&gt;Honest.&lt;/li&gt;
      &lt;li&gt;Specific.&lt;/li&gt;
      &lt;li&gt;Do not delay it.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a name=&quot;bad-news&quot;&gt;&lt;/a&gt;Delivering bad news:
    &lt;ol&gt;
      &lt;li&gt;Deliver the blow:
      &lt;ul&gt;
        &lt;li&gt;Go straight to the bad news.&lt;/li&gt;
        &lt;li&gt;Give one or two reasons.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Manage the reaction:
      &lt;ul&gt;
        &lt;li&gt;Be understanding. Do not justify yourself.&lt;/li&gt;
        &lt;li&gt;Give space. Do not fill silences.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Solution, explanation, follow up appointment:
      &lt;ul&gt;
        &lt;li&gt;Wait for the employee to be ready. When she starts asking &amp;ldquo;why&amp;rdquo; or &amp;ldquo;what now&amp;rdquo;&lt;/li&gt;
        &lt;li&gt;Reiterate reasons.&lt;/li&gt;
        &lt;li&gt;Maybe follow up with another meeting.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ol&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Coach&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Coaching as a manager is more difficult as you already expect something from your employee.&lt;/li&gt;
  &lt;li&gt;Do not give tips or advice.&lt;/li&gt;
  &lt;li&gt;Coachee comes with their own problems and solutions.&lt;/li&gt;
  &lt;li&gt;Coachee is responsible for his personal development.&lt;/li&gt;
  &lt;li&gt;Accept what it is, without judging. Emphatic.&lt;/li&gt;
  &lt;li&gt;Pitfalls:
  &lt;ul&gt;
    &lt;li&gt;Comparing and going one worse.&lt;/li&gt;
    &lt;li&gt;Educating and giving advice.&lt;/li&gt;
    &lt;li&gt;Playing down the problem.&lt;/li&gt;
    &lt;li&gt;Interrogating.&lt;/li&gt;
    &lt;li&gt;Psychoanalyzing.&lt;/li&gt;
    &lt;li&gt;Join in and making it worse.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Walk ins with no clear question or need:
  &lt;ul&gt;
    &lt;li&gt;Respectful interrogation.&lt;/li&gt;
    &lt;li&gt;Emotion reflection.&lt;/li&gt;
    &lt;li&gt;What do you want from me? What is your question?&lt;/li&gt;
    &lt;li&gt;Commit: on condition, now, later, never.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Coaching without a coaching goal is pointless.&lt;/li&gt;
  &lt;li&gt;Marteen Kouwenhoven coaching matrix 4 doors:
  &lt;ol&gt;
    &lt;li&gt;Thought door: get the facts.&lt;/li&gt;
    &lt;li&gt;Emotions door: why is this a problem to be solved?&lt;/li&gt;
    &lt;li&gt;Needs door:
    &lt;ul&gt;
      &lt;li&gt;Positive opposite of emotions door.&lt;/li&gt;
      &lt;li&gt;Cannot be about others changing.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Actions door:
    &lt;ul&gt;
      &lt;li&gt;Coachee should find her own solutions.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;Coaching means biting your tongue a lot.&lt;/li&gt;
  &lt;li&gt;Celebrate success:
  &lt;ul&gt;
    &lt;li&gt;Start coaching session by talking about successes.&lt;/li&gt;
    &lt;li&gt;A success is an attempt to change behaviour, even if the attempt failed.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Growth mindset:
  &lt;ul&gt;
    &lt;li&gt;Learning about fixed vs growth can get you out of the fixed mindset.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If you want your employees to feel safe, you have to show some vulnerability.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Reflexes&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Beliefs that get on your way to do what you have to do.&lt;/li&gt;
  &lt;li&gt;&amp;ldquo;Survival&amp;rdquo; strategies.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Tricky Situations&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Passive employee, defiant employee, moaning employee, &amp;hellip;
  &lt;ul&gt;
    &lt;li&gt;Respectful confrontation&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Top performing employee:
  &lt;ul&gt;
    &lt;li&gt;Sincere and explicit compliments.&lt;/li&gt;
    &lt;li&gt;Not everyone wants to develop further.&lt;/li&gt;
    &lt;li&gt;Check regularly so they dont get bored.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Quarreling employees:
  &lt;ul&gt;
    &lt;li&gt;Employee should state exactly what she expects from you. This makes her responsible for the solution.&lt;/li&gt;
    &lt;li&gt;Employees should settle it themselves.&lt;/li&gt;
    &lt;li&gt;Make sure employees responsibilities are well defined.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Bonus 1 - The truism of no-nonsense leadership&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;To reflect is to learn.&lt;/li&gt;
  &lt;li&gt;The answer to most questions is &amp;ldquo;lets talk about it&amp;rdquo;&lt;/li&gt;
  &lt;li&gt;If you have something to say, say it. If you have something to ask, ask it.&lt;/li&gt;
  &lt;li&gt;If you work hard, other wont have to.&lt;/li&gt;
  &lt;li&gt;New behaviours are acquired by doing, doing and doing.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Virtual backgrounds for remote Software Developers
</title>
<link>
https://danlebrero.com/2020/03/16/backgrounds-for-software-developers-zoom-virtual-backgrounds/
</link>
<guid>
https://danlebrero.com/2020/03/16/backgrounds-for-software-developers-zoom-virtual-backgrounds/
</guid>
<pubDate>
Mon, 16 Mar 2020 13:15:00 +0100
</pubDate>
<description>
&lt;p&gt;As a lot of developers are going to be forced to work remotely these days, they are going to need an appropriate background for all those enjoyable remote meetings.&lt;/p&gt;&lt;p&gt;You can find the full background images without my ugly face at the bottom of this post.&lt;/p&gt;&lt;h2&gt;Client requirement gathering&lt;/h2&gt;&lt;p&gt;Use this one with your most important clients:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/kids-zoom.jpg&quot; alt=&quot;kids&quot; title=&quot;kids zoom background&quot; /&gt;&lt;/p&gt;&lt;p&gt;A classic for any remote worker. In case you do not understand it, watch the &lt;a href=&quot;https://www.youtube.com/watch?v=Mh4f9AYRCZY&quot;&gt;full video&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Original idea by &lt;a href=&quot;https://twitter.com/nthonyChu&quot;&gt;Anthony Chu&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;All-hands meeting&lt;/h2&gt;&lt;p&gt;When the whole company must be present for those long long meetings:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/lotr-humans-zoom.jpg&quot; alt=&quot;lotr-humans&quot; title=&quot;lotr-humans zoom background&quot; /&gt;&lt;/p&gt;&lt;p&gt;Make sure that one of you teammates brings the elves along:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/lotr-elves-zoom.jpg&quot; alt=&quot;lotr-elves&quot; title=&quot;lotr-elves zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Virtual coffee&lt;/h2&gt;&lt;p&gt;You no longer have spontaneous water cooler conversations, but that means that you can come prepared and make your team jealous: &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/holidays-zoom.jpg&quot; alt=&quot;holidays&quot; title=&quot;holidays zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Architecture meeting&lt;/h2&gt;&lt;p&gt;Here you have two good options. &lt;/p&gt;&lt;p&gt;First one if you are &lt;strong&gt;THE&lt;/strong&gt; &lt;strong&gt;A&lt;/strong&gt;rchitect of your team:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/architect-zoom.jpg&quot; alt=&quot;architect&quot; title=&quot;architect zoom background&quot; /&gt;&lt;/p&gt;&lt;p&gt;The second option is if you want to bring some subliminal message to the architecture discussion:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/kafka-zoom.jpg&quot; alt=&quot;kafka&quot; title=&quot;kafka zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Remote pair programming time&lt;/h2&gt;&lt;p&gt;Time to do some actual work now, trying to get in flow so that &lt;a href=&quot;https://danlebrero.com/2018/11/26/repl-driven-development-immediate-feedback-for-you-backend/#content&quot;&gt;you feel like Neo when we realizes he is the chosen one&lt;/a&gt;:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/matrix-zoom.jpg&quot; alt=&quot;matrix&quot; title=&quot;Matrix zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Talking with QA&lt;/h2&gt;&lt;p&gt;And squashing some bugs:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/bugs-zoom.jpg&quot; alt=&quot;bugs&quot; title=&quot;bugs zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Deploying to production&lt;/h2&gt;&lt;p&gt;Useful also for any outage:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/fire-zoom.jpg&quot; alt=&quot;fire&quot; title=&quot;fire zoom background&quot; /&gt;&lt;/p&gt;&lt;p&gt;Credits &lt;a href=&quot;https://kcgreendotcom.com/index.html&quot;&gt;KC Green&lt;/a&gt; for his awesome comics.&lt;/p&gt;&lt;h2&gt;Fixing production&lt;/h2&gt;&lt;p&gt;For those very special occasions when you just want to say &amp;ldquo;I told you so&amp;rdquo; to all your teammates:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/sunset-sunrays-zoom.jpg&quot; alt=&quot;sunset&quot; title=&quot;sunset zoom background&quot; /&gt;&lt;/p&gt;&lt;p&gt;You can also use it when giving some lecture or developer learning session.&lt;/p&gt;&lt;h2&gt;Brown bag sessions&lt;/h2&gt;&lt;p&gt;When it is one of your teammates giving a lecture:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/preaching-zoom.jpg&quot; alt=&quot;preaching&quot; title=&quot;preaching zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Friday afternoon&lt;/h2&gt;&lt;p&gt;Escaping from the Evil Empire (aka your boss).&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/starwars-zoom.jpg&quot; alt=&quot;starwars&quot; title=&quot;starwars zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Working over the weekend&lt;/h2&gt;&lt;p&gt;And when you fail to escape and have to work over the weekend:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/zoom/mugshot-zoom.jpg&quot; alt=&quot;jail&quot; title=&quot;mugshot zoom background&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Images&lt;/h2&gt;&lt;p&gt;Backgrounds work for me in &lt;a href=&quot;https://zoom.us&quot;&gt;Zoom&lt;/a&gt; with a 16:9 camera.&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Image &lt;/th&gt;
      &lt;th align=&quot;center&quot;&gt;Clean background &lt;/th&gt;
      &lt;th&gt;Image &lt;/th&gt;
      &lt;th align=&quot;center&quot;&gt;Clean background &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/kids-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/kids.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/lotr-humans-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/lort-humans.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/lotr-elves-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/lort-elves.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/holidays-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/holidays.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/architect-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/architect.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/kafka-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/kafka.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/matrix-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/matrix.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/bugs-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/bugs.png&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/fire-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/fire.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/sunset-sunrays-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/sunset-sunrays.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/preaching-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/preaching.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/starwars-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/starwars.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;img src=&quot;/images/blog/zoom/mugshot-zoom.jpg&quot; width=&quot;100&quot;&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt;&lt;a href=&quot;/images/blog/zoom/mugshot.jpg&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td align=&quot;center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;&lt;p&gt;Share some if you have!&lt;/p&gt;
</description>
</item>
<item>
<title>
Book notes: The Lean Mindset
</title>
<link>
https://danlebrero.com/2020/03/04/the-lean-mindset-summary/
</link>
<guid>
https://danlebrero.com/2020/03/04/the-lean-mindset-summary/
</guid>
<pubDate>
Wed, 04 Mar 2020 09:15:00 +0100
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/mpoppendieck&quot;&gt;Mary Poppendieck&lt;/a&gt; and Tom Poppendieck&amp;rsquo;s &lt;a href=&quot;https://www.amazon.com/Lean-Mindset-Ask-Right-Questions/dp/0321896904&quot;&gt;The Lean Mindset&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;This book is not an intro the Lean, but contains plenty of examples of how real world companies applied Lean principles.&lt;/p&gt;&lt;p&gt;As the authors mention on the introduction: Do not copy the practices. Develop a Lean Mindset.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Stop thinking about software development as a delivery process and start thinking of it as a problem solving process.&lt;/li&gt;
  &lt;li&gt;Wrong questions: &amp;ldquo;How will Lean or Agile increase productivity?&amp;rdquo;
  &lt;ul&gt;
    &lt;li&gt;Efficiency is not about more features but &lt;strong&gt;only&lt;/strong&gt; the right features.
    &lt;ul&gt;
      &lt;li&gt;Flow efficiency, not resource efficiency.&lt;/li&gt;
      &lt;li&gt;The way to achieve a software objective within time and budget is to develop &lt;strong&gt;less&lt;/strong&gt; features.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;High speed goes hand in hand with serious discipline and excellent quality.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Great products come from changing the focus from:
  &lt;ul&gt;
    &lt;li&gt;productivity to impact.&lt;/li&gt;
    &lt;li&gt;predictability to experimentation.&lt;/li&gt;
    &lt;li&gt;efficiency to decentralization.&lt;/li&gt;
    &lt;li&gt;product to problem.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;To find the business purpose ask: Who are our customers?&lt;/li&gt;
  &lt;li&gt;Long term success:
  &lt;ul&gt;
    &lt;li&gt;Better before cheaper.&lt;/li&gt;
    &lt;li&gt;Revenue before cost.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Tragedy_of_the_commons&quot;&gt;Tragedy of the commons&lt;/a&gt; is untrue if there is a self-governing community.&lt;/li&gt;
  &lt;li&gt;Reciprocity is the currency of cooperation.&lt;/li&gt;
  &lt;li&gt;Do not separate design from implementation.
  &lt;ul&gt;
    &lt;li&gt;Requirements docs are design.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Inverse estimation: Each feature has a time constraint determined by its value and market need.&lt;/li&gt;
  &lt;li&gt;Centralization due to cost savings/pressure, but if this cost pressure is due to market conditions changing, the company should be looking at innovation.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#learn-experiment&quot;&gt;Learn to experiment&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Walk in the shoes of your customers.&lt;/li&gt;
  &lt;li&gt;Focus on execution gives best solutions to the problems you are trying to solve, but it will not tell you if they are the right problems.&lt;/li&gt;
  &lt;li&gt;Managers should be coaches, expert roles should be teachers.&lt;/li&gt;
  &lt;li&gt;Optimist develop software, pessimists run the data centers. &lt;i class=&quot;far fa-grin-tongue-squint&quot;&gt;&lt;/i&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#into&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;The Purpose of Business&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;Energized Workers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;Genuine Efficiency&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;Delighted Customers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;Breakthrough Innovation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#epilogue&quot;&gt;Epilogue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;intro&quot;&gt;&lt;/a&gt;Introduction&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Mindset: a mental model of how the world works.&lt;/li&gt;
  &lt;li&gt;Great products come from changing the focus from:
  &lt;ul&gt;
    &lt;li&gt;productivity to impact.&lt;/li&gt;
    &lt;li&gt;predictability to experimentation.&lt;/li&gt;
    &lt;li&gt;efficiency to decentralization.&lt;/li&gt;
    &lt;li&gt;product to problem.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Do not copy the practices. Developing a mindset is about developing the expertise to:
  &lt;ul&gt;
    &lt;li&gt;Ask the right questions.&lt;/li&gt;
    &lt;li&gt;Solve the right problems.&lt;/li&gt;
    &lt;li&gt;Do the right things for the context at hand.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Dual processing theory:
  &lt;ul&gt;
    &lt;li&gt;Humans have two &amp;ldquo;minds&amp;rdquo;:
    &lt;ul&gt;
      &lt;li&gt;System 1: intuition, habit, emotions, fast.&lt;/li&gt;
      &lt;li&gt;System 2: analysis, plans, rational, slow.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The Fabric of Lean:
  &lt;ul&gt;
    &lt;li&gt;Purpose of Business:
    &lt;ul&gt;
      &lt;li&gt;Optimize the whole.&lt;/li&gt;
      &lt;li&gt;Focus on customers: long term success.&lt;/li&gt;
      &lt;li&gt;Douglas McGregor&amp;rsquo;s Theory X:
      &lt;ul&gt;
        &lt;li&gt;X - people do not want to work and will do the minimum.&lt;/li&gt;
        &lt;li&gt;Y - people are eager to work and want to do a good job.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Energize workers:
    &lt;ul&gt;
      &lt;li&gt;Reciprocity:
      &lt;ul&gt;
        &lt;li&gt;Treat well workers, they will treat well customers, which will treat well the company.&lt;/li&gt;
        &lt;li&gt;Is local, hence leverage on power of peers, not incentives.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Workers want well-framed challenges.
      &lt;ul&gt;
        &lt;li&gt;Not too easy (boring), not too hard (discouraging).&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Regulatory fit:
      &lt;ul&gt;
        &lt;li&gt;Aspirational: action, experimentation, start ups.&lt;/li&gt;
        &lt;li&gt;Duty: safety, failure prevention, big companies.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Constant Improvement.&lt;/li&gt;
      &lt;li&gt;Eliminate waste:
      &lt;ul&gt;
        &lt;li&gt;Building the wrong thing is the biggest wast of all.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Learn first.&lt;/li&gt;
      &lt;li&gt;Deliver fast.&lt;/li&gt;
      &lt;li&gt;Build Quality In.&lt;/li&gt;
      &lt;li&gt;Keep getting better.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;The Purpose of Business&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Two theories:
  &lt;ul&gt;
    &lt;li&gt;Peter Drucker: to create a customer.&lt;/li&gt;
    &lt;li&gt;Shareholder Value Theory: to maximize shareholder value. (Rational economics)
    &lt;ul&gt;
      &lt;li&gt;US CEO 1976 x36 average worker income.&lt;/li&gt;
      &lt;li&gt;US CEO 2010 x369 times.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;To find the purpose ask:
  &lt;ul&gt;
    &lt;li&gt;Who are our customers?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Purpose is master, profit is servant.&lt;/li&gt;
  &lt;li&gt;Best entrepreneurs are mission oriented (Todd Park):
  &lt;ul&gt;
    &lt;li&gt;They could not stand the idea of a world without what they were building.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Rational work system:
  &lt;ul&gt;
    &lt;li&gt;Rational people are shrinkers:
    &lt;ul&gt;
      &lt;li&gt;Try to maximize personal benefit with minimal work.&lt;/li&gt;
      &lt;li&gt;People are inherently selfish.&lt;/li&gt;
      &lt;li&gt;Companies can either:
      &lt;ul&gt;
        &lt;li&gt;Give very detailed instructions and close supervision:
        &lt;ul&gt;
          &lt;li&gt;Discourage thinking and improving.&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
        &lt;li&gt;Setup incentive system aligned to company interests:
        &lt;ul&gt;
          &lt;li&gt;Attracts shrinkers (self-fulfilling prophecy).&lt;/li&gt;
          &lt;li&gt;Kill intrinsic motivation.&lt;/li&gt;
          &lt;li&gt;Never fair: kills collaboration.&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Research:
    &lt;ul&gt;
      &lt;li&gt;30% population are selfish.&lt;/li&gt;
      &lt;li&gt;50% not.&lt;/li&gt;
      &lt;li&gt;20% undecided: if company assumes they are selfish, they will be.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Two types of profits:
  &lt;ul&gt;
    &lt;li&gt;Good profits: the customer feels have received good value.&lt;/li&gt;
    &lt;li&gt;Bad profits: customer thinks he has been cheated:
    &lt;ul&gt;
      &lt;li&gt;Reduce customer loyalty.&lt;/li&gt;
      &lt;li&gt;Demoralize employees.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Common strategies for success in the long term (Michael Raynor and Mumtaz Ahmed):
  &lt;ul&gt;
    &lt;li&gt;Better before cheaper.&lt;/li&gt;
    &lt;li&gt;Revenue before cost.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Cooperative Work Systems:
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Tragedy_of_the_commons&quot;&gt;Tragedy of the commons&lt;/a&gt; is untrue if there is a self-governing community.&lt;/li&gt;
    &lt;li&gt;8 principles of self-governing communities in page 26.&lt;/li&gt;
    &lt;li&gt;Peer pressure is better at controlling bad behaviour than external agents.&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Dunbar%27s_number&quot;&gt;The Dunbar Number&lt;/a&gt;:
    &lt;ul&gt;
      &lt;li&gt;Size of primate&amp;rsquo;s neocortex is directly related to the number of social relationships.&lt;/li&gt;
      &lt;li&gt;This directly relates to the maximum size of a group.&lt;/li&gt;
      &lt;li&gt;For humans is 150.&lt;/li&gt;
      &lt;li&gt;Pre-industrial social groups:
      &lt;ul&gt;
        &lt;li&gt;3-5 very close friends.&lt;/li&gt;
        &lt;li&gt;12-15 close friends.&lt;/li&gt;
        &lt;li&gt;30-50 hunting group: colleges who cooperate to accomplish a task.&lt;/li&gt;
        &lt;li&gt;150 clan: people that maintain stable interpersonal relationships.&lt;/li&gt;
        &lt;li&gt;500-2500 tribe: same language/dialect.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Why?
      &lt;ul&gt;
        &lt;li&gt;Reciprocity is the currency of cooperation.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Rules of cooperation:
    &lt;ul&gt;
      &lt;li&gt;Work groups should be responsible for its own fate.&lt;/li&gt;
      &lt;li&gt;Rules and norms should match local conditions. People affected should create/adapt them.&lt;/li&gt;
      &lt;li&gt;Peers will monitor each other.&lt;/li&gt;
      &lt;li&gt;External authorities should respect local communities.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Energized Workers&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Fixed mindset: you have a natural talent or you dont.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=C13JC_YP2Q8&quot;&gt;Growth mindset&lt;/a&gt;: with you work, you can learn/do anything.&lt;/li&gt;
  &lt;li&gt;Expertise == challenge + coaching + progress + perseverance.&lt;/li&gt;
  &lt;li&gt;Optimist develop software, pessimists run the data centers.&lt;/li&gt;
  &lt;li&gt;Optimists:
  &lt;ul&gt;
    &lt;li&gt;Can do attitude.&lt;/li&gt;
    &lt;li&gt;Promotion focus: focus on gains.&lt;/li&gt;
    &lt;li&gt;Pursuing opportunities.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Pessimist:
  &lt;ul&gt;
    &lt;li&gt;&amp;ldquo;Is it safe?&amp;rdquo;&lt;/li&gt;
    &lt;li&gt;Prevention focus: focus on losses.&lt;/li&gt;
    &lt;li&gt;Prevent failures.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Managers should be coaches.&lt;/li&gt;
  &lt;li&gt;Biggest motivator for knowledge workers on a day-to-day bases is making progress in meaningful work.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/27/architecture-decisions-beligerent-contrarian-rule-of-three/#content&quot;&gt;Dealing with cognitive biases&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;We put too much emphasis on reducing errors and not enough on building expertise.&lt;/li&gt;
  &lt;li&gt;Resilience: Chaos Engineering.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Delighted Customers&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Do not build what the customer ask for.&lt;/li&gt;
  &lt;li&gt;Start by deeply understanding the problem through direct experience.&lt;/li&gt;
  &lt;li&gt;Do not separate design from implementation.
  &lt;ul&gt;
    &lt;li&gt;Design by objectives (Tom Gilb in Principles of Software Engineering Management):
    &lt;ul&gt;
      &lt;li&gt;Give high level measurable goals.&lt;/li&gt;
      &lt;li&gt;Let the team (interacting with the customer) design the solution.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Requirements docs are design.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;When product becomes a commodity, design creates a competitive space.&lt;/li&gt;
  &lt;li&gt;How designers work?
  &lt;ul&gt;
    &lt;li&gt;Spend a lot of time watching people.&lt;/li&gt;
    &lt;li&gt;Not alone, but with the whole team, so there are more perspectives.&lt;/li&gt;
    &lt;li&gt;Multiple sketches to share with the team.&lt;/li&gt;
    &lt;li&gt;Understand psychology.&lt;/li&gt;
    &lt;li&gt;Challenge assumptions.&lt;/li&gt;
    &lt;li&gt;Constant feedback.&lt;/li&gt;
    &lt;li&gt;Welcome failed experiments.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Key design/scientific planning questions:
  &lt;ul&gt;
    &lt;li&gt;What are the possibilities?&lt;/li&gt;
    &lt;li&gt;What has to be true in order for a possibility to succeed?&lt;/li&gt;
    &lt;li&gt;What experiments can we run to see if those things are true?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Design toolbox:
  &lt;ul&gt;
    &lt;li&gt;Establish empathy:
    &lt;ul&gt;
      &lt;li&gt;Journey map.&lt;/li&gt;
      &lt;li&gt;Adoption chain analytics.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Generate possibilities:
    &lt;ul&gt;
      &lt;li&gt;Sample press release.&lt;/li&gt;
      &lt;li&gt;Impact map.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Run experiments:
    &lt;ul&gt;
      &lt;li&gt;Assumption testing.&lt;/li&gt;
      &lt;li&gt;Rapid prototyping.&lt;/li&gt;
      &lt;li&gt;Learning launch.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Genuine Efficiency&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Efficiency == not more features but only right features.&lt;/li&gt;
  &lt;li&gt;Development efficiency is ratio of effort expended to overall product performance.&lt;/li&gt;
  &lt;li&gt;Flow efficiency, not resource efficiency.&lt;/li&gt;
  &lt;li&gt;Expert roles is of a teacher, helping teams figure out the details themselves.&lt;/li&gt;
  &lt;li&gt;Interdisciplinary teams, learning from each other, focusing on customers.&lt;/li&gt;
  &lt;li&gt;Inverse estimation: Each feature has a time constraint determined by its value and market need.&lt;/li&gt;
  &lt;li&gt;Features described as a high-level goal. Team decide details.&lt;/li&gt;
  &lt;li&gt;Start ups: early months, only real progress is learning what creates value for customers.&lt;/li&gt;
  &lt;li&gt;Architects and specialists as glue between teams.&lt;/li&gt;
  &lt;li&gt;High speed goes hand in hand with serious discipline and excellent quality.&lt;/li&gt;
  &lt;li&gt;Deliver fast: most important Lean principle. Other principles are &amp;ldquo;forced&amp;rdquo; by it.&lt;/li&gt;
  &lt;li&gt;Incomplete product != low quality.
  &lt;ul&gt;
    &lt;li&gt;It is a valid concern that customers get a bad impression from an incomplete product.&lt;/li&gt;
    &lt;li&gt;If product main selling point is the experience it delivers, delay launch until the experience is right.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Build-Measure-Learn cycle.&lt;/li&gt;
  &lt;li&gt;A feature was not complete until there was data showing the impact on key business metrics.&lt;/li&gt;
  &lt;li&gt;How Spotify build products: Think it, Built it, Ship it, Tweak it. Page 119.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Breakthrough Innovation&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Disruptive new business have a better change of success if they are formed as separated business units, rather than embedded in existing product lines.&lt;/li&gt;
  &lt;li&gt;Focus on execution gives best solutions to the problems you are trying to solve, but it will not tell you if they are the right problems.&lt;/li&gt;
  &lt;li&gt;Expect front-line people to understand and solve a customer&amp;rsquo;s whole problem.&lt;/li&gt;
  &lt;li&gt;Expect local managers to have the wisdom and give them the freedom to do the right thing.&lt;/li&gt;
  &lt;li&gt;Wrong questions: &amp;ldquo;How will Lean or Agile increase productivity?&amp;rdquo;
  &lt;ul&gt;
    &lt;li&gt;The path to effective SW development is to develop what customers will love—and only those features.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The way to achieve a software objective within time and budget is to develop &lt;strong&gt;less&lt;/strong&gt; features.&lt;/li&gt;
  &lt;li&gt;Path to long term survival:
  &lt;ul&gt;
    &lt;li&gt;Create variations.&lt;/li&gt;
    &lt;li&gt;Select what succeeds.&lt;/li&gt;
    &lt;li&gt;Repeat.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If there are no failures, there is not enough variation/you are not trying hard enough.&lt;/li&gt;
  &lt;li&gt;&lt;a name=&quot;learn-experiment&quot;&gt;&lt;/a&gt;Learn to experiment:
  &lt;ul&gt;
    &lt;li&gt;Place small bets.&lt;/li&gt;
    &lt;li&gt;Tolerate failure, but make sure that is:
    &lt;ul&gt;
      &lt;li&gt;Survivable.&lt;/li&gt;
      &lt;li&gt;Recognizable.&lt;/li&gt;
      &lt;li&gt;Killed quickly.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Scale quickly successes.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Innovative companies are decentralized companies.&lt;/li&gt;
  &lt;li&gt;Innovation requires different metrics/processes than core business.&lt;/li&gt;
  &lt;li&gt;Centralization due to cost savings/pressure, but if this cost pressure is due to market conditions changing, the company should be looking at innovation.&lt;/li&gt;
  &lt;li&gt;Decentralization balance:
  &lt;ul&gt;
    &lt;li&gt;Too much: fragmented product, complex communication.&lt;/li&gt;
    &lt;li&gt;Too little: workers with no sight to costumers, which removes meaning from work.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Innovation checklist:
  &lt;ol&gt;
    &lt;li&gt;Give product devs a clear line of sight to their customers:
    &lt;ul&gt;
      &lt;li&gt;Take care that Product Manager/Owner do not divorce developers from customers.
      &lt;ul&gt;
        &lt;li&gt;It confines creative power of devs to implementation issues.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Interdisciplinary teams:
    &lt;ul&gt;
      &lt;li&gt;Build respect across disciplines. This is a huge task.&lt;/li&gt;
      &lt;li&gt;Check out compensation system. Does it encourage teamwork?&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Disrupt yourself:
    &lt;ul&gt;
      &lt;li&gt;Find simpler, cheaper ways to solve customer problems.&lt;/li&gt;
      &lt;li&gt;Be skeptical of:
      &lt;ul&gt;
        &lt;li&gt;High prices.&lt;/li&gt;
        &lt;li&gt;Barriers to access content.&lt;/li&gt;
        &lt;li&gt;Your approach to allocate resources.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Change what you pay attention to:
    &lt;ul&gt;
      &lt;li&gt;Stop worrying about productivity.&lt;/li&gt;
      &lt;li&gt;Create a process that encourages experiments.&lt;/li&gt;
      &lt;li&gt;Decouple your architecture.&lt;/li&gt;
      &lt;li&gt;Walk in the shoes of your customers.&lt;/li&gt;
      &lt;li&gt;Articulate a high-level purpose.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Develop support systems for innovation:
    &lt;ul&gt;
      &lt;li&gt;Training, time, &amp;hellip;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Live in the future&lt;/li&gt;
  &lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;epilogue&quot;&gt;&lt;/a&gt;Epilogue&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Stop thinking about SW development as a delivery process and start thinking of it as a problem solving process.&lt;/li&gt;
  &lt;li&gt;Adam Smith Division of Labor theory:
  &lt;ul&gt;
    &lt;li&gt;Makes us believe that the most efficient way to get things done is to decompose work into its component parts and assign each component to a specialist.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Authorization service handover talk  
</title>
<link>
https://danlebrero.com/2020/02/19/handover-clojure-authorization-service/
</link>
<guid>
https://danlebrero.com/2020/02/19/handover-clojure-authorization-service/
</guid>
<pubDate>
Wed, 19 Feb 2020 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;This talk goes over the why, when, what and how of a new internal authorization service that we have built at Akvo.&lt;/p&gt;&lt;p&gt;It also contains some bits and pieces that I found interesting about the implementation: event sourcing, bad data, Postgres ltree, SpecMonstah, more bad data, dark launches, testing DSL, DB parallel tests, &amp;hellip; Did I mention bad data already?&lt;/p&gt;&lt;p&gt;As all the code is &lt;a href=&quot;https://github.com/akvo/akvo-authorization&quot;&gt;open sourced&lt;/a&gt;, I though that may find it useful as a real world examples of the above.&lt;/p&gt;&lt;p&gt;For a little bit of context, in the talk we mention:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/akvo/akvo-flow&quot;&gt;&amp;ldquo;Flow&amp;rdquo;&lt;/a&gt;: this is a Java/JS application for survey design and data collection. Runs on &lt;a href=&quot;https://cloud.google.com/appengine&quot;&gt;Google App Engine&lt;/a&gt;, which uses &lt;a href=&quot;https://cloud.google.com/datastore/&quot;&gt;Google Datastore&lt;/a&gt;. The &amp;ldquo;legacy&amp;rdquo; app.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/akvo/akvo-unified-log&quot;&gt;&amp;ldquo;Unilog&amp;rdquo;&lt;/a&gt;: long story short a &lt;a href=&quot;https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying&quot;&gt;log&lt;/a&gt; implementation of top of Postgres. And &amp;ldquo;old&amp;rdquo; Clojure app.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/akvo/akvo-lumen&quot;&gt;&amp;ldquo;Lumen&amp;rdquo;&lt;/a&gt;: this is a Clojure/JS application to analyze and visualize data. Runs on Kubernetes + Postgres. The &amp;ldquo;new&amp;rdquo; kid.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;We are in the process of merging Lumen and Flow together. Maybe one of these years &amp;hellip;.&lt;/p&gt;&lt;p&gt;You can find the slides &lt;a href=&quot;https://docs.google.com/presentation/d/1zPgOhDhaTwY7qv2SxaYovG6NUs2EQOuLhm1swsQrPZM/edit#slide=id.p&quot;&gt;here&lt;/a&gt; and a table of content after the video that allows to jump to any of the bits that you may find interesting.&lt;/p&gt;&lt;p&gt;This is not a conference talk, do not expect it to be as polished. In fact I say &amp;ldquo;cool&amp;rdquo; like two hundred times. &lt;/p&gt;&lt;p&gt;&lt;em&gt;Cool&lt;/em&gt;! Let&amp;rsquo;s get started!&lt;/p&gt;
&lt;style&gt;
div#toc {
    height:200px;
    width:560px;
    overflow-x: hidden;
    overflow-y: scroll;
}
div#toc ul {
    margin-top: 0px;
    margin-bottom: 0px;
}    
&lt;/style&gt;&lt;p&gt;&lt;iframe id=&quot;thevideo&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/N7sTkmBEpnM?enablejsapi=1&amp;rel=0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;div id=&quot;toc&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;0:11&quot; href=&quot;#nowhere&quot;&gt;What?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;0:25&quot; href=&quot;#nowhere&quot;&gt;Authorization business logic&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;3:06&quot; href=&quot;#nowhere&quot;&gt;Why?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;5:29&quot; href=&quot;#nowhere&quot;&gt;Why a new service?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;5:37&quot; href=&quot;#nowhere&quot;&gt;Performance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;6:36&quot; href=&quot;#nowhere&quot;&gt;Why not Keycloak?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;7:56&quot; href=&quot;#nowhere&quot;&gt;Move away from Google Datastore&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;8:35&quot; href=&quot;#nowhere&quot;&gt;How?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;8:38&quot; href=&quot;#nowhere&quot;&gt;Unilog and high level architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;10:21&quot; href=&quot;#nowhere&quot;&gt;Deployment architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;14:23&quot; href=&quot;#nowhere&quot;&gt;PostgreSQL ltree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;15:37&quot; href=&quot;#nowhere&quot;&gt;Implementation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;15:44&quot; href=&quot;#nowhere&quot;&gt;Dealing with out of order messages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;19:30&quot; href=&quot;#nowhere&quot;&gt;Huge database result sets, JDBC reducibles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;20:08&quot; href=&quot;#nowhere&quot;&gt;Duct profiles: multiple process in one for development&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;21:05&quot; href=&quot;#nowhere&quot;&gt;Private Github to store secrets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;22:27&quot; href=&quot;#nowhere&quot;&gt;Metrics dashboards&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;22:50&quot; href=&quot;#nowhere&quot;&gt;Testing&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;22:55&quot; href=&quot;#nowhere&quot;&gt;DSL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;24:27&quot; href=&quot;#nowhere&quot;&gt;SpecMonstah: ease building DB test harness&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;27:53&quot; href=&quot;#nowhere&quot;&gt;eftest: parallel tests&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;28:17&quot; href=&quot;#nowhere&quot;&gt;DB test data isolation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;30:47&quot; href=&quot;#nowhere&quot;&gt;Compare with slow implementation. Event Sourcing FTW!&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;32:49&quot; href=&quot;#nowhere&quot;&gt;When?&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;32:53&quot; href=&quot;#nowhere&quot;&gt;Dark Launch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;33:58&quot; href=&quot;#nowhere&quot;&gt;Bad data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;41:00&quot; href=&quot;#nowhere&quot;&gt;Future&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;41:00&quot; href=&quot;#nowhere&quot;&gt;MVP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;42:27&quot; href=&quot;#nowhere&quot;&gt;Unilog lag&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;43:15&quot; href=&quot;#nowhere&quot;&gt;Q&amp;amp;A&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a data-seek=&quot;45:47&quot; href=&quot;#nowhere&quot;&gt;Data model difference between Flow and Authorization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;48:20&quot; href=&quot;#nowhere&quot;&gt;How ltree helps with tree structure manipulation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;51:32&quot; href=&quot;#nowhere&quot;&gt;How ltree helps with Authorization logic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;55:29&quot; href=&quot;#nowhere&quot;&gt;Google Datastore, orphan data, referential integrity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;56:00&quot; href=&quot;#nowhere&quot;&gt;Initial import to move to Event Sourcing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a data-seek=&quot;60:38&quot; href=&quot;#nowhere&quot;&gt;More about out of order messages&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;p&gt;&lt;br/&gt; &lt;br/&gt;&lt;br/&gt;Let me know if you find it useful, if it is too specific or not specific enough.&lt;/p&gt;
&lt;script&gt;
  var tag = document.createElement('script');
  tag.src = &quot;https://www.youtube.com/iframe_api&quot;;
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('thevideo', {});
  }
  
  window.onload = function() {
    var all = document.querySelectorAll('[data-seek]');
    all.forEach(function(l){
        l.onclick = function() {
            seekPoint = l.dataset.seek.split(':');
            console.log(seekPoint);
            secs = Number(seekPoint[0]) * 60 + Number(seekPoint[1]);
            console.log(secs);
            player.seekTo(secs);
            player.playVideo();
            return false;
        }
    });    
  }
&lt;/script&gt;
</description>
</item>
<item>
<title>
Book notes: The Unicorn Project
</title>
<link>
https://danlebrero.com/2020/02/05/the-unicorn-project-summary/
</link>
<guid>
https://danlebrero.com/2020/02/05/the-unicorn-project-summary/
</guid>
<pubDate>
Wed, 05 Feb 2020 09:15:00 +0100
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/RealGeneKim&quot;&gt;Gene Kim&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://itrevolution.com/the-unicorn-project/&quot;&gt;The Unicorn Project&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;Note that this is not your usual IT book, but a novel about it (or IT). Nonetheless there is a lot of practical advice, as Gene Kim is one of the authors of &lt;a href=&quot;https://itrevolution.com/book/accelerate/&quot;&gt;Accelerate&lt;/a&gt; and &lt;a href=&quot;https://itrevolution.com/book/the-devops-handbook/&quot;&gt;The DevOps Handbook&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;Being a novel makes it a more enjoyable and easy read, one that even your pointy-haired boss could enjoy!&lt;/p&gt;&lt;p&gt;The Unicorn Project is a self-contained book, but related to &lt;a href=&quot;https://itrevolution.com/book/the-phoenix-project/&quot;&gt;The Phoenix Project&lt;/a&gt;, which I would also be happy to recommend.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Tip&lt;/em&gt;: Each chapter has a bunch of very interesting references!&lt;/p&gt;&lt;p&gt;&lt;em&gt;Tip 2&lt;/em&gt;: Gene Kim did three &amp;ldquo;Ask Me Anything&amp;rdquo; on the IT Revolution Book Club. You can watch them &lt;a href=&quot;https://www.youtube.com/watch?v=ReROx9-68V8&quot;&gt;here&lt;/a&gt;, &lt;a href=&quot;https://www.youtube.com/watch?v=wQktlXp_Y3g&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://www.youtube.com/watch?v=vmzFLhapI2o&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;&lt;p&gt;As Gene Kim is also the author of Accelerate, a lot of the key insights from Accelerate can be found in The Unicorn Project. See &lt;a href=&quot;/2020/01/22/accelerate-high-performing-technology-orgs-summary/#content&quot;&gt;my Accelerate notes&lt;/a&gt; for completeness.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Is not small vs big, but fast vs slow.&lt;/li&gt;
  &lt;li&gt;Developer productivity should be the concern of the most senior developers.&lt;/li&gt;
  &lt;li&gt;To speak clearly, you have to think clearly. To think clearly, you have to write clearly.&lt;/li&gt;
  &lt;li&gt;Employee engagement and customer satisfaction are the only things that matter. The rest will take care of itself.&lt;/li&gt;
  &lt;li&gt;Five ideals:
  &lt;ul&gt;
    &lt;li&gt;Locality and simplicity.&lt;/li&gt;
    &lt;li&gt;Focus, Flow and Joy.&lt;/li&gt;
    &lt;li&gt;Improvement of Daily Work:
    &lt;ul&gt;
      &lt;li&gt;Elevate improvement of daily work over daily work itself.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Psychological Safety:
    &lt;ul&gt;
      &lt;li&gt;Safety is a precondition of work.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Customer Focus.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;People are trying to help. It is the process that is helpless. Reminds me of &lt;a href=&quot;/2019/11/27/becoming-a-technical-leader-book-notes/#content&quot;&gt;Gerry Weiberg&amp;rsquo;s Becoming a technical leader&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;When engineers think of &amp;ldquo;the customer&amp;rdquo; in the abstract instead as a real person, you rarely set the right outcomes.&lt;/li&gt;
  &lt;li&gt;CEO keeps reminding of who the customers are and the vision/mission.&lt;/li&gt;
  &lt;li&gt;Architecture is about enabling Focus, Flow, Joy and Fast feedback.&lt;/li&gt;
  &lt;li&gt;Transformational Leader:
  &lt;ul&gt;
    &lt;li&gt;Expects excellence.&lt;/li&gt;
    &lt;li&gt;Pursuit of perfection.&lt;/li&gt;
    &lt;li&gt;Urgency to achieve mission.&lt;/li&gt;
    &lt;li&gt;Dissatisfaction with status quo.&lt;/li&gt;
    &lt;li&gt;Zeal for customers.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Geoffrey Moore&amp;rsquo;s &lt;a href=&quot;#ch-16&quot;&gt;Three Horizons&lt;/a&gt;:
  &lt;ul&gt;
    &lt;li&gt;Horizon 1 - Cash-cows. Needs bureaucracy.&lt;/li&gt;
    &lt;li&gt;Horizon 3 - Future growth ideas. Needs speed.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Geoffrey Moore&amp;rsquo;s &lt;a href=&quot;#ch-17&quot;&gt;Four Zones&lt;/a&gt;:
  &lt;ul&gt;
    &lt;li&gt;Invest in Core, outsource Context.&lt;/li&gt;
    &lt;li&gt;Rack funerals:&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/the-unicorn-project/rack-funerals.jpg&quot; alt=&quot;Rack funerals&quot; title=&quot;Rack funerals&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image from Gene Kim&amp;rsquo;s presentation &lt;a href=&quot;https://youtu.be/M6JGdF9XC7g?t=1846&quot;&gt;The Unicorn Project And The Five Ideals&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#part-one&quot;&gt;Part One: September 3-September 18&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;Chapter 1&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;Chapter 2&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;Chapter 3&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;Chapter 4&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;Chapter 6&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;Chapter 7&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-two&quot;&gt;Part Two: September 23-November 9&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;Chapter 8&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-11&quot;&gt;Chapter 11&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-12&quot;&gt;Chapter 12&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-13&quot;&gt;Chapter 13&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-three&quot;&gt;Part Three: November 10-Present&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-15&quot;&gt;Chapter 15&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-16&quot;&gt;Chapter 16&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-17&quot;&gt;Chapter 17&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-18&quot;&gt;Chapter 18&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-19&quot;&gt;Chapter 19&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#epilogue&quot;&gt;Epilogue&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-one&quot;&gt;&lt;/a&gt;Part One: September 3-September 18&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Mistakes and entropy are a fact of live.&lt;/li&gt;
  &lt;li&gt;Culture of fear (reference to Westrum org):
  &lt;ul&gt;
    &lt;li&gt;Kills innovation.&lt;/li&gt;
    &lt;li&gt;People are careful on how they phrase things.&lt;/li&gt;
    &lt;li&gt;Avoid &amp;ldquo;forbidden words&amp;rdquo;.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The Phoenix Project building is silent. Immediate sign that there is something wrong with the development teams.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Maxine, the hero, keeps a daily work diary:
  &lt;ul&gt;
    &lt;li&gt;What and how long work takes, and lessons learned.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Time tracking systems are useless.&lt;/li&gt;
  &lt;li&gt;When engineers think of “the customer” in the abstract instead as a real person, you rarely set the right outcomes.&lt;/li&gt;
  &lt;li&gt;CEO keeps reminding of who the customers are and the vision/mission.&lt;/li&gt;
  &lt;li&gt;Safety is a precondition of work.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Busy != productive != effective.&lt;/li&gt;
  &lt;li&gt;People are trying to help. It is the process that is helpless. Reminds me of &lt;a href=&quot;/2019/11/27/becoming-a-technical-leader-book-notes/#content&quot;&gt;Gerry Weiberg&amp;rsquo;s Becoming a technical leader&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Small changes == more productive.&lt;/li&gt;
  &lt;li&gt;Program state is the enemy.&lt;/li&gt;
  &lt;li&gt;Change is a fact of live.&lt;/li&gt;
  &lt;li&gt;Changes should be done easily, quickly, safely.&lt;/li&gt;
  &lt;li&gt;Agility is never free.&lt;/li&gt;
  &lt;li&gt;Focus, flow, joy. Fast feedback. Thanks to architecture.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;How can you create anything of value if you don&amp;rsquo;t have feedback on how it is used?&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Too much information makes every thing slow down.&lt;/li&gt;
  &lt;li&gt;Coordination, communication, approvals maybe more expensive than redundancy and duplication.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Dev productivity as a main theme of the book.&lt;/li&gt;
  &lt;li&gt;Complected. Sensei Rick Hickey.&lt;/li&gt;
  &lt;li&gt;Dev productivity should be the concern of the most senior devs.&lt;/li&gt;
  &lt;li&gt;Pay down technical debt as part of daily work.&lt;/li&gt;
  &lt;li&gt;First ideal: Locality and simplicity.&lt;/li&gt;
  &lt;li&gt;Second Ideal: Focus, Flow and Joy.&lt;/li&gt;
  &lt;li&gt;Third Ideal: Improvement of Daily Work:
  &lt;ul&gt;
    &lt;li&gt;Elevate improvement of daily work over daily work itself.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Forth Ideal: Psychological Safety:
  &lt;ul&gt;
    &lt;li&gt;Safe to talk about problems.&lt;/li&gt;
    &lt;li&gt;Solving problems requires prevention, which requires honesty, which requires lack of fear.&lt;/li&gt;
    &lt;li&gt;Ask &amp;ldquo;what caused a problem&amp;rdquo; instead of &amp;ldquo;who&amp;rdquo;.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Fifth Ideal: Customer Focus&lt;/li&gt;
  &lt;li&gt;Technology is too often a caste system ( Arch &amp;gt; Dev &amp;gt; QA &amp;gt; Ops)&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Before: Leader roles was to design and decompose work and verify it was done by armies of interchangeable workers, who were paid to user their hands, not their heads.&lt;/li&gt;
  &lt;li&gt;Now: Leaders should be guiding, enabling and removing obstacles.&lt;/li&gt;
  &lt;li&gt;Toyota Andon cord: people are thanked for raising problems, so they can be solved and daily work improved.&lt;/li&gt;
  &lt;li&gt;Servant Leadership != Transformational Leadership.&lt;/li&gt;
  &lt;li&gt;Transformational Leadership:
  &lt;ul&gt;
    &lt;li&gt;Understand the org vision.&lt;/li&gt;
    &lt;li&gt;Question how work is performed.&lt;/li&gt;
    &lt;li&gt;Inspirational communication.&lt;/li&gt;
    &lt;li&gt;Personal recognition.&lt;/li&gt;
    &lt;li&gt;Supportive leadership.&lt;/li&gt;
    &lt;li&gt;Characteristics:
    &lt;ul&gt;
      &lt;li&gt;Expects excellence.&lt;/li&gt;
      &lt;li&gt;Pursuit of perfection.&lt;/li&gt;
      &lt;li&gt;Urgency to achieve mission.&lt;/li&gt;
      &lt;li&gt;Dissatisfaction with status quo.&lt;/li&gt;
      &lt;li&gt;Zeal for customers.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-11&quot;&gt;&lt;/a&gt;Chapter 11&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You build it, you run it&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-12&quot;&gt;&lt;/a&gt;Chapter 12&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Lead time of ideas: 2 years
  &lt;ul&gt;
    &lt;li&gt;Small features, rolled up to larger ones than then need to be approved and specced&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-13&quot;&gt;&lt;/a&gt;Chapter 13&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Blameless postmortems:
  &lt;ul&gt;
    &lt;li&gt;Rule: you cannot say &amp;ldquo;I should have done&amp;rdquo; or &amp;ldquo;If I have known about that, I would have done Y&amp;rdquo;.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Disconnect between Product Development and front-line users.&lt;/li&gt;
  &lt;li&gt;To speak clearly, you have to think clearly.&lt;/li&gt;
  &lt;li&gt;To think clearly, you have to write clearly.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-15&quot;&gt;&lt;/a&gt;Chapter 15&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Monitoring FTW!&lt;/li&gt;
  &lt;li&gt;Graceful degradation is hard.&lt;/li&gt;
  &lt;li&gt;Synthetic traffic for Load testing is very hard.&lt;/li&gt;
  &lt;li&gt;Customer focus:
  &lt;ul&gt;
    &lt;li&gt;Improve customer&amp;rsquo;s live.&lt;/li&gt;
    &lt;li&gt;Create value for them.&lt;/li&gt;
    &lt;li&gt;Whether they will pay for it
    &lt;ul&gt;
      &lt;li&gt;If not, we shouldn&amp;rsquo;t be building it.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Trust.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-16&quot;&gt;&lt;/a&gt;Chapter 16&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Employee engagement and customer satisfaction are the only things that matter. The rest will take care of itself.&lt;/li&gt;
  &lt;li&gt;Only one in three strategic ideas have a positive outcome. And only a third of those have a big enough impact.&lt;/li&gt;
  &lt;li&gt;Goofrey Moore - &lt;a href=&quot;https://medium.com/@frankdiana/competing-in-the-age-of-disruption-e2187d2ad9d8&quot;&gt;Four Zones&lt;/a&gt; and &lt;a href=&quot;https://www.infoq.com/articles/visual-portfolio-management/&quot;&gt;Three Horizons&lt;/a&gt;:
  &lt;ul&gt;
    &lt;li&gt;Horizon 1 - Company’s cash-cow.&lt;/li&gt;
    &lt;li&gt;Horizon 2 - High growth. Next cash-cows.&lt;/li&gt;
    &lt;li&gt;Horizon 3 - Pool of ideas to explore. Need to find asap:
    &lt;ul&gt;
      &lt;li&gt;Market risks: does the idea solve a real customer need?&lt;/li&gt;
      &lt;li&gt;Technical risk: Is it technically feasible?&lt;/li&gt;
      &lt;li&gt;Business model risk: Is there a financially feasible engine of growth?&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Horizon 1 needs:
  &lt;ul&gt;
    &lt;li&gt;Consistency.&lt;/li&gt;
    &lt;li&gt;Compliance.&lt;/li&gt;
    &lt;li&gt;Bureaucracy.&lt;/li&gt;
    &lt;li&gt;Rules.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Horizon 3 needs:
  &lt;ul&gt;
    &lt;li&gt;Speed.&lt;/li&gt;
    &lt;li&gt;Experimentation.&lt;/li&gt;
    &lt;li&gt;Fast feedback.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-17&quot;&gt;&lt;/a&gt;Chapter 17&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Moore’s &lt;a href=&quot;https://medium.com/@frankdiana/competing-in-the-age-of-disruption-e2187d2ad9d8&quot;&gt;Four Zones&lt;/a&gt;. Core vs Context:
  &lt;ul&gt;
    &lt;li&gt;Core: what the customer is paying for.&lt;/li&gt;
    &lt;li&gt;Context: everything else. What is needed for operate (cafeteria, HR, email, …).&lt;/li&gt;
    &lt;li&gt;Context is a burden.&lt;/li&gt;
    &lt;li&gt;Invest in Core, outsource Context.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-18&quot;&gt;&lt;/a&gt;Chapter 18&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Blameless post-mortem even without an outage: they are the best opportunity to learn.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-19&quot;&gt;&lt;/a&gt;Chapter 19&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Teaching Thursdays is 2 hours.&lt;/li&gt;
  &lt;li&gt;Leaders must model the behaviours that they want.&lt;/li&gt;
  &lt;li&gt;Adults hide the fact they are learning because they don’t want to be seen as incompetents.&lt;/li&gt;
  &lt;li&gt;Event sourcing FTW!&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://youtu.be/M6JGdF9XC7g?t=1846&quot;&gt;&amp;ldquo;Rack funerals&amp;rdquo;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;epilogue&quot;&gt;&lt;/a&gt;Epilogue&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Technology needs to be embedded in the business, not merely &amp;ldquo;aligned with it.&amp;rdquo;&lt;/li&gt;
  &lt;li&gt;Small does not beat big. Fast beats slow. Fast and big win almost every time.&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Expectations for GOTO Oslo conference 
</title>
<link>
https://danlebrero.com/2020/01/29/goto-oslo-conference-expectations/
</link>
<guid>
https://danlebrero.com/2020/01/29/goto-oslo-conference-expectations/
</guid>
<pubDate>
Wed, 29 Jan 2020 10:00:00 +0100
</pubDate>
<description>
&lt;p&gt;I am delighted and honoured to have been invited to talk at &lt;a href=&quot;https://goto-oslo.com/2020/speakers/1298/daniel-lebrero-berna&quot;&gt;GOTO Oslo&lt;/a&gt; this March. &lt;/p&gt;&lt;p&gt;As the conference is on a ship(!!!), I am scared that will end up like:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/vToi98-UmU8?rel=0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;The risks of preaching Clojure to the heathens &lt;i class=&quot;far fa-grin-tongue-squint&quot;&gt;&lt;/i&gt;.&lt;/p&gt;&lt;p&gt;Hope to see you there!&lt;/p&gt;
</description>
</item>
<item>
<title>
Book notes: Accelerate, building and scaling high performing technology organizations
</title>
<link>
https://danlebrero.com/2020/01/22/accelerate-high-performing-technology-orgs-summary/
</link>
<guid>
https://danlebrero.com/2020/01/22/accelerate-high-performing-technology-orgs-summary/
</guid>
<pubDate>
Wed, 22 Jan 2020 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;These are my notes on &lt;a href=&quot;https://twitter.com/nicolefv&quot;&gt;Nicole Forsgren&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/jezhumble&quot;&gt;Jez Humble&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/RealGeneKim&quot;&gt;Gene Kim&lt;/a&gt;&amp;rsquo;s &lt;a href=&quot;https://itrevolution.com/book/accelerate/&quot;&gt;Accelerate, building and scaling high performing technology organizations&lt;/a&gt;. Note that there is an additional chapter on the &lt;a href=&quot;https://itrevolution.com/book/accelerate/&quot;&gt;book website&lt;/a&gt;, under the &amp;ldquo;BONUS MATERIAL&amp;rdquo; section.&lt;/p&gt;&lt;p&gt;The findings of this book are based on the research done using the data from the &lt;a href=&quot;https://cloud.google.com/devops/&quot;&gt;State of DevOps survey&lt;/a&gt; from 2014 to 2017. &lt;/p&gt;&lt;p&gt;It has been a great read, and a lot of the leadership advice is in line with &lt;a href=&quot;/2019/11/27/becoming-a-technical-leader-book-notes/#content&quot;&gt;Gerald Weinberg&amp;rsquo;s &amp;ldquo;Becoming a technical leader&amp;rdquo;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;In fact it has been such a nice read that my life as a CTO is going to start by trying to implement all the practices outlined in it.&lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Quality == Speed&lt;/strong&gt;. Throughput and stability move together.&lt;/li&gt;
  &lt;li&gt;Software delivery performance impacts organization performance, including non commercial.&lt;/li&gt;
  &lt;li&gt;Measure:
  &lt;ul&gt;
    &lt;li&gt;Performance:
    &lt;ul&gt;
      &lt;li&gt;Delivery lead time.&lt;/li&gt;
      &lt;li&gt;Deployment frequency.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Stability:
    &lt;ul&gt;
      &lt;li&gt;Time to restore service.&lt;/li&gt;
      &lt;li&gt;Change fail rate.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Deming: &lt;em&gt;Fear invites wrong figures&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#westrum&quot;&gt;Ron Westrum generative culture&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Good information: Answers what and when needs to be answered, in a way that can be effectively used.&lt;/li&gt;
  &lt;li&gt;Change culture by first changing what people do, not how people think.&lt;/li&gt;
  &lt;li&gt;Technical practices are vital. Not optional, not secondary.&lt;/li&gt;
  &lt;li&gt;Gerald Weinberg: Quality is value to some person.&lt;/li&gt;
  &lt;li&gt;Architecture&amp;rsquo;s most important characteristic: &lt;strong&gt;loosely coupled&lt;/strong&gt;, which means:
  &lt;ul&gt;
    &lt;li&gt;Most testing can be done without an integrated environment.&lt;/li&gt;
    &lt;li&gt;Release independently of other apps it depends on.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Architects should focus on engineers and outcomes, not tools or technology.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruggedsoftware.org&quot;&gt;The Rugged Manifesto&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Transformational Leaders:
  &lt;ul&gt;
    &lt;li&gt;Should change environment, not &amp;ldquo;fix&amp;rdquo; the person.&lt;/li&gt;
    &lt;li&gt;People are an organization&amp;rsquo;s greatest asset.&lt;/li&gt;
    &lt;li&gt;Focus on followers identifying with the organization.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Common causes for transformation program to fail:
  &lt;ul&gt;
    &lt;li&gt;Treat the transformation program as a project with an end date.&lt;/li&gt;
    &lt;li&gt;Implement it top-down, without input from those affected.&lt;/li&gt;
    &lt;li&gt;Not setting measurable business and organizational outcome for the transformation effort.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;The capabilities&lt;/h1&gt;&lt;p&gt;Highly recommend to download the &lt;a href=&quot;https://bit.ly/high-perf-behaviors-practices&quot;&gt;OVERALL RESEARCH PROGRAM AND HIGH PERFORMANCE BEHAVIORS AND PRACTICES&lt;/a&gt; as it contains all the practices and what their impact is, plus the table &amp;ldquo;High-Performance Team, Management, and Leadership Behaviors and Practices&amp;rdquo; by &lt;a href=&quot;https://twitter.com/leanitcoach&quot;&gt;Steve Bell&lt;/a&gt; and Karen Whitley Bell.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Continuous Delivery capabilities:
  &lt;ul&gt;
    &lt;li&gt;Test Automation.&lt;/li&gt;
    &lt;li&gt;Deployment Automation.&lt;/li&gt;
    &lt;li&gt;Trunk-Based Development.&lt;/li&gt;
    &lt;li&gt;Shift Left on Security.&lt;/li&gt;
    &lt;li&gt;Continuous Integration.&lt;/li&gt;
    &lt;li&gt;Continuous Delivery.&lt;/li&gt;
    &lt;li&gt;Version Control.&lt;/li&gt;
    &lt;li&gt;Test Data Management.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Architecture Capabilities:
  &lt;ul&gt;
    &lt;li&gt;Loosely Coupled Architecture.&lt;/li&gt;
    &lt;li&gt;Empowered Teams.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Product and Process capabilities:
  &lt;ul&gt;
    &lt;li&gt;Small Batches.&lt;/li&gt;
    &lt;li&gt;Make Flow of Work Visible.&lt;/li&gt;
    &lt;li&gt;Customer Feedback.&lt;/li&gt;
    &lt;li&gt;Team Experimentation.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Lean Management and Monitoring capabilities:
  &lt;ul&gt;
    &lt;li&gt;Limit Work in Progress.&lt;/li&gt;
    &lt;li&gt;Production Monitoring (to inform business decisions).&lt;/li&gt;
    &lt;li&gt;Visualizing Work.&lt;/li&gt;
    &lt;li&gt;Lightweight Change Approval.&lt;/li&gt;
    &lt;li&gt;Proactive Notifications.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Cultural capabilities:
  &lt;ul&gt;
    &lt;li&gt;Foster generative culture.&lt;/li&gt;
    &lt;li&gt;Encourage learning.&lt;/li&gt;
    &lt;li&gt;Collaboration amongst teams.&lt;/li&gt;
    &lt;li&gt;Job Satisfaction.&lt;/li&gt;
    &lt;li&gt;Support Transformational leadership.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#preface&quot;&gt;Preface&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-one&quot;&gt;Part I: What We Found&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - Accelerate&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Measuring Performance&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - Measuring and Changing Culture&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - Technical practices&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - Architecture&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - Integrating InfoSec into the Delivery Lifecycle&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - Management practices&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - Product Development&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - Making Work Sustainable&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;10 - Employee Satisfaction, Identity and Engagement&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-11&quot;&gt;11 - Leaders and Managers&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-two&quot;&gt;Part II: The Research&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-three&quot;&gt;Part III: Transformation&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-16&quot;&gt;16 - High-Performance Leadership and Management&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#bonus&quot;&gt;Bonus Material - How to transform&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;preface&quot;&gt;&lt;/a&gt;Preface&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;24 capabilities to drive improvement.&lt;/li&gt;
  &lt;li&gt;Research based on 23k Surveys, 2k organizations.&lt;/li&gt;
  &lt;li&gt;Applicable to:
  &lt;ul&gt;
    &lt;li&gt;Orgs of any size (&lt; 5 to &gt; 10k).&lt;/li&gt;
    &lt;li&gt;Greenfield and legacy.&lt;/li&gt;
    &lt;li&gt;Any industry.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Throughput and stability move together.&lt;/li&gt;
  &lt;li&gt;Software development and delivery can be measured in a statistically meaningful way.&lt;/li&gt;
  &lt;li&gt;Organization ability to make software positively impacts profitability and market share.&lt;/li&gt;
  &lt;li&gt;Culture and technical practices matter. And they can be measured.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-one&quot;&gt;&lt;/a&gt;Part I: What We Found&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - Accelerate&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Maturity models are not the appropriate tool to use or mindset to have.&lt;/li&gt;
  &lt;li&gt;Capabilities model of measurement is essential&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Maturity &lt;/th&gt;
      &lt;th&gt;Capability &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;There is a fixed goal. &lt;br/&gt;You &amp;ldquo;arrive&amp;rdquo; &lt;/td&gt;
      &lt;td&gt;You can always improve. &lt;br/&gt;Never done &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lock-step. &lt;br/&gt;All orgs and all teams are treated the same &lt;/td&gt;
      &lt;td&gt;Multidimensional.&lt;br/&gt; Dynamic.&lt;br/&gt; Team and Org context important&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Vanity metrics &lt;/td&gt;
      &lt;td&gt;Outcome based metrics&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Static Levels &lt;/td&gt;
      &lt;td&gt;Dynamic levels&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;Focus on right capabilities.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Measuring Performance&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Measuring performance in SW is hard:
  &lt;ul&gt;
    &lt;li&gt;Inventory is invisible&lt;/li&gt;
    &lt;li&gt;Breakdown of work arbitrary&lt;/li&gt;
    &lt;li&gt;Design and delivery done simultaneously&lt;/li&gt;
    &lt;li&gt;Design will change as we implement&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Flaw on previous attempts:
  &lt;ul&gt;
    &lt;li&gt;Focus on &lt;a href=&quot;https://medium.com/@kentbeck_7670/outcome-over-output-also-impact-and-effort-8f9eb0ce0dbb&quot;&gt;outputs rather than outcomes&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;Focus on individuals/local, rather than team/global.&lt;/li&gt;
    &lt;li&gt;Examples: LoC, velocity, utilization&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Proposed:
  &lt;ul&gt;
    &lt;li&gt;Delivery lead time:
    &lt;ul&gt;
      &lt;li&gt;From code committed to running in production.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Deployment frequency:
    &lt;ul&gt;
      &lt;li&gt;Proxy metric for batch size. More deploys, smaller batch size.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Time to restore service.&lt;/li&gt;
    &lt;li&gt;Change fail rate, changes that cause:
    &lt;ul&gt;
      &lt;li&gt;Outages.&lt;/li&gt;
      &lt;li&gt;Hot fixes.&lt;/li&gt;
      &lt;li&gt;Rollback.&lt;/li&gt;
      &lt;li&gt;Fix-forward.&lt;/li&gt;
      &lt;li&gt;Patches.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Delivery lead time and deployment frequency measure Tempo/Performance/Throughput.&lt;/li&gt;
  &lt;li&gt;MTTR and Change fail rate measure Stability/Reliability.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/06/05/testing-or-monitoring-mtbf-mttr-make-your-choice/#content&quot;&gt;MTTR better than MTBF&lt;/a&gt; to measure reliability as &lt;a href=&quot;/2017/08/03/stability-patterns-a-case-study-devoxx-pl-2017-video/#content&quot;&gt;&amp;ldquo;Failure is inevitable&amp;rdquo;&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;No trade off between improving performance and achieving stability/quality.&lt;/li&gt;
  &lt;li&gt;SW delivery performance impacts organization performance, including non commercial.&lt;/li&gt;
  &lt;li&gt;Learning culture must exist before starting measuring.&lt;/li&gt;
  &lt;li&gt;Deming: &lt;em&gt;Fear invites wrong figures&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - Measuring and Changing Culture&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Organization culture, three levels of culture:
  &lt;ul&gt;
    &lt;li&gt;Basic assumptions: Invisible, things that we just &amp;ldquo;know&amp;rdquo;.&lt;/li&gt;
    &lt;li&gt;Values: more &amp;ldquo;visible&amp;rdquo;.&lt;/li&gt;
    &lt;li&gt;Artifacts:
    &lt;ul&gt;
      &lt;li&gt;Mission statements.&lt;/li&gt;
      &lt;li&gt;Technology.&lt;/li&gt;
      &lt;li&gt;Formal procedures.&lt;/li&gt;
      &lt;li&gt;Heroes.&lt;/li&gt;
      &lt;li&gt;Rituals.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Focus on second level.&lt;/li&gt;
  &lt;li&gt;&lt;a name=&quot;westrum&quot;&gt;&lt;/a&gt;Ron Westrum, three types:&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Pathological &lt;/th&gt;
      &lt;th&gt;Bureaucratic&lt;/th&gt;
      &lt;th&gt;Generative&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Power oriented &lt;/td&gt;
      &lt;td&gt;Rule oriented &lt;/td&gt;
      &lt;td&gt;Performance oriented&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Low cooperation &lt;/td&gt;
      &lt;td&gt;Modest cooperation &lt;/td&gt;
      &lt;td&gt;High cooperation&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Messengers &amp;ldquo;shot&amp;rdquo;&lt;/td&gt;
      &lt;td&gt;Messengers neglected&lt;/td&gt;
      &lt;td&gt;Messengers trained&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Responsibilities shirked&lt;/td&gt;
      &lt;td&gt;Narrow responsibilities &lt;/td&gt;
      &lt;td&gt;Risks are shared&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Bridging discouraged&lt;/td&gt;
      &lt;td&gt;Bridging tolerated&lt;/td&gt;
      &lt;td&gt;Bridging encouraged&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Failure leads to scapegoating &lt;/td&gt;
      &lt;td&gt;Failure leads to justice&lt;/td&gt;
      &lt;td&gt;Failure leads to inquiry&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Novelty crushed &lt;/td&gt;
      &lt;td&gt;Novelty leads to problems&lt;/td&gt;
      &lt;td&gt;Novelty implemented&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
  &lt;li&gt;Good information flow is critical:
  &lt;ul&gt;
    &lt;li&gt;Answers what and when needs to be answered, in a way that can be effectively used.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Org culture predicts performance outcomes.&lt;/li&gt;
  &lt;li&gt;Bureaucracy is not bad. Ensures fairness.&lt;/li&gt;
  &lt;li&gt;Good culture:
  &lt;ul&gt;
    &lt;li&gt;Trust and cooperation.&lt;/li&gt;
    &lt;li&gt;Higher quality decision making.&lt;/li&gt;
    &lt;li&gt;Easy to reverse bad decisions.&lt;/li&gt;
    &lt;li&gt;Higher job satisfaction.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Change culture by first changing what people do, not try to first change how people think (John Shook).&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - Technical practices&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Technical practices are vital. Not optional, not secondary.&lt;/li&gt;
  &lt;li&gt;Key principles of Continuous Delivery (CD):
  &lt;ul&gt;
    &lt;li&gt;Build quality in.&lt;/li&gt;
    &lt;li&gt;Small batches.&lt;/li&gt;
    &lt;li&gt;People solve problems, computers do repetitive tasks.&lt;/li&gt;
    &lt;li&gt;Continuous improvement.&lt;/li&gt;
    &lt;li&gt;Everyone is responsible.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Foundations of Continuous Delivery:
  &lt;ul&gt;
    &lt;li&gt;Comprehensive configuration management: everything in VCS.&lt;/li&gt;
    &lt;li&gt;Continuous Integration.&lt;/li&gt;
    &lt;li&gt;Continuous testing.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Jerry Weinberg: Quality is value to some person.&lt;/li&gt;
  &lt;li&gt;CD brings higher quality:
  &lt;ul&gt;
    &lt;li&gt;Less rework or unplanned work.&lt;/li&gt;
    &lt;li&gt;Less bugs&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Practices:
  &lt;ul&gt;
    &lt;li&gt;Version control: including system and app config.&lt;/li&gt;
    &lt;li&gt;Test Automation:
    &lt;ul&gt;
      &lt;li&gt;Reliable tests.&lt;/li&gt;
      &lt;li&gt;Writen by devs.&lt;/li&gt;
      &lt;li&gt;TDD is important, but not mandatory.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Test Data management.&lt;/li&gt;
    &lt;li&gt;Trunk-Based development:
    &lt;ul&gt;
      &lt;li&gt;No branches older than one day.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Shift left on Security.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - Architecture&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Most important characteristic: &lt;strong&gt;loosely coupled&lt;/strong&gt;, which means:
  &lt;ul&gt;
    &lt;li&gt;Most testing can be done without an integrated environment.&lt;/li&gt;
    &lt;li&gt;Release independently of other apps it depends on.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Lower performers more likely to be integrating with custom SW developed by another company (or outsourced) or working on mainframe systems.&lt;/li&gt;
  &lt;li&gt;Biggest contributor to CD:
  &lt;ul&gt;
    &lt;li&gt;Be able to do work without needing to talk with anybody outside the team. Aka, proper cross-functional teams.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Read Steve Yegge&amp;rsquo;s &lt;a href=&quot;https://gist.github.com/kislayverma/d48b84db1ac5d737715e8319bd4dd368&quot;&gt;&amp;ldquo;Platform rant&amp;rdquo;&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Additionally, loosely coupled architectures enable engineering organizations scaling.&lt;/li&gt;
  &lt;li&gt;Teams that can chose their own tools are more performant, but standardize around architecture and configuration of infrastructure.&lt;/li&gt;
  &lt;li&gt;Architects should focus on engineers and outcomes, not tools or technology.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Integrating InfoSec into the Delivery Lifecycle&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Typical InfoSec ratio: 1 per 10 infra per 100 devs.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project&quot;&gt;OWASP Top 10&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Building security into SW improves delivery performance and security quality.&lt;/li&gt;
  &lt;li&gt;Shift left on security:
  &lt;ul&gt;
    &lt;li&gt;Security experts involved earlier and through the whole dev/ops process.&lt;/li&gt;
    &lt;li&gt;Security provides tools/libraries/processes that are secure.&lt;/li&gt;
    &lt;li&gt;Security provides devs the means to build security in.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruggedsoftware.org&quot;&gt;The Rugged Manifesto&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Management practices&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Derived from the Lean movement&lt;/li&gt;
  &lt;li&gt;Practices:
  &lt;ul&gt;
    &lt;li&gt;Limit WIP - not enough on its own.&lt;/li&gt;
    &lt;li&gt;Visual management: Key quality and productivity metrics.&lt;/li&gt;
    &lt;li&gt;Feedback from production: to make business decisions.&lt;/li&gt;
    &lt;li&gt;Intrateam code reviews (which includes pair programming) are the best way of change approval.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Product Development&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Eric Ries - The Lean Startup: Lightweight approach to explore new business models and product ideas.&lt;/li&gt;
  &lt;li&gt;Lead Product Development:
  &lt;ul&gt;
    &lt;li&gt;Small batches:
    &lt;ul&gt;
      &lt;li&gt;Less than a week.&lt;/li&gt;
      &lt;li&gt;MVP.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Make Flow of work visible:
    &lt;ul&gt;
      &lt;li&gt;From Business to customers.&lt;/li&gt;
      &lt;li&gt;Status of products and features.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Customer feedback:
    &lt;ul&gt;
      &lt;li&gt;Satisfaction metrics.&lt;/li&gt;
      &lt;li&gt;Actively seeking the feedback.&lt;/li&gt;
      &lt;li&gt;Implementing the feedback.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Team experimentation:
    &lt;ul&gt;
      &lt;li&gt;Without external approval.&lt;/li&gt;
      &lt;li&gt;Team can change requirements as they learn.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Making Work Sustainable&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Where code deployments are more painful, you will find the poorest organization performance.&lt;/li&gt;
  &lt;li&gt;To reduce deployment pain, use same technical practices as to improve delivery speed and stability.&lt;/li&gt;
  &lt;li&gt;Reduce burnout:
  &lt;ul&gt;
    &lt;li&gt;Environment emphasizes learning over blaming.&lt;/li&gt;
    &lt;li&gt;Strong sense of purpose.&lt;/li&gt;
    &lt;li&gt;Invest on employment development: time, space, resources.&lt;/li&gt;
    &lt;li&gt;Remove obstacles.&lt;/li&gt;
    &lt;li&gt;Authority to make decisions that they are affected by.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Burnout risks:
  &lt;ul&gt;
    &lt;li&gt;Overwork.&lt;/li&gt;
    &lt;li&gt;Lack of control.&lt;/li&gt;
    &lt;li&gt;Insufficient rewards.&lt;/li&gt;
    &lt;li&gt;Breakdown of community.&lt;/li&gt;
    &lt;li&gt;Absence of fairness.&lt;/li&gt;
    &lt;li&gt;Value conflicts.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Leaders should change environment, not &amp;ldquo;fix&amp;rdquo; the person.&lt;/li&gt;
  &lt;li&gt;Official vs Real organization values.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Chapter 10 - Employee Satisfaction, Identity and Engagement&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Better employee Net Promoter Score (eNPS) == better business outcomes.&lt;/li&gt;
  &lt;li&gt;eNPS:
  &lt;ul&gt;
    &lt;li&gt;&amp;ldquo;How likely is it that you would recommend our org/team to a friend or colleague?&amp;rdquo;&lt;/li&gt;
    &lt;li&gt;9-10 -&amp;gt; Promoter.&lt;/li&gt;
    &lt;li&gt;7-8 -&amp;gt; Passive.&lt;/li&gt;
    &lt;li&gt;0-6 -&amp;gt; Detractors.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;People are an organization&amp;rsquo;s greatest asset.&lt;/li&gt;
  &lt;li&gt;Diversity in gender/minorities achieve better outcomes.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-11&quot;&gt;&lt;/a&gt;Chapter 11 - Leaders and Managers&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Leadership: inspiring and motivating those around you&lt;/li&gt;
  &lt;li&gt;Essential for:
  &lt;ul&gt;
    &lt;li&gt;Establishing high-trust cultural norms.&lt;/li&gt;
    &lt;li&gt;Support dev productivity.&lt;/li&gt;
    &lt;li&gt;Support team experimentation and innovation.&lt;/li&gt;
    &lt;li&gt;Work across org silos to achieve strategic aligment.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Transformational Leaders:
  &lt;ul&gt;
    &lt;li&gt;Vision: where the org is going and where it should be in 5 years.&lt;/li&gt;
    &lt;li&gt;Inspirational communication.&lt;/li&gt;
    &lt;li&gt;Intellectual stimulation.&lt;/li&gt;
    &lt;li&gt;Supportive leadership: cares about followers&amp;rsquo; personal feelings and needs.&lt;/li&gt;
    &lt;li&gt;Personal recognition.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Transformational Leadership:
  &lt;ul&gt;
    &lt;li&gt;Appeal to followers&amp;rsquo; values and sense of purpose.&lt;/li&gt;
    &lt;li&gt;Focus on followers identifying with the organization.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Culture of Learning:
  &lt;ul&gt;
    &lt;li&gt;Create a training budget and advocate to use it.&lt;/li&gt;
    &lt;li&gt;Google 20% time.&lt;/li&gt;
    &lt;li&gt;Safe to fail.&lt;/li&gt;
    &lt;li&gt;Weekly lightning talks.&lt;/li&gt;
    &lt;li&gt;Brown bag sessions.&lt;/li&gt;
    &lt;li&gt;Demo days.&lt;/li&gt;
    &lt;li&gt;Mini-conferences.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-two&quot;&gt;&lt;/a&gt;Part II: The Research&lt;/h1&gt;&lt;p&gt;Skipped this part.&lt;/p&gt;&lt;h1&gt;&lt;a name=&quot;part-three&quot;&gt;&lt;/a&gt;Part III: Transformation&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-16&quot;&gt;&lt;/a&gt;Chapter 16 - High-Performance Leadership and Management&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Spotify Model.&lt;/li&gt;
  &lt;li&gt;External coaches to challenge assumptions.&lt;/li&gt;
  &lt;li&gt;Squad stand-up -&amp;gt; Tribe stand-up -&amp;gt; Senior Leadership stand-up.&lt;/li&gt;
  &lt;li&gt;Technical problems shared with Chapter, business problems with Tribe.&lt;/li&gt;
  &lt;li&gt;&amp;ldquo;Help me better understand the problems you&amp;rsquo;re encountering&amp;rdquo;, instead of &amp;ldquo;Why isn&amp;rsquo;t this getting done?&amp;rdquo;&lt;/li&gt;
  &lt;li&gt;Teams own their job. They can decide not to release.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;bonus&quot;&gt;&lt;/a&gt;Bonus Material - How to Transform&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Common causes for transformation to fail:
  &lt;ul&gt;
    &lt;li&gt;Treat the transformation program as a project with an end date.&lt;/li&gt;
    &lt;li&gt;Implement it top-down, without feedback from those affected.&lt;/li&gt;
    &lt;li&gt;Not setting measurable business and organizational outcome for the transformation effort.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Executing Continuous Improvement:
  &lt;ul&gt;
    &lt;li&gt;From the &lt;a href=&quot;https://www.amazon.com/Lean-Enterprise-Performance-Organizations-Innovate/dp/1449368425&quot;&gt;Lean Enterprise book&lt;/a&gt;.&lt;/li&gt;
    &lt;li&gt;Four steps:
    &lt;ul&gt;
      &lt;li&gt;Three Planning steps:
      &lt;ul&gt;
        &lt;li&gt;Understand the direction or challenge.
        &lt;ul&gt;
          &lt;li&gt;Inspirational goal that seems impossible.&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
        &lt;li&gt;Gasp current condition.&lt;/li&gt;
        &lt;li&gt;Establish next target condition.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;One Execute:
      &lt;ul&gt;
        &lt;li&gt;&lt;strong&gt;Iterate&lt;/strong&gt; towards target condition:
        &lt;ul&gt;
          &lt;li&gt;Scientific approach: Plan, Do, Check, Act.&lt;/li&gt;
          &lt;li&gt;Improvement Kata 5 daily questions:
          &lt;ol&gt;
            &lt;li&gt;What is the target condition?&lt;/li&gt;
            &lt;li&gt;What is the actual condition now?&lt;/li&gt;
            &lt;li&gt;What obstacles do you think are preventing you from reaching the target condition? Which one are you addressing now?&lt;/li&gt;
            &lt;li&gt;What is your next step? What do you expect?&lt;/li&gt;
            &lt;li&gt;When can we go and see what we have learnt from taking that step?&lt;/li&gt;
          &lt;/ol&gt;&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Principles of Effective Org Change Management:
  &lt;ol&gt;
    &lt;li&gt;You are never done with improvement work.&lt;/li&gt;
    &lt;li&gt;Leaders and team agree on measurable outcome. Teams discover how to achieve it.&lt;/li&gt;
    &lt;li&gt;Achieve Large-Scale Change Iteratively and Incrementally.&lt;/li&gt;
  &lt;/ol&gt;
  &lt;ul&gt;
    &lt;li&gt;What works in an org does not need to work in others.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Software development and LEGO blocks
</title>
<link>
https://danlebrero.com/2020/01/15/software-dev-and-lego-blocks/
</link>
<guid>
https://danlebrero.com/2020/01/15/software-dev-and-lego-blocks/
</guid>
<pubDate>
Wed, 15 Jan 2020 08:00:00 +0100
</pubDate>
<description>
&lt;p&gt;As I hear for the nth time the &amp;ldquo;Composable as LEGO blocks&amp;rdquo; analogy in some software related talk, I cannot stop thinking about my childhood&amp;rsquo;s experience with LEGO, which to be honest has not improved over the years:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/lego/sw-as-lego-blocks.jpg&quot; alt=&quot;Software as LEGO blocks&quot; title=&quot;Software and LEGO blocks&quot; /&gt;&lt;/p&gt;&lt;p&gt;Once you try to assembly you very own toy, you end up with at best a pitiful monstrosity that barely looks as what you imagined &amp;hellip; unless you have an infinite amount of pieces and a hell of a lot of time on your hands.&lt;/p&gt;&lt;p&gt;It happens that this is not a lot different from my experience building software, so maybe the LEGO analogy actually works:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You never have the right tools, frameworks and/or people.&lt;/p&gt;&lt;p&gt;You never have enough time.&lt;/p&gt;&lt;p&gt;And you always end up with a monstrosity&lt;/p&gt;&lt;p&gt;that barely resembles what, in your imagination, &lt;/p&gt;&lt;p&gt;that beautiful design and architecture looked like.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;I have to confess that I have always been a Playmobil kid (or a Click-fan for those Spaniards old enough!).&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/lego/playmobil.jpg&quot; alt=&quot;Software and Playmobil&quot; title=&quot;Software and Playmobil&quot; /&gt;&lt;/p&gt;&lt;p&gt;Not being able to bend the elbow still sucks but, who cares? Playmobil FTW!&lt;/p&gt;
</description>
</item>
<item>
<title>
Should I introduce an API Gateway in my workplace?
</title>
<link>
https://danlebrero.com/2020/01/08/do-i-need-a-gateway-api-team-dynamics/
</link>
<guid>
https://danlebrero.com/2020/01/08/do-i-need-a-gateway-api-team-dynamics/
</guid>
<pubDate>
Wed, 08 Jan 2020 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;A while long ago, a friend asked for some advice regarding introducing an API gateway (API GW) into his company. &lt;/p&gt;&lt;p&gt;As I was a little bit surprised about my own answer, I want to share it here.&lt;/p&gt;&lt;h2&gt;Context&lt;/h2&gt;&lt;p&gt;Paraphrasing the question:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I am working in a company that has three different development teams. Each team is building their own services, which are exposed directly to our customers. There are lots of inconsistencies between the APIs exposed by the three services, which our customers have to deal with. Would you recommend us to introduce an API gateway?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;As we both have worked together, we had a shared understanding about what we meant by an API gateway. Given the broad and generic term that it has become, the main functionalities of our API gateway were:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;One place to have all the common functionality required when exposing APIs externally: authentication, authorization, rate limiting, A/B testing and other routing requirements. Also it can take care of some caching, downstream service error handling and i18n.&lt;/li&gt;
  &lt;li&gt;Make the heterogeneous internal services look homogeneous to external clients: naming conventions, concepts, url structure, versioning, timestamps, pagination, …&lt;/li&gt;
  &lt;li&gt;Provide a more coarse-grained API.&lt;/li&gt;
  &lt;li&gt;Keep backwards compatibility on external facing APIs, while internal services can evolve.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;And from an architecture point of view, the change would be from this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/before-gw-api.jpg&quot; alt=&quot;Before API GW&quot; title=&quot;Before API GW&quot; /&gt;&lt;/p&gt;&lt;p&gt;To this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/after-gw-api.jpg&quot; alt=&quot;After API GW&quot; title=&quot;After API GW&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Pure technical answer&lt;/h2&gt;&lt;p&gt;Nobody would argue that having a homogeneous, coherent API that shields clients from possible internal API changes is very valuable. &lt;/p&gt;&lt;p&gt;Our clients will love it.&lt;/p&gt;&lt;p&gt;Our developer will love it.&lt;/p&gt;&lt;p&gt;But you need to think about the cost. &lt;/p&gt;&lt;h2&gt;What the cost is&lt;/h2&gt;&lt;p&gt;When we talk about cost, we usually put too much emphasis on the initial investment. &lt;/p&gt;&lt;p&gt;As I told my friend:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I think the initial cost of building the API GW is not huge. You can build it over a weekend, or a team of four can do it over a couple of months.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Jokes aside, that last sentence has a kernel of truth, which gives us a clue about the kind of cost we should be more wary of.&lt;/p&gt;&lt;p&gt;Keeping with the conversation:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The issue that I see is the maintenance: who is going to own the API gateway? &lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Because the most important thing on the architecture change is the change on team dynamics, from:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/team-before-gw-api.jpg&quot; alt=&quot;Before API GW team structure&quot; title=&quot;Before API GW Team structure&quot; /&gt;&lt;/p&gt;&lt;p&gt;To:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/team-after-gw-api.jpg&quot; alt=&quot;After API GW team structure&quot; title=&quot;After API GW Team structure&quot; /&gt;&lt;/p&gt;&lt;p&gt;With this new team setup, you have to start thinking about how the different teams will interact between each other: &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;How internal service changes will need to be implemented and rolled out?&lt;/li&gt;
  &lt;li&gt;What information needs to be shared between the API team and the other teams?&lt;/li&gt;
  &lt;li&gt;What meetings will be required?&lt;/li&gt;
  &lt;li&gt;Who will decide on priorities?&lt;/li&gt;
  &lt;li&gt;Where will some of the functionality will be implemented: API GW or internal services?&lt;/li&gt;
  &lt;li&gt;Who can veto an API change?&lt;/li&gt;
  &lt;li&gt;Who can veto an internal service change?&lt;/li&gt;
  &lt;li&gt;How will support be handled?&lt;/li&gt;
  &lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This is not to say that the new architecture is worse, but that all these questions should be taken into consideration when deciding if an API Gateway should be introduced or not.&lt;/p&gt;&lt;p&gt;Of course, this new team setup is just one of the possible ones. There are plenty of others (none of which is wrong) that will give different answers to the questions above, like: &lt;/p&gt;&lt;h4&gt;Shared responsibility, no accountability&lt;/h4&gt;&lt;p&gt;Where all teams own the API gateway, but nobody takes accountability.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/everybody-responsible-gw-api.jpg&quot; alt=&quot;Everybody responsible for API GW team structure&quot; title=&quot;Everybody is responsible&quot; /&gt;&lt;/p&gt;&lt;h4&gt;The API Council&lt;/h4&gt;&lt;p&gt;Where all teams agree to meet monthly to agree on API rules, and that is the only agreement that is ever reached.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/gw-api-council.jpg&quot; alt=&quot;The API gateway council&quot; title=&quot;The API gateway council&quot; /&gt;&lt;/p&gt;&lt;h4&gt;The Architects Overlords&lt;/h4&gt;&lt;p&gt;Where all powerful beings dictate the API rules for mortals to implement.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/architects-ivory-tower.jpg&quot; alt=&quot;Architects overloads on their ivory tower&quot; title=&quot;Architects overloads on their ivory tower&quot; /&gt;&lt;/p&gt;&lt;h4&gt;The Ignored Embedded Architects&lt;/h4&gt;&lt;p&gt;Where architects work along side the development teams, and meet monthly to whine about how their wise advise is completely ignored.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/embedded-architect.jpg&quot; alt=&quot;Embedded Architects ignored by the team&quot; title=&quot;Embedded Architects ignored by the team&quot; /&gt;&lt;/p&gt;&lt;h4&gt;The All Powerful API Framework&lt;/h4&gt;&lt;p&gt;Where the Platforms team provides a mandatory API framework so that teams can run their own API-rules-compliant gateways, and where all teams do their best to avoid, circumvent and replace with battle tested Open Source alternatives. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/do-i-need-an-api-gw/shared-platform-framework.jpg&quot; alt=&quot;Shared Platform API framework&quot; title=&quot;Shared platform API framework&quot; /&gt;&lt;/p&gt;&lt;h2&gt;A Team oriented answer&lt;/h2&gt;&lt;p&gt;So to answer the question &lt;em&gt;&amp;ldquo;Should I introduce an API Gateway in my workplace?&amp;rdquo;&lt;/em&gt; the main concern, and what you should focus on, is not the technical aspect of it.&lt;/p&gt;&lt;p&gt;The important question to answer is:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;What are the team dynamics that you want for you company, given its current context?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Conway&amp;rsquo;s law at its best.&lt;/p&gt;
</description>
</item>
<item>
<title>
Apache Http Client and Asynchronous HTTP client timeouts explained in pictures
</title>
<link>
https://danlebrero.com/2019/12/11/apache-http-client-timeouts-config-production-asynchronous-http-client-pictures/
</link>
<guid>
https://danlebrero.com/2019/12/11/apache-http-client-timeouts-config-production-asynchronous-http-client-pictures/
</guid>
<pubDate>
Wed, 11 Dec 2019 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;I recently had to introduce a colleague to the wonderful and exciting world of timeouts in &lt;a href=&quot;http://hc.apache.org&quot;&gt;Apache HttpClient&lt;/a&gt;. As the usual explanation that &amp;ldquo;the connection timeout is the maximum time to establish a connection to the server&amp;rdquo; is not the most descriptive one, let&amp;rsquo;s try to explain with a couple of pictures what each timeout actually means.&lt;/p&gt;&lt;p&gt;Even if we will be talking about Apache&amp;rsquo;s HttpClient, the following explanation is useful for any TCP based communication, which includes most of the JDBC drivers.&lt;/p&gt;&lt;p&gt;As a reference, here are all the timeouts that you &lt;strong&gt;must&lt;/strong&gt; configure if you want a healthy production service:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Connection Timeout&lt;/li&gt;
  &lt;li&gt;Read Timeout&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;If you are using microservices, you will also need to configure a connection pool and the following timeouts:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Connection Pool Timeout&lt;/li&gt;
  &lt;li&gt;Connection Pool Time To Live (TTL)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;You will find &lt;a href=&quot;https://www.baeldung.com/httpclient-timeout&quot;&gt;here&lt;/a&gt; how to configure these timeout outs in Java. In our examples we will use &lt;a href=&quot;https://github.com/dakrone/clj-http&quot;&gt;clj-http&lt;/a&gt; which is a simple wrapper over Apache’s HttpClient. We will also compare how timeouts work in &lt;a href=&quot;https://github.com/AsyncHttpClient/async-http-client&quot;&gt;Asynchronous HTTP Client&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;All the code, including a docker compose environment to test the settings can be found at &lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts&quot;&gt;https://github.com/dlebrero/apache-httpclient-timeouts&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Connection timeout&lt;/h2&gt;&lt;p&gt;Before your http client can start interchanging information with the server, a communication path (or road or pipe) between the two must be established.&lt;/p&gt;&lt;p&gt;This is done with a handshake:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/hello-hi.jpg&quot; alt=&quot;phone handshake&quot; title=&quot;Handshake, hello, hi!&quot; /&gt;&lt;/p&gt;&lt;p&gt;After this interchange you and your partner can start a conversation, that is, exchange data.&lt;/p&gt;&lt;p&gt;In TCP terms, this is called the 3 way handshake:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/tcp-handshake.jpg&quot; alt=&quot;TCP handshake&quot; title=&quot;TCP Handshake&quot; /&gt;&lt;/p&gt;&lt;p&gt;The connection timeout controls how long are you willing for this handshake to take.&lt;/p&gt;&lt;p&gt;Let&amp;rsquo;s test it using a non-routable IP address:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;;; Without connection timeout
(time
    (try
      (client/get &amp;quot;http://10.255.255.1:22220/&amp;quot;)
      (catch Exception e)))
&amp;quot;Elapsed time: 75194.7148 msecs&amp;quot;

;; With connection timeout
(time
    (try
      (client/get &amp;quot;http://10.255.255.1:22220/&amp;quot;
        {:connection-timeout 2000})
      (catch Exception e
        (log/info (.getClass e) &amp;quot;:&amp;quot; (.getMessage e)))))
&amp;quot;Elapsed time: 2021.1883 msecs&amp;quot;
INFO  a.http-client - java.net.SocketTimeoutException : connect timed out
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Notice the different elapsed time, the exception printed and the message within the exception.&lt;/p&gt;&lt;h2&gt;Read timeout&lt;/h2&gt;&lt;p&gt;Once the connection is established, and you are happily talking with the server, you can specify how long you are willing to wait to hear back from the server, using the read timeout:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/read-timeout.jpg&quot; alt=&quot;Apache Http Client read timeout&quot; title=&quot;Apache Http Client Read timeout&quot; /&gt;&lt;/p&gt;&lt;p&gt;Let’s test it, using this time around an Nginx server, with a &lt;a href=&quot;https://github.com/Shopify/toxiproxy&quot;&gt;Toxiproxy&lt;/a&gt; in the middle to mess around with the response times:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;&lt;br/&gt;;; With no socket timeout
(time
  (try
    (client/get &amp;quot;http://local.toxiproxy:22220/&amp;quot;)
    (catch Exception e (.printStackTrace e))))
&amp;quot;Elapsed time: 240146.6273 msecs&amp;quot;

;; Same url, with socket timeout
(time
    (try
      (client/get &amp;quot;http://local.toxiproxy:22220/&amp;quot;
        {:socket-timeout 2000})
      (catch Exception e
        (log/info (.getClass e) &amp;quot;:&amp;quot; (.getMessage e)))))
&amp;quot;Elapsed time: 2017.7835 msecs&amp;quot;
INFO  a.http-client - java.net.SocketTimeoutException : Read timed out
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note that the default socket timeout is system dependant. Notice the different elapsed time, the exception printed and the message within the exception.&lt;/p&gt;&lt;p&gt;The ToxiProxy configuration can be found &lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts/blob/master/src/apache_httpclient_timeouts/http_client.clj#L39&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Pub quiz&lt;/h2&gt;&lt;p&gt;With these two timeouts, you should easily score one point for your team on your next IT Pub Quiz Championship:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If you configure your HTTP client with a 10 seconds connection timeout and a 1 second read timeout, how long is a thread going to get stuck after issuing an HTTP request, in the worst case scenario?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;You guess it right! Infinite! One point for your team!&lt;/p&gt;&lt;p&gt;Whoot? You did not answer infinite? It is soooo obvious (sarcasm).&lt;/p&gt;&lt;p&gt;Let’s again call one of your friends and ask him about Pi, but this time we are going to call one of those high precision smartass friends:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/read-timeout-forever.jpg&quot; alt=&quot;Apache http client read timeout retry&quot; title=&quot;Apache http client read timeout retry&quot; /&gt;&lt;/p&gt;&lt;p&gt;What is going on? &lt;/p&gt;&lt;p&gt;If you read carefully the previous explanation about the read timeout or even better, the &lt;a href=&quot;http://hc.apache.org/httpcomponents-client-4.5.x/httpclient/apidocs/org/apache/http/client/config/RequestConfig.html#getSocketTimeout()&quot;&gt;javadoc about it&lt;/a&gt; you will notice that the read timeout is reset each time we hear from the server, so if the response is too big, the connection is too slow, the server is choking, or anything between the client and the server is having trouble, your client thread will be there hanging for a very long time.&lt;/p&gt;&lt;p&gt;Let’s see it in action. First we configure Toxiproxy to be very very slow while proxying the Nginx response (~ 2 bytes per second):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(client/post &amp;quot;http://local.toxiproxy:8474/proxies/proxied.nginx/toxics&amp;quot;
    {:form-params {:attributes {:delay 1000000
                                :size_variation 1
                                :average_size 2}
                   :toxicity 1.0
                   :stream &amp;quot;downstream&amp;quot;
                   :type &amp;quot;slicer&amp;quot;}
     :content-type :json})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And now we make exactly the same request as before, with a &lt;strong&gt;two seconds&lt;/strong&gt; timeout:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(time
    (try
      (client/get &amp;quot;http://local.toxiproxy:22220/&amp;quot;
        {:socket-timeout 2000})
      (catch Exception e
        (log/info (.getClass e) &amp;quot;:&amp;quot; (.getMessage e)))))
&amp;quot;Elapsed time: 310611.8366 msecs&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That is more than five minutes! And thankfully it is just 600 bytes. &lt;/p&gt;&lt;p&gt;Here is how the HttpClient logs look like, for just reading the first bytes of the header:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/slowww.gif&quot; alt=&quot;Apache http client slow logs&quot; title=&quot;Apache http client slow logs&quot; /&gt;&lt;/p&gt;&lt;p&gt;That looks pretty slow. Of course, this will never ever happen to you (more sarcasm here).&lt;/p&gt;&lt;p&gt;We will see at the bottom how to avoid this issue.&lt;/p&gt;&lt;h1&gt;Connection Pool&lt;/h1&gt;&lt;p&gt;Before talking about what the connection pool timeout is, let&amp;rsquo;s see what is the point about having a connection pool with an example.&lt;/p&gt;&lt;p&gt;Let’s say that there are two Stock Market traders with a special interest in Mordor Stocks (Symbol: M$). Both are watching the same news channel, but one is using a connection pool (the one on the right) while the other is not:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/connection-pool.jpg&quot; alt=&quot;Why use a http client connection pool&quot; title=&quot;Why use a http client connection pool&quot; /&gt;&lt;/p&gt;&lt;p&gt;As you can see, the trader with the connection pool leaves the phone off the hook and the broker waiting for more orders. &lt;/p&gt;&lt;p&gt;When, quite unexpectedly, a one metre humanoid manages to travel &lt;a href=&quot;http://lotrproject.com/timedistance/&quot;&gt;2900 km&lt;/a&gt; across several war zones and inhospitable areas, and deliver the only existing nuke to the only existing weak spot of Sauron, the trader can very quickly sell all of his Mordor Stocks, while the trader without the connection pool is doomed.&lt;/p&gt;&lt;p&gt;So if you are going to call the same server a lot, which is typical for microservices architectures, you will want to avoid the overhead of creating new connections to the server, as it can be quite an expensive operation (from a few millis to hundreds of millis).&lt;/p&gt;&lt;p&gt;This is especially true if you are using HTTPS. See &lt;a href=&quot;https://hpbn.co/transport-layer-security-tls/#tls-handshake&quot;&gt;the TLS handshake&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Connection pool timeout and TTL&lt;/h2&gt;&lt;p&gt;As much as connection pools are awesome, as with any other resource, you need to limit the maximum number of open connections that you want to maintain, which means that there are three possible scenarios when fetching a connection from the pool.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Side note: for a very good talk about how to size your connection pool see &lt;a href=&quot;https://www.youtube.com/watch?v=m64SWl9bfvk&quot;&gt;&amp;ldquo;Stop Rate Limiting! Capacity Management Done Right&amp;rdquo;&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/jon_moore&quot;&gt;Jon Moore&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;&lt;h3&gt;Scenario 1. Free connections.&lt;/h3&gt;&lt;p&gt;Assuming a max connection pool of three, the first scenario is:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/connection-pool-new-connection.jpg&quot; alt=&quot;HTTP Connection pool new connection&quot; title=&quot;HTTP Connection pool new connection&quot; /&gt;&lt;/p&gt;&lt;p&gt;So there is some phone available but on the hook. You will need to suffer the extra connection setup delay.&lt;/p&gt;&lt;h3&gt;Scenario 2. Connection pooled.&lt;/h3&gt;&lt;p&gt;The second scenario:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/connection-pool-connection-available.jpg&quot; alt=&quot;HTTP Connection pool connection available&quot; title=&quot;HTTP Connection pool connection available&quot; /&gt;&lt;/p&gt;&lt;p&gt;There is a phone off the hook, ready to be used. In this scenario, there are another two cases:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;The connection is fresh, created less than the configured TTL. You will NOT need to suffer the extra connection setup delay.&lt;/li&gt;
  &lt;li&gt;The connection is stale, created more than the configured TTL. You will need to suffer the extra connection setup delay.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Let&amp;rsquo;s test it:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;;; Create a new connection pool, with a TTL of one second:
(def cp (conn-manager/make-reusable-conn-manager
        {:timeout 1 ; in seconds. This is called TimeToLive in PoolingHttpClientConnectionManager
         }))
;; Make ten calls, two per second:
(dotimes [_ 10]
  (log/info &amp;quot;Send Http request&amp;quot;)
  (client/get &amp;quot;http://local.nginx/&amp;quot; {:connection-manager cp})
  (Thread/sleep 500))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Looking at the logs:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;16:56:24.905 INFO  - Send Http request
16:56:24.914 DEBUG - Connection established 172.24.0.4:51984&amp;lt;-&amp;gt;172.24.0.2:80
16:56:25.416 INFO  - Send Http request
16:56:25.926 INFO  - Send Http request
16:56:25.933 DEBUG - Connection established 172.24.0.4:51986&amp;lt;-&amp;gt;172.24.0.2:80
16:56:26.434 INFO  - Send Http request
16:56:26.942 INFO  - Send Http request
16:56:26.950 DEBUG - Connection established 172.24.0.4:51988&amp;lt;-&amp;gt;172.24.0.2:80
16:56:27.452 INFO  - Send Http request
16:56:27.960 INFO  - Send Http request
16:56:27.967 DEBUG - Connection established 172.24.0.4:51990&amp;lt;-&amp;gt;172.24.0.2:80
16:56:28.468 INFO  - Send Http request
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As expected, we can make two requests before recreating the connection.&lt;/p&gt;&lt;p&gt;Same scenario but with a 20 seconds TTL:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;16:59:19.562 INFO  - Send Http request
16:59:19.570 DEBUG - Connection established 172.24.0.4:51998&amp;lt;-&amp;gt;172.24.0.2:80
16:59:20.073 INFO  - Send Http request
16:59:20.580 INFO  - Send Http request
16:59:21.086 INFO  - Send Http request
16:59:21.593 INFO  - Send Http request
16:59:22.100 INFO  - Send Http request
16:59:22.607 INFO  - Send Http request
16:59:23.114 INFO  - Send Http request
16:59:23.623 INFO  - Send Http request
16:59:24.134 INFO  - Send Http request
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So the same connection is used for all requests.&lt;/p&gt;&lt;p&gt;But why do we need the TTL? Mostly because firewalls have this tendency on dropping long live connections (especially idle ones) without telling any of the involved parts, which causes the client to take a while to realize that the connection is no longer usable. &lt;/p&gt;&lt;h3&gt;Scenario 3. All connections in use.&lt;/h3&gt;&lt;p&gt;The last scenario:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/connection-pool-full.jpg&quot; alt=&quot;HTTP Connection pool full&quot; title=&quot;HTTP Connection pool full&quot; /&gt;&lt;/p&gt;&lt;p&gt;All the phones are busy, so you will have to wait. How much you are willing to wait for a phone to become free is the connection pool timeout.&lt;/p&gt;&lt;p&gt;Note if a phone becomes available before the connection pool timeout, you are back to the second scenario. With some unlucky timing, you will also need to establish a new fresh connection.&lt;/p&gt;&lt;p&gt;Let&amp;rsquo;s look at an example. First we make the Nginx very slow, taking up to &lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts/blob/master/src/apache_httpclient_timeouts/http_client.clj#L114&quot;&gt;20 seconds to respond&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Then we create a connection pool with a maximum of three connections and we send four HTTP requests:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;  (def cp-3 (conn-manager/make-reusable-conn-manager
              {:timeout 100
               :threads 3           ;; Max connections in the pool.
               :default-per-route 3 ;; Max connections per route (~ max connection to a server)
               }))

  (dotimes [_ 4]
    (future
      (time
        (client/get &amp;quot;http://local.toxiproxy:22220/&amp;quot; {:connection-manager cp-3}))))

&amp;quot;Elapsed time: 20017.1325 msecs&amp;quot;
&amp;quot;Elapsed time: 20016.9246 msecs&amp;quot;
&amp;quot;Elapsed time: 20020.9474 msecs&amp;quot;
&amp;quot;Elapsed time: 40024.5604 msecs&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As you can see, the last request takes 40 seconds, 20 of which are spent waiting for a connection to be available.&lt;/p&gt;&lt;p&gt;Adding a one second connection pool timeout:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(dotimes [_ 4]
  (future
    (time
      (try
        (client/get &amp;quot;http://local.toxiproxy:22220/&amp;quot;
          {:connection-manager cp-3
           :connection-request-timeout 1000 ;; Connection pool timeout in millis
           })
        (catch Exception e
          (log/info (.getClass e) &amp;quot;:&amp;quot; (.getMessage e)))))))

&amp;quot;Elapsed time: 1012.2696 msecs&amp;quot;
&amp;quot;2019-12-08 08:59:04.073 INFO  - org.apache.http.conn.ConnectionPoolTimeoutException : Timeout waiting for connection from pool&amp;quot;
&amp;quot;Elapsed time: 20014.1366 msecs&amp;quot;
&amp;quot;Elapsed time: 20015.3828 msecs&amp;quot;
&amp;quot;Elapsed time: 20015.962 msecs&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The thread that is not able to get a connection from the pool gives up after one second, throwing a ConnectionPoolTimeoutException.&lt;/p&gt;&lt;h1&gt;Are we done yet?&lt;/h1&gt;&lt;p&gt;Unfortunately, even if connection timeout, read timeout, connection pool timeout and connection pool TTL are the most common things to tweak, you should also be aware of: &lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DNS resolution: it cannot be &lt;a href=&quot;https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6450279&quot;&gt;explicitly configure&lt;/a&gt; it in Java, system dependant. Good to also know how it is &lt;a href=&quot;https://cr.openjdk.java.net/~iris/se/11/latestSpec/api/java.base/java/net/doc-files/net-properties.html&quot;&gt;cached&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Hosts with multiple IPs: In case of a connection timeout, HTTP client will try to &lt;a href=&quot;https://www.baeldung.com/httpclient-timeout#timeout-and-dns-round-robin---something-to-be-aware-of&quot;&gt;each of them&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/13088864&quot;&gt;TIME_WAIT and SO_LINGER&lt;/a&gt;: closing a connection is not immediate and under very high load it can cause issues.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;All together!&lt;/h1&gt;&lt;p&gt;Putting all the timeouts together, we have:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/summary-all-http-timeouts.jpg&quot; alt=&quot;All Apache HTTP client timeouts&quot; title=&quot;All Apache HTTP client timeouts&quot; /&gt;&lt;/p&gt;&lt;p&gt;With all these timeouts, it is quite a challenge to know how long a HTTP request is actually going to take, so if you have any SLA or are worried about the stability of your application, you cannot solely rely on setting the timeouts correctly. &lt;/p&gt;&lt;p&gt;If you want to setup just some simple timeout for the whole request, you should be using &lt;a href=&quot;https://github.com/Netflix/Hystrix/wiki/How-it-Works#Isolation&quot;&gt;Hystrix Thread Isolation&lt;/a&gt;, Apache HTTP Client&amp;rsquo;s &lt;a href=&quot;https://hc.apache.org/httpcomponents-client-4.5.x/tutorial/html/advanced.html&quot;&gt;FutureRequestExecutionService&lt;/a&gt; (never used this one myself) or maybe use a different HTTP client. &lt;/p&gt;&lt;h1&gt;Asynchronous HTTP Client&lt;/h1&gt;&lt;p&gt;A possible solution to all these timeouts juggling is to use &lt;a href=&quot;https://github.com/AsyncHttpClient/async-http-client&quot;&gt;Asynchronous HTTP Client&lt;/a&gt;, which is based on Netty. You can see &lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts/blob/master/src/apache_httpclient_timeouts/async_http_client.clj&quot;&gt;here&lt;/a&gt; all the above scenarios but using the Asynchronous HTTP Client.&lt;/p&gt;&lt;p&gt;Some notable differences between both HTTP clients:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Asynchronous HTTP clients have their own thread pool to handle the response once it arrives.&lt;/li&gt;
  &lt;li&gt;No connection pool timeout: if the pool is completely used, an exception is thrown. There is no waiting for a connection to be available. Interestedly, I usually configure my Apache HTTP connection pools to behave the same, as a full connection pool usually means that something is not going working and it is better to bail out early.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts/blob/master/src/apache_httpclient_timeouts/async_http_client.clj#L122&quot;&gt;Connection pool idle timeout&lt;/a&gt;: as we mentioned before, we wanted a connection pool TTL mostly because idle connections. Asynchronous HTTP Client comes with an explicit idle timeout, on top of a TTL timeout.&lt;/li&gt;
  &lt;li&gt;A new request timeout: a timeout to bound the amount of time it takes to do the DNS lookup, the connection and read the whole response. One single timeout that states how long you are willing to wait for the whole HTTP conversation to be done. Sweet.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;So the timeouts for the Asynchronous HTTP client look like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/http-client-timeout-configuration/asynchronous-http-client.jpg&quot; alt=&quot;Asynchronous HTTP client timeouts&quot; title=&quot;Asynchronous HTTP client timeouts&quot; /&gt;&lt;/p&gt;&lt;p&gt;You can see again all the same scenarios but using this new request timeout &lt;a href=&quot;https://github.com/dlebrero/apache-httpclient-timeouts/blob/master/src/apache_httpclient_timeouts/async_http_client.clj#L177&quot;&gt;here&lt;/a&gt;, including the Pub Quiz one.&lt;/p&gt;&lt;p&gt;Reasoning about the worst case is a lot easier.&lt;/p&gt;&lt;h1&gt;Summary&lt;/h1&gt;&lt;p&gt;In summary, timeouts are annoyingly difficult to configure, if you want to have some control over the maximum time allocated for an HTTP request/response. Unless, you are using an Asynchronous HTTP Client (or probably other async clients). &lt;/p&gt;&lt;p&gt;Am I suggesting that you should not use Apache HTTP Client?&lt;/p&gt;&lt;p&gt;Well, it depends what functionality you are using. Apache HTTP Client is a very mature project with plenty of build-in functionality and hooks to customize it. It even has an &lt;a href=&quot;https://hc.apache.org/httpcomponents-asyncclient-4.1.x/index.html&quot;&gt;async module&lt;/a&gt; and the newer 5.0 (beta) version comes with &lt;a href=&quot;https://hc.apache.org/httpcomponents-client-5.0.x/examples-async.html&quot;&gt;build-in async functionality&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;In our case, after this long explanation to my colleague, given our use cases, moving to Asynchronous HTTP Client was my suggestion.&lt;/p&gt;
</description>
</item>
<item>
<title>
Book notes: Becoming a Technical Leader
</title>
<link>
https://danlebrero.com/2019/11/27/becoming-a-technical-leader-book-notes/
</link>
<guid>
https://danlebrero.com/2019/11/27/becoming-a-technical-leader-book-notes/
</guid>
<pubDate>
Wed, 27 Nov 2019 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;These are my notes on Gerald Weinberg&amp;rsquo;s &lt;a href=&quot;https://www.goodreads.com/book/show/714344.Becoming_a_Technical_Leader&quot;&gt;Becoming a technical leader&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;This is the first book that I read about leadership, so even if I found it insightful, I do not have any other reference to compare against. &lt;/p&gt;&lt;h1&gt;Key Insights&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Leadership is a skill and as with any skill it can be learn.&lt;/li&gt;
  &lt;li&gt;Leadership is not an instinct.&lt;/li&gt;
  &lt;li&gt;Leadership is the process of creating an environment in which people become empowered.&lt;/li&gt;
  &lt;li&gt;Organic leadership leads to the process, not the people.&lt;/li&gt;
  &lt;li&gt;An environment must have &lt;em&gt;MOI&lt;/em&gt;:
  &lt;ul&gt;
    &lt;li&gt;Motivation - why.&lt;/li&gt;
    &lt;li&gt;Organisation - to move ideas to practice.&lt;/li&gt;
    &lt;li&gt;Ideas or Innovation - seeds, vision.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Motivational leadership is just one type of leadership.&lt;/li&gt;
  &lt;li&gt;Technical leaders emphasise innovation. A problem-solving leadership style consist on:
  &lt;ul&gt;
    &lt;li&gt;Understanding the problem.&lt;/li&gt;
    &lt;li&gt;Manage flow of ideas.&lt;/li&gt;
    &lt;li&gt;Maintain quality.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;All problem-solving leadership leaders have faith that there is always a better way.&lt;/li&gt;
  &lt;li&gt;Manager != Leader. Manager is an appointed leader.&lt;/li&gt;
  &lt;li&gt;Best working groups, leadership comes from everybody.&lt;/li&gt;
  &lt;li&gt;The paradox of the appointed leader:
  &lt;ul&gt;
    &lt;li&gt;We think the appointed leader is the essential part of an organisation, so&lt;/li&gt;
    &lt;li&gt;When there is trouble, everybody turns to the appointed leader, so&lt;/li&gt;
    &lt;li&gt;This increases the load on her, so she either:
    &lt;ul&gt;
      &lt;li&gt;Breaks, or&lt;/li&gt;
      &lt;li&gt;If she does not break, she has been the most active during the crisis, so&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;The paradox if reinforced, as she is seen as the essential part during the crisis.&lt;/li&gt;
    &lt;li&gt;This is why appointed leaders are replaced when a team does not perform. This is a fallacy. Systems are not linear.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Will I lose my technical skills if I become a leader?
  &lt;ul&gt;
    &lt;li&gt;Yes.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;Obstacles for innovation&lt;/a&gt;:
  &lt;ul&gt;
    &lt;li&gt;No-problem syndrome.&lt;/li&gt;
    &lt;li&gt;Self-blindness.&lt;/li&gt;
    &lt;li&gt;Single solution belief.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Becoming a leader means shifting the focus from your ideas to ideas of others.&lt;/li&gt;
  &lt;li&gt;People without vision cannot influence others.&lt;/li&gt;
  &lt;li&gt;Find a vision: child-like, but not childish.&lt;/li&gt;
  &lt;li&gt;Clear communication, tell:
  &lt;ul&gt;
    &lt;li&gt;What you perceive.&lt;/li&gt;
    &lt;li&gt;How you feel about what you perceive.&lt;/li&gt;
    &lt;li&gt;How you feel about the feeling.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;If you are a leader, the people are your work. There is no other work worth doing.&lt;/li&gt;
  &lt;li&gt;Offer to help only if you would want to be helped in the same situation and do it in the way you would want to be helped.&lt;/li&gt;
  &lt;li&gt;You cannot care for others if you don’t care for yourself.&lt;/li&gt;
  &lt;li&gt;Everybody wants to feel useful.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#mature-patterns&quot;&gt;Mature patterns of behaviour&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-17&quot;&gt;Consensus in organizations&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ch-18&quot;&gt;Obstacles for organizing&lt;/a&gt;:
  &lt;ul&gt;
    &lt;li&gt;Not using people&amp;rsquo;s judgement.&lt;/li&gt;
    &lt;li&gt;The more precise your orders, the more frustration when they are not understood, and the less creativity for the one ordered.&lt;/li&gt;
    &lt;li&gt;Doing the work yourself
    &lt;ul&gt;
      &lt;li&gt;A leaders job is not to solve a single problem, but to create an environment in which many problems will be solved, not just for today, but for the future.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Everybody is doing their best, under the current circumstances. Hence if you think they there are not, it is because you don&amp;rsquo;t understand the circumstances.&lt;/li&gt;
  &lt;li&gt;The person at the top makes the rules, which is another way of saying it breaks the old rules.&lt;/li&gt;
  &lt;li&gt;If you don&amp;rsquo;t fail, you are not testing yourself thoroughly.&lt;/li&gt;
  &lt;li&gt;Take responsibility for your own education.&lt;/li&gt;
  &lt;li&gt;Make the most of your organisation&amp;rsquo;s learning opportunities.&lt;/li&gt;
  &lt;li&gt;Make time: Don’t redo work you have assigned to others. Allow if you must make them mistakes.&lt;/li&gt;
  &lt;li&gt;Seeking support is a sign of strength, not weakness.&lt;/li&gt;
  &lt;li&gt;Do not obsess to become a manager or leader. Ask yourself:
  &lt;ul&gt;
    &lt;li&gt;Why do I want to do this?&lt;/li&gt;
    &lt;li&gt;What assets do I have to contribute?&lt;/li&gt;
    &lt;li&gt;What liabilities do I bring?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;TOC&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#part-one&quot;&gt;Part one: Definition&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-1&quot;&gt;1 - What is Leadership, Anyway?&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-2&quot;&gt;2 - Models of Leadership Style&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-3&quot;&gt;3 - A Problem-Solving Style&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-4&quot;&gt;4 - How Leaders Develop&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-5&quot;&gt;5 - But I can&amp;rsquo;t because …&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-2&quot;&gt;Part 2: Innovation&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-6&quot;&gt;6 - Obstacles to Innovation&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-7&quot;&gt;7 - Improve self-awareness&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-8&quot;&gt;8 - Developing Idea Power&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-9&quot;&gt;9 - Vision&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-3&quot;&gt;Part 3 - Motivation&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-10&quot;&gt;10 - First Great Obstacle to Motivation - clear communication&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-11&quot;&gt;11 - Second great obstacle to motivation - Putting task over people&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-12&quot;&gt;12 - The Problem of Helping Others&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-13&quot;&gt;13 - Learning to Be a Motivator&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-14&quot;&gt;14 - Where Power Come From&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-15&quot;&gt;15 - Power, Imperfection and Congruence&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-4&quot;&gt;Part 4 - Organization&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-16&quot;&gt;16 - Gaining organisation power&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-17&quot;&gt;17 - Effective organisation of problem-solving teams&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-18&quot;&gt;18 - Obstacles to Effective Organising&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-19&quot;&gt;19 - Learning to Be an Organiser&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#part-5&quot;&gt;Part 5 - Transformation&lt;/a&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-20&quot;&gt;20 - How You Will Be Graded as a Leader&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-21&quot;&gt;21 - Passing Your Own Leadership Tests&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-22&quot;&gt;22 - A Personal Plan for Change&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-23&quot;&gt;23 - Finding Time to Change&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#ch-24&quot;&gt;24 - Finding Support for Change&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#epilogue&quot;&gt;Epilogue&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-one&quot;&gt;&lt;/a&gt;Part one: Definition&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-1&quot;&gt;&lt;/a&gt;Chapter 1 - What is Leadership, Anyway?&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Leadership is a skill and as with any skill it can be learn.&lt;/li&gt;
  &lt;li&gt;Leadership is not an instinct.&lt;/li&gt;
  &lt;li&gt;You maybe a reluctant leader, because leading is conceived as &amp;ldquo;telling people what to do&amp;rdquo;, which feels wrong.&lt;/li&gt;
  &lt;li&gt;You are a leader if people comes to ask for advice, and you like that.&lt;/li&gt;
  &lt;li&gt;Who is the leader of a team? You cannot ask the team or the observers of a team.&lt;/li&gt;
  &lt;li&gt;Leadership means influence.&lt;/li&gt;
  &lt;li&gt;Many model of leadership:
  &lt;ul&gt;
    &lt;li&gt;Linear:
    &lt;ul&gt;
      &lt;li&gt;one effect, one cause.&lt;/li&gt;
      &lt;li&gt;Example: thread/reward.&lt;/li&gt;
      &lt;li&gt;You feel stupid if it doesn&amp;rsquo;t work.&lt;/li&gt;
      &lt;li&gt;Person:
      &lt;ul&gt;
        &lt;li&gt;Place individual into categories.&lt;/li&gt;
        &lt;li&gt;“Growth” == how well you fit into a category.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Relationship:
      &lt;ul&gt;
        &lt;li&gt;Good for large scale.&lt;/li&gt;
        &lt;li&gt;Your position == your authority.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;Change:
      &lt;ul&gt;
        &lt;li&gt;Expect change to be orderly, one thing at a time.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Organic:
    &lt;ul&gt;
      &lt;li&gt;close to system thinking.&lt;/li&gt;
      &lt;li&gt;One effect, hundreds of causes, including the passage of time.&lt;/li&gt;
      &lt;li&gt;Good for complex situations.&lt;/li&gt;
      &lt;li&gt;Bad if we become paralysed until we fully understand the problem.&lt;/li&gt;
      &lt;li&gt;Person:
      &lt;ul&gt;
        &lt;li&gt;Are unique.&lt;/li&gt;
        &lt;li&gt;Find common ground.&lt;/li&gt;
        &lt;li&gt;Help find inner harmony.&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Relationship:
    &lt;ul&gt;
      &lt;li&gt;Everybody is equal.&lt;/li&gt;
      &lt;li&gt;Everybody benefits of problem solving.&lt;/li&gt;
      &lt;li&gt;Joy of discovery.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Change:
    &lt;ul&gt;
      &lt;li&gt;Expect change to be messy, ambiguity.&lt;/li&gt;
      &lt;li&gt;Change is an opportunity to grow.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Definition of Leadership:
  &lt;ul&gt;
    &lt;li&gt;Is the process of creating an environment in which people become empowered.&lt;/li&gt;
    &lt;li&gt;Organic leadership leads to the process, not the people.&lt;/li&gt;
    &lt;li&gt;Organic model is important for innovation.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-2&quot;&gt;&lt;/a&gt;Chapter 2 - Models of Leadership Style&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;For change to happen, an environment must have &lt;em&gt;MOI&lt;/em&gt;:
  &lt;ul&gt;
    &lt;li&gt;Motivation - why.&lt;/li&gt;
    &lt;li&gt;Organisation - to move ideas to practice.&lt;/li&gt;
    &lt;li&gt;Ideas or Innovation - seeds, vision.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Leadership style is how much of the above you use.&lt;/li&gt;
  &lt;li&gt;Examples:
  &lt;ul&gt;
    &lt;li&gt;Pure &amp;ldquo;M&amp;rdquo;: Politician able to sell any idea.&lt;/li&gt;
    &lt;li&gt;Pure &amp;ldquo;O&amp;rdquo;: Supper efficient office manager, for last year problems.&lt;/li&gt;
    &lt;li&gt;Pure &amp;ldquo;I&amp;rdquo;: Genius that cannot work with others neither can organise the work for his ideas.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Technical leaders emphasise innovation. A problem-solving leadership style consist on:
  &lt;ul&gt;
    &lt;li&gt;Understanding the problem.&lt;/li&gt;
    &lt;li&gt;Manage flow of ideas.&lt;/li&gt;
    &lt;li&gt;Maintain quality.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;The above is accomplished with MOI strategies.&lt;/li&gt;
  &lt;li&gt;To improve leadership, we ADD strategies, do not remove.&lt;/li&gt;
  &lt;li&gt;All problem-solving leadership leaders have faith that there is always a better way.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-3&quot;&gt;&lt;/a&gt;Chapter 3 - A Problem-Solving Style&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Understand the problem:
  &lt;ul&gt;
    &lt;li&gt;Read the spec.&lt;/li&gt;
    &lt;li&gt;Encourage others to read the spec.&lt;/li&gt;
    &lt;li&gt;Resolve arguments by referring back to the original spec.&lt;/li&gt;
    &lt;li&gt;Seek clarification from customer.&lt;/li&gt;
    &lt;li&gt;Refer back to the spec after some work has been done.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Manage flow of ideas:
  &lt;ul&gt;
    &lt;li&gt;Contribute with a clever idea.&lt;/li&gt;
    &lt;li&gt;Encourage copying of useful idea.&lt;/li&gt;
    &lt;li&gt;Elaborate on an idea that a teammate contributed.&lt;/li&gt;
    &lt;li&gt;Drop one&amp;rsquo;s idea in favour of an idea the team want to develop.&lt;/li&gt;
    &lt;li&gt;Refuse to let an idea drop until everybody understands it.&lt;/li&gt;
    &lt;li&gt;Resist time pressure and take time to listen when other people explain their ideas.&lt;/li&gt;
    &lt;li&gt;Test ideas contributed by other people (outside teams or company).&lt;/li&gt;
    &lt;li&gt;Withhold quick criticism of teammates ideas, in order to keep ideas flowing.&lt;/li&gt;
    &lt;li&gt;Criticise an idea, not the person behind the idea.&lt;/li&gt;
    &lt;li&gt;Test your own ideas before offering them.&lt;/li&gt;
    &lt;li&gt;When time and labor are running short, stop working in new ideas and just pitch in.&lt;/li&gt;
    &lt;li&gt;Encourage the team to drop ideas that succeeded earlier, but cannot be extended to the new situation.&lt;/li&gt;
    &lt;li&gt;Revive a dropped idea later, when it has value for other part of the problem or different context.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Control quality:
  &lt;ul&gt;
    &lt;li&gt;Measure quality as the project proceeds.&lt;/li&gt;
    &lt;li&gt;Design tools and processes to measure quality as you build a solution.&lt;/li&gt;
    &lt;li&gt;Measure the speed of implementation. Compare it to the schedule and be prepared to change the solution procedure.&lt;/li&gt;
    &lt;li&gt;Step back from the project to refresh your perspective and assess its viability.&lt;/li&gt;
    &lt;li&gt;Check ideas with the customer before implementing them.&lt;/li&gt;
    &lt;li&gt;Restore morale when an idea collapses.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-4&quot;&gt;&lt;/a&gt;Chapter 4 - How Leaders Develop&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Practice makes perfect.&lt;/li&gt;
  &lt;li&gt;Learning is like:&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/becoming-technical-leader/learning-curve.jpg&quot; alt=&quot;Learning curve&quot; title=&quot;Learning curve&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Huge jumps in productivity.&lt;/li&gt;
  &lt;li&gt;Ravine before breakthrough.&lt;/li&gt;
  &lt;li&gt;Plateau with little improvement.&lt;/li&gt;
  &lt;li&gt;How do you know there is something after the ravine?&lt;/li&gt;
  &lt;li&gt;Metacycle: learning to learn.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-5&quot;&gt;&lt;/a&gt;Chapter 5 - But I can&amp;rsquo;t because …&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;I am not a manager
  &lt;ul&gt;
    &lt;li&gt;Manager != Leader.&lt;/li&gt;
    &lt;li&gt;Manager is an appointed leader.&lt;/li&gt;
    &lt;li&gt;We tend to forget things that do not work, things that do not fit our models.&lt;/li&gt;
    &lt;li&gt;Best working groups, leadership comes from everybody.&lt;/li&gt;
    &lt;li&gt;The paradox of the appointed leader:
    &lt;ul&gt;
      &lt;li&gt;We think the appointed leader is the essential part of an organisation, so&lt;/li&gt;
      &lt;li&gt;When there is trouble, everybody turns to the appointed leader, so&lt;/li&gt;
      &lt;li&gt;This increases the load on her, so she either:
      &lt;ul&gt;
        &lt;li&gt;Breaks, or&lt;/li&gt;
        &lt;li&gt;If she does not break, she has been the most active during the crisis, so&lt;/li&gt;
      &lt;/ul&gt;&lt;/li&gt;
      &lt;li&gt;The paradox if reinforced, as she is seen as the essential part during the crisis.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;This is why appointed leaders are replaced when a team does not perform. This is a fallacy. Systems are not linear.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;I am not the leader type
  &lt;ul&gt;
    &lt;li&gt;Motivational leadership is just one type of leadership.&lt;/li&gt;
    &lt;li&gt;Problem-solving leadership is more appropriate for me.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;I will lose my technical skills
  &lt;ul&gt;
    &lt;li&gt;Yes you will.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;I am in danger of growing
  &lt;ul&gt;
    &lt;li&gt;Yes.&lt;/li&gt;
    &lt;li&gt;But you can chose when.&lt;/li&gt;
    &lt;li&gt;Again, manager != leader != boss.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;I don’t want that much power
  &lt;ul&gt;
    &lt;li&gt;What BS is the author talking about?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-2&quot;&gt;&lt;/a&gt;Part 2: Innovation&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-6&quot;&gt;&lt;/a&gt;Chapter 6 - Obstacles to Innovation&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Self-blindness:
  &lt;ul&gt;
    &lt;li&gt;The only way we can see ourselves is through other people, so&lt;/li&gt;
    &lt;li&gt;Find somebody to watch over you and give you honest feedback. Keep it mutual.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;No-problem syndrome:
  &lt;ul&gt;
    &lt;li&gt;What:
    &lt;ul&gt;
      &lt;li&gt;Finding a solution before understanding the problem.&lt;/li&gt;
      &lt;li&gt;You know the answer to all problems.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Test to find out:
    &lt;ul&gt;
      &lt;li&gt;Ask the problem solver to repeat back the problem to be solved.&lt;/li&gt;
      &lt;li&gt;If she replies with a solution, then she has the problem solver syndrome.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Single solution belief:
  &lt;ul&gt;
    &lt;li&gt;Just one solution.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-7&quot;&gt;&lt;/a&gt;Chapter 7 - Improve self-awareness&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Test if you want to change: start writing a personal journey for the next 3 months.&lt;/li&gt;
  &lt;li&gt;When? Whenever fits you.&lt;/li&gt;
  &lt;li&gt;What? About yourself.
  &lt;ul&gt;
    &lt;li&gt;Maybe follow: facts, feelings, findings.&lt;/li&gt;
    &lt;li&gt;Maybe: work ideas and fixed bugs.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-8&quot;&gt;&lt;/a&gt;Chapter 8 - Developing Idea Power&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You must believe that any real problem has one more solution, which nobody has found yet.&lt;/li&gt;
  &lt;li&gt;New ideas:
  &lt;ul&gt;
    &lt;li&gt;Every mistake is a new idea.&lt;/li&gt;
    &lt;li&gt;Steal ideas:
    &lt;ul&gt;
      &lt;li&gt;Plagiarising.&lt;/li&gt;
      &lt;li&gt;Research.&lt;/li&gt;
      &lt;li&gt;Talks to others to be able to do this!&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Misunderstand stolen ideas.&lt;/li&gt;
    &lt;li&gt;Copulation:
    &lt;ul&gt;
      &lt;li&gt;Mix two ideas into a better one.&lt;/li&gt;
      &lt;li&gt;Coupling of ideas.&lt;/li&gt;
      &lt;li&gt;Best way to solve arguments between two parties.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Error, theft and copulation: all things that we learn not to do since school.&lt;/li&gt;
  &lt;li&gt;Relation with 3 obstacles to innovations:
  &lt;ul&gt;
    &lt;li&gt;Error == self-awareness: we do not error.&lt;/li&gt;
    &lt;li&gt;Theft == no-problem syndrome: we are so clever that we do not need others ideas.&lt;/li&gt;
    &lt;li&gt;Copulation == single-solution belief: if there is only one solution, there is no point on mixing.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-9&quot;&gt;&lt;/a&gt;Chapter 9 - Vision&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Becoming a leader means shifting the focus from your ideas to ideas of others.&lt;/li&gt;
  &lt;li&gt;Success can lead to failure.&lt;/li&gt;
  &lt;li&gt;People become leaders because the way they react to failure:
  &lt;ul&gt;
    &lt;li&gt;Not only overcome adversity, but turn it to their advantage.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;How? Special kind of vision, one that combines:
  &lt;ul&gt;
    &lt;li&gt;&amp;ldquo;Ordinary&amp;rdquo; mission in life.&lt;/li&gt;
    &lt;li&gt;And personalising the vision.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;In other words, something worth doing, but must have a unique part that only I can contribute.&lt;/li&gt;
  &lt;li&gt;People without vision cannot influence others.&lt;/li&gt;
  &lt;li&gt;Find a vision: child-like, but not childish .&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-3&quot;&gt;&lt;/a&gt;Part 3 - Motivation&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-10&quot;&gt;&lt;/a&gt;Chapter 10 - First Great Obstacle to Motivation - clear communication&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Inability to see yourself as others see you.&lt;/li&gt;
  &lt;li&gt;Top problem solvers tend to believe that they had success without other people help. When they become leaders, they act more like a chief surgeon than an athletic coach. Basically, they think teammates cannot solve problems&lt;/li&gt;
  &lt;li&gt;Testing question: Are you willing to appear fooling in front of other peoples?&lt;/li&gt;
  &lt;li&gt;An Satir’s interaction model:&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/becoming-technical-leader/interaction-model.jpg&quot; alt=&quot;Interaction model&quot; title=&quot;Interaction model&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Inner me steps:
  &lt;ul&gt;
    &lt;li&gt;Sensory input.&lt;/li&gt;
    &lt;li&gt;Interpretation.&lt;/li&gt;
    &lt;li&gt;Feelings.&lt;/li&gt;
    &lt;li&gt;Feeling about feelings.&lt;/li&gt;
    &lt;li&gt;Defense.&lt;/li&gt;
    &lt;li&gt;Rules for commenting.&lt;/li&gt;
    &lt;li&gt;Outcome.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;This is just the receiving part, the sending part goes through something similar, so the opportunity of misunderstanding is big.&lt;/li&gt;
  &lt;li&gt;Reasons why communications go awry:
  &lt;ul&gt;
    &lt;li&gt;Perception.&lt;/li&gt;
    &lt;li&gt;Wrong time.&lt;/li&gt;
    &lt;li&gt;Wrong place.&lt;/li&gt;
    &lt;li&gt;Wrong person.&lt;/li&gt;
    &lt;li&gt;Self-worth.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Satir says that 90% of communications are incongruent.&lt;/li&gt;
  &lt;li&gt;Incongruent comms are deadly for motivation.&lt;/li&gt;
  &lt;li&gt;Clear communication, tell:
  &lt;ul&gt;
    &lt;li&gt;What you perceive.&lt;/li&gt;
    &lt;li&gt;How you feel about what you perceive.&lt;/li&gt;
    &lt;li&gt;How you feel about the feeling.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;By telling all of these, you may look as a fool, that why the testing question.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-11&quot;&gt;&lt;/a&gt;Chapter 11 - Second great obstacle to motivation - Putting task over people&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Pretend/Think that there is a conflict between people and a tasks. (Conflict == that you have to chose one over the other).&lt;/li&gt;
  &lt;li&gt;People and tasks are indivisible. They cannot be separated.&lt;/li&gt;
  &lt;li&gt;Every task derives from people.&lt;/li&gt;
  &lt;li&gt;Lessons of task vs people oriented leaders:
  &lt;ul&gt;
    &lt;li&gt;When survivals is concerned, there is no choice but to put people first.&lt;/li&gt;
    &lt;li&gt;If the job is not highly technical, the leader need not to be competent, but can lead by fear.&lt;/li&gt;
    &lt;li&gt;People with strong technical background can convert any task into a technical task, thus avoiding work they don&amp;rsquo;t want to do.&lt;/li&gt;
    &lt;li&gt;Leaders who don’t care about people don’t have anyone to lead, unless their followers don’t have a choice.&lt;/li&gt;
    &lt;li&gt;No amount of caring for people will hold your audience if you have nothing to offer.&lt;/li&gt;
    &lt;li&gt;Task-oriented leaders tend to overestimate their own accomplishments.&lt;/li&gt;
    &lt;li&gt;Very little work we do is really so important that it justifies sacrificing the future possibilities of the people doing the work.&lt;/li&gt;
    &lt;li&gt;When the work is complex, no leader can be absolutely sure that plans won’t &amp;ldquo;gang aft agley&amp;rdquo;.&lt;/li&gt;
    &lt;li&gt;To be a successful problem-solving leader, you must keep everybody’s humanness at the forefront.&lt;/li&gt;
    &lt;li&gt;If you are a leader, the people are your work. There is no other work worth doing.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-12&quot;&gt;&lt;/a&gt;Chapter 12 - The Problem of Helping Others&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You cannot help if people don&amp;rsquo;t want to be helped.&lt;/li&gt;
  &lt;li&gt;Start by agreeing what is the problem.&lt;/li&gt;
  &lt;li&gt;You can stop helping if it doesn&amp;rsquo;t work.&lt;/li&gt;
  &lt;li&gt;In every offer to help, the helper expect to get something, even if he is not conscious.&lt;/li&gt;
  &lt;li&gt;No matter how strange it may look, most people are actually trying to be helpful.&lt;/li&gt;
  &lt;li&gt;&lt;p&gt;Golden rule regarding help:&lt;/p&gt;
  &lt;blockquote&gt;Offer to help only if you would want to be helped in the same situation and do it in the way you would want to be helped
  &lt;/blockquote&gt;&lt;/li&gt;
  &lt;li&gt;If you don&amp;rsquo;t care about people whom you lead, you will never succeed as they leader.&lt;/li&gt;
  &lt;li&gt;You cannot care for others if you don&amp;rsquo;t care for yourself.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-13&quot;&gt;&lt;/a&gt;Chapter 13 - Learning to Be a Motivator&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Chapter about self-esteem: each of us have survival rules.&lt;/li&gt;
  &lt;li&gt;Survival rules do not allow to be effective leader.&lt;/li&gt;
  &lt;li&gt;We can change survival rules to guidelines.&lt;/li&gt;
  &lt;li&gt;We also have meta-rules (rules about our survival rules) that govern how we can change our survival rules.&lt;/li&gt;
  &lt;li&gt;So when your leadership is not working, maybe you need to find if there is a survival rule interfering.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-14&quot;&gt;&lt;/a&gt;Chapter 14 - Where Power Come From&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;You don’t &amp;ldquo;possess&amp;rdquo; power. Power is a relationship.&lt;/li&gt;
  &lt;li&gt;Example: Technical expertise is &amp;ldquo;power&amp;rdquo; in a team of junior people, while not so much in a team of senior.&lt;/li&gt;
  &lt;li&gt;You need to understand what you want power for.&lt;/li&gt;
  &lt;li&gt;When changing role, your old power will banish and a new one will emerge. This is because your relationship with others has changed.&lt;/li&gt;
  &lt;li&gt;Personal power: when you have a clear understanding of what you really want.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-15&quot;&gt;&lt;/a&gt;Chapter 15 - Power, Imperfection and Congruence&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Everybody wants to feel useful.&lt;/li&gt;
  &lt;li&gt;Mechanical problems: one that seem complex but turns out to be solved by a technical solution with no emotional or psychological turmoil.&lt;/li&gt;
  &lt;li&gt;Some mechanical problems are hard to handle because of the reaction to the event.&lt;/li&gt;
  &lt;li&gt;&lt;a name=&quot;mature-patterns&quot;&gt;&lt;/a&gt;List of mature patterns of behaviour, to help fixing a problem:
  &lt;ul&gt;
    &lt;li&gt;Be clear when dealing with others.&lt;/li&gt;
    &lt;li&gt;Be aware of your own thoughts and feelings.&lt;/li&gt;
    &lt;li&gt;Be able to see and hear what is outside yourself.&lt;/li&gt;
    &lt;li&gt;Behave towards other people as separate from yourself and unique.&lt;/li&gt;
    &lt;li&gt;Treat differentness as an opportunity to learn and explore rather than a threat or signal for conflict.&lt;/li&gt;
    &lt;li&gt;Deal with persons and situations in their context, in terms of how it is rather how you wish it were or expect it to be.&lt;/li&gt;
    &lt;li&gt;Accept responsibility for what you feel, think, hear and see, rather than denying it or attributing it to others.&lt;/li&gt;
    &lt;li&gt;Have open techniques for giving, receiving and checking meaning with others.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;These are all social and communication skills.&lt;/li&gt;
  &lt;li&gt;Be congruent.&lt;/li&gt;
  &lt;li&gt;Be open with others about what you perceive, how you feel and be open to learn.&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-4&quot;&gt;&lt;/a&gt;Part 4 - Organization&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-16&quot;&gt;&lt;/a&gt;Chapter 16 - Gaining organisation power&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Organisation power: to obtain resources (money, training, office space, tools) for your team.&lt;/li&gt;
  &lt;li&gt;Power conversion: convert other kinds of power into organisational power.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-17&quot;&gt;&lt;/a&gt;Chapter 17 - Effective organisation of problem-solving teams&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Possible organisations:
  &lt;ul&gt;
    &lt;li&gt;Individual: no org, everybody works on its own.&lt;/li&gt;
    &lt;li&gt;Voting: Vote without previous discussion.&lt;/li&gt;
    &lt;li&gt;Strong leader: one person makes all decisions, privately consulting the team.&lt;/li&gt;
    &lt;li&gt;Consensus: everybody agrees after the discussion:
    &lt;ul&gt;
      &lt;li&gt;Everybody agrees in principle.&lt;/li&gt;
      &lt;li&gt;Everybody backs up the decision with logic and facts.&lt;/li&gt;
      &lt;li&gt;Avoid changing your mind only to avoid conflict.&lt;/li&gt;
      &lt;li&gt;Avoid techniques to reduce conflict (like voting, averaging, …)&lt;/li&gt;
      &lt;li&gt;Facts and only facts.&lt;/li&gt;
      &lt;li&gt;Consider other opinions helpful, as long as they are supported by facts and logic.&lt;/li&gt;
      &lt;li&gt;Do not withhold information just to be nice.&lt;/li&gt;
      &lt;li&gt;Can use intuition, but make it clear that is intuition.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Voting:
    &lt;ul&gt;
      &lt;li&gt;Better than individual.&lt;/li&gt;
      &lt;li&gt;Require less time.&lt;/li&gt;
      &lt;li&gt;No information exchange.&lt;/li&gt;
      &lt;li&gt;Better than consensus, if consensus breaks down.&lt;/li&gt;
      &lt;li&gt;Better than strong leader, if leader is bad.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Strong leader:
    &lt;ul&gt;
      &lt;li&gt;Depends a lot on the leadership style and knowledge of the leader.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Consensus:
    &lt;ul&gt;
      &lt;li&gt;At first, time consuming and frustrating.&lt;/li&gt;
      &lt;li&gt;Usually highest quality decisions.&lt;/li&gt;
      &lt;li&gt;Can be harmful if consensus process breaks down.&lt;/li&gt;
      &lt;li&gt;Whole team feels responsible for the decision, so more productive.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;Best one?
    &lt;ul&gt;
      &lt;li&gt;Depends on the organisation context.&lt;/li&gt;
      &lt;li&gt;Remember that organisation context can change.&lt;/li&gt;
      &lt;li&gt;To check if it is working, see if the organisation is providing an environment for people to understand the problem, manage the flow of ideas and maintain quality (== problem-solving org).&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-18&quot;&gt;&lt;/a&gt;Chapter 18 - Obstacles to Effective Organising&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;First Obstacle: Believe that you just have two choices: order or be ordered.&lt;/li&gt;
  &lt;li&gt;Second Obstacle: Think that people can take and interpret orders as computer.
  &lt;ul&gt;
    &lt;li&gt;People have judgement and you want them to use it.&lt;/li&gt;
    &lt;li&gt;Communication is never perfect.&lt;/li&gt;
    &lt;li&gt;The more precise your orders, the more frustration when they are not understood, and the less creativity for the one ordered.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Third: doing the work yourself.
  &lt;ul&gt;
    &lt;li&gt;A leaders job is not to solve a single problem, but to create an environment in which many problems will be solved, not just for today, but for the future.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Forth: Reward ineffective organising:
  &lt;ul&gt;
    &lt;li&gt;Reward heroics.&lt;/li&gt;
    &lt;li&gt;Organizing is not about solving “crisis”/problems, but avoiding them.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Giving and taking orders are means to an end, not an end in themselves.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-19&quot;&gt;&lt;/a&gt;Chapter 19 - Learning to Be an Organiser&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Practice: at work and outside work.&lt;/li&gt;
  &lt;li&gt;Observe how people organise and experiment (introduce little changes to observe what happens).&lt;/li&gt;
  &lt;li&gt;Look for incongruences:
  &lt;ul&gt;
    &lt;li&gt;What things are vs the way they look. Example:
    &lt;ul&gt;
      &lt;li&gt;org chart vs real org.&lt;/li&gt;
      &lt;li&gt;Official channels vs informal channels.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
    &lt;li&gt;(Seed model) Everybody is doing their best, under the current circumstances. Hence if you think they there are not, it is because you don’t understand the circumstances.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Look for cross wires:
  &lt;ul&gt;
    &lt;li&gt;If everybody is motivated, and&lt;/li&gt;
    &lt;li&gt;If everybody is agrees on the problem&lt;/li&gt;
    &lt;li&gt;Then look for a mistake/misunderstanding in the organisation.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Legitimize differences:
  &lt;ul&gt;
    &lt;li&gt;Sometimes the cross wires happen because orgs do not account for people being different.&lt;/li&gt;
    &lt;li&gt;Look at the Myers-Briggs model. Read “Please understand me”.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Use yourself as a model of the team.
  &lt;ul&gt;
    &lt;li&gt;You can see your own internal conflicts as a model of people conflicts.&lt;/li&gt;
    &lt;li&gt;For example, conflict of wanting to finish now vs wanting to do a perfect job.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;part-5&quot;&gt;&lt;/a&gt;Part 5 - Transformation&lt;/h1&gt;&lt;h2&gt;&lt;a name=&quot;ch-20&quot;&gt;&lt;/a&gt;Chapter 20 - How You Will Be Graded as a Leader&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Grading is multiplicative. If you have a 80% in tech and 60% people’s skill your score is 0.8 * 0.6 = 0.48.&lt;/li&gt;
  &lt;li&gt;This is because as a leader, people expects a lot more.&lt;/li&gt;
  &lt;li&gt;To make things even harder, as a technical leader, you are going to be graded in more dimensions.&lt;/li&gt;
  &lt;li&gt;Improving an are with the least grade has more impact.
  &lt;ul&gt;
    &lt;li&gt;From the previous example, if we can improve 10 points:
    &lt;ul&gt;
      &lt;li&gt;(0.8+0.1) * 0.6 = 0.8 * 0.6 + 0.1 * 0.6 = 0.54&lt;/li&gt;
      &lt;li&gt;0.8 * (0.6+0.1) = 0.8 * 0.6 + 0.1 * 0.8 = 0.56&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Until some trust is build, tech leaders are scored by the minimum of the grades.
  &lt;ul&gt;
    &lt;li&gt;Try to delay the area that you are weak at.&lt;/li&gt;
    &lt;li&gt;You don’t need to answer any question immediately.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-21&quot;&gt;&lt;/a&gt;Chapter 21 - Passing Your Own Leadership Tests&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The person at the top makes the rules, which is another way of saying it breaks the old rules.&lt;/li&gt;
  &lt;li&gt;A leadership trait is withstand testing, because you are going to be tested all the time.&lt;/li&gt;
  &lt;li&gt;To pass a leadership test, you either use:
  &lt;ul&gt;
    &lt;li&gt;Motivation, also called personality style.&lt;/li&gt;
    &lt;li&gt;Organisation, also called planning style.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Tech people are usually better at the planning style.&lt;/li&gt;
  &lt;li&gt;Paradox: to avoid your weakest style, you have to strengthen it.&lt;/li&gt;
  &lt;li&gt;Both style are important.&lt;/li&gt;
  &lt;li&gt;If you don’t fail, you are not testing yourself thoroughly.&lt;/li&gt;
  &lt;li&gt;If you are not testing yourself thoroughly, you will learn little.&lt;/li&gt;
  &lt;li&gt;If you learn little, you can be good but not exceptional. You cannot jump to your next plateau.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-22&quot;&gt;&lt;/a&gt;Chapter 22 - A Personal Plan for Change&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;When trying something new:
  &lt;ul&gt;
    &lt;li&gt;We are in a special state of alertness.&lt;/li&gt;
    &lt;li&gt;When we stop paying attention, we go back to the old, safe behaviour.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;A series of small, ordinary changes can put you on the brink of a large and extraordinary one. You have to have the courage to take the plunge.&lt;/li&gt;
  &lt;li&gt;You need a plan.&lt;/li&gt;
  &lt;li&gt;Take responsibility for your own education.&lt;/li&gt;
  &lt;li&gt;Make the most of your organisation’s learning opportunities.&lt;/li&gt;
  &lt;li&gt;Learn your learning style.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-23&quot;&gt;&lt;/a&gt;Chapter 23 - Finding Time to Change&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Make time:
  &lt;ul&gt;
    &lt;li&gt;Don’t redo work you have assigned to others. Allow if you must make them mistakes.&lt;/li&gt;
    &lt;li&gt;Avoid trivial technical arguments to prove your technical superiority.&lt;/li&gt;
    &lt;li&gt;Choose your own priorities and don’t wait for a crisis to organise your activities.&lt;/li&gt;
    &lt;li&gt;Avoid administration.&lt;/li&gt;
    &lt;li&gt;Pay attention to what you do when there is nothing to do.&lt;/li&gt;
    &lt;li&gt;Listen to what other people has already learned.&lt;/li&gt;
    &lt;li&gt;Do two things at once:
    &lt;ul&gt;
      &lt;li&gt;Find activities where you get multiple benefits.&lt;/li&gt;
      &lt;li&gt;Kill two birds with one stone.&lt;/li&gt;
    &lt;/ul&gt;&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;a name=&quot;ch-24&quot;&gt;&lt;/a&gt;Chapter 24 - Finding Support for Change&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Seeking support is a sign of strength, not weakness.&lt;/li&gt;
  &lt;li&gt;Nurture relationships for:
  &lt;ul&gt;
    &lt;li&gt;Technical support.&lt;/li&gt;
    &lt;li&gt;Services you cannot perform (like criticism of your own writing).&lt;/li&gt;
    &lt;li&gt;Growth: people that give you things you didn’t know you did want to know.&lt;/li&gt;
    &lt;li&gt;Recovery, emotional and spiritual support.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;There are three types of supporters:
  &lt;ul&gt;
    &lt;li&gt;Conservatives: they don’t want you to change.&lt;/li&gt;
    &lt;li&gt;Radicals: they want you to change.&lt;/li&gt;
    &lt;li&gt;Friends: “Do whatever you really want to do”.&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h1&gt;&lt;a name=&quot;epilogue&quot;&gt;&lt;/a&gt;Epilogue&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Do not obsess to become a manager or leader.&lt;/li&gt;
  &lt;li&gt;Whenever you want to do something, ask yourself:
  &lt;ul&gt;
    &lt;li&gt;Why do I want to do this?&lt;/li&gt;
    &lt;li&gt;What assets do I have to contribute?&lt;/li&gt;
    &lt;li&gt;What liabilities do I bring?&lt;/li&gt;
  &lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
</item>
<item>
<title>
Java with a Clojure mindset
</title>
<link>
https://danlebrero.com/2019/03/06/java-with-a-clojure-mindset/
</link>
<guid>
https://danlebrero.com/2019/03/06/java-with-a-clojure-mindset/
</guid>
<pubDate>
Wed, 06 Mar 2019 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;In this talk, using a real application as an example, we will learn how to build and design Java applications that follow Clojure&amp;rsquo;s functional principles using just core Java, without any libraries, lambdas, streams or weird syntax; and we will see what benefits those functional principles can bring.&lt;/p&gt;&lt;p&gt;A teaser first:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/5iDL_lVcXM4&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;Here are the slides in &lt;a href=&quot;/slides/java-with-a-Clojure-mindset.key&quot;&gt;keynote format&lt;/a&gt;, &lt;a href=&quot;/slides/java-with-a-clojure-mindset.pptx&quot;&gt;ppt format (untested!)&lt;/a&gt; and &lt;a href=&quot;https://www.slideshare.net/DanielLebrero2/java-with-a-clojure-mindset&quot;&gt;SlideShare (somehow broken!)&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;And the video:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/u2CT3o09JhU&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;Feedback and questions welcomed!&lt;/p&gt;
&lt;hr/&gt;&lt;h1&gt;Transcript&lt;/h1&gt;&lt;p&gt;Lets start with a quizz. Who can tell me what is this?&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/001-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;Alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;This is how Clojure looks like the first time that you see it.&lt;/p&gt;&lt;p&gt;And I want to point out 3 important things in this picture. &lt;/p&gt;&lt;p&gt;First, it is very ugly, some people would say that it is even disgusting.&lt;/p&gt;&lt;p&gt;Second, there are a lot of things that make no sense at all. For example, why would you want to keep a bug in your mouth?&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/004-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;Alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;Or what the hell is that and what it is doing there?&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/005-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;Alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;But last, and most importantly, it is alien. And when we look at that picture, we are looking at it from our human point of view, from our Java perspective.&lt;/p&gt;&lt;p&gt;So maybe we are not being fair, and with enough time, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/006-hypotoad.gif&quot; alt=&quot;hypotoad&quot; title=&quot;hypotoad&quot; /&gt;&lt;/p&gt;&lt;p&gt;and the help of the hypotoad, maybe that picture would look like this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/007-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;because with understanding, it will come a change on perspective, that will allow us to make a more fair judgement. &lt;/p&gt;&lt;p&gt;And I know what you are thinking, Wonderwoman is not technically an alien and if we are talking about Clojure, the picture is missing &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/008-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;some parenthesis. &lt;/p&gt;&lt;p&gt;But still, if we spend sometime studying these aliens, maybe we will find some superpowers that we can use in our day to day job as Java developers.&lt;/p&gt;&lt;h1&gt;Clojure&lt;/h1&gt;&lt;p&gt;So what is Clojure? Clojure is a Functional, Hosted, Dynamic and strongly typed, lisp for the JVM.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/010-clojure.jpg&quot; alt=&quot;clojure&quot; title=&quot;Clojure&quot; /&gt;&lt;/p&gt;&lt;p&gt;So what we are going to do in this session is, using a real world application as an example, see how Clojure affected the way that we built, the way we designed this Java application, how Clojure infected our Java code.&lt;/p&gt;&lt;p&gt;To give a little bit more context, when I got involved with this application, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/011-wikus.jpg&quot; alt=&quot;wikus&quot; title=&quot;Wikus&quot; /&gt;&lt;/p&gt;&lt;p&gt;I had already been a Java developer for 12 years, and a Clojure one for 3, so when I got involved I had reached Wikus Stage 2 on my journey, on my transformation, to a full blown alien mind.&lt;/p&gt;&lt;p&gt;The application that we are going to be talking about, is one of this bonus systems that you find in some betting industries. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/012-bonus.jpg&quot; alt=&quot;bonus&quot; title=&quot;Bonus&quot; /&gt;&lt;/p&gt;&lt;p&gt;Those of the kind of “if you put some money in your account, we will give you double that amount for free” or “if you join us now, we will give you a 1000 euros free cash!”. &lt;/p&gt;&lt;p&gt;Now nobody is going to give you any free cash, so if you read the T&amp;amp;C, to be eligible to withdraw that “free” cash, to be able to get that cash and put it in your pocket, you had to first play or bet, a number of times in the system, or do a number of activities.&lt;/p&gt;&lt;p&gt;Also, in our particular case, and I am not sure if this is common, the client had a limited amount of time to place all these bets.&lt;/p&gt;&lt;p&gt;So removing all the marketing fluff, what our application had to do was something like this: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;add some amount of money to the client account, if they had sign up for the bonus and they had made loads and loads of bets, within some timeframe. &lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;So from an implementation point of view, what the system had to do is know which bonus where available, which clients had sign up for one of those bonus, and then keep track of the interesting activities of those clients, which in our case would be making a bet and placing a deposit.&lt;/p&gt;&lt;h1&gt;Functional vs OO&lt;/h1&gt;&lt;p&gt;So lets start with the first of the differences: Functional vs Object Oriented.&lt;/p&gt;&lt;p&gt;Of the many principles, concepts and techniques that are usually associated with FP, I just want to focus on one that, in my personal experience, has made the biggest impact on the way that I design applications. And I think it is specially important because it is easy to translate, to use it most languages.&lt;/p&gt;&lt;h2&gt;Pure Functions&lt;/h2&gt;&lt;p&gt;This is the concept of pure functions.&lt;/p&gt;&lt;p&gt;Pure functions are pieces of code that for a given input, they are always always always going to return the same result. Always. So same input, same output.&lt;/p&gt;&lt;p&gt;And why are pure functions so important? Pure functions have multiple benefits, but the key one is that pure functions are easier to reason about, because all the code within a pure function just depends on the input parameters. So the context that you need to keep on your head to understand a pure functions is small.&lt;/p&gt;&lt;p&gt;Pure functions are like physic laws, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/013-laws.2.gif&quot; alt=&quot;laws&quot; title=&quot;Laws&quot; /&gt;&lt;/p&gt;&lt;p&gt;because you know how a pure functions is going to work and you can rely on it working the same every single time.&lt;/p&gt;&lt;p&gt;And as pure functions are easier to understand, it also means that they are easier to change. &lt;/p&gt;&lt;p&gt;And change is what we, developers, do for a living. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Programmers are constantly in maintenance mode. &lt;cite&gt;The Pragmatic Programmer&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;We very rarely write a new piece of code. Most of the time, we are just making changes on existing systems. Even if you created your project 15 minutes ago, you are already in the business if changing existing code. &lt;/p&gt;&lt;h2&gt;Side effects&lt;/h2&gt;&lt;p&gt;And when talking about pure functions, we have to talk about its evil twin, side effects.&lt;/p&gt;&lt;p&gt;Side effects is what makes your code hard to understand, because suddenly, to understand a piece of code, it is not enough to look at that code. Now you also need to understand all its dependencies, and all the libraries that are being used, and all the possible states in the database, and all the possible states of the network, and all the possible things that multiple threads could be doing at the same time.&lt;/p&gt;&lt;p&gt;The context that you need to keep in your head is huge.&lt;/p&gt;&lt;p&gt;Once you have side effects, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/014-side-effects.gif&quot; alt=&quot;side effects&quot; title=&quot;Side effects&quot; /&gt;&lt;/p&gt;&lt;p&gt;you are not sure what is going to happen when you make a change.&lt;/p&gt;&lt;p&gt;Well, that was a bit side effect. And this happens to us all the time. You make a small, and what you think is an innocuous change, on one side of your application and then suddenly a completely unrelated feature in the other side breaks without you ever noticing.&lt;/p&gt;&lt;p&gt;So for me, a key insight on functional programming, is that side effects are the enemy. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/015-side-effects-enemy.jpg&quot; alt=&quot;015-side-effects-enemy&quot; title=&quot;Side effects enemy&quot; /&gt;&lt;/p&gt;&lt;p&gt;So functional programming is about fighting and controlling side effects.&lt;/p&gt;&lt;p&gt;There are basically two kinds of side effects:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/016-side-effects-types.jpg&quot; alt=&quot;Side effect types&quot; title=&quot;Side effects types&quot; /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Those side effects that change the state of your application&lt;/li&gt;
  &lt;li&gt;And then we have IO side effects. Of the IO side effects, I want to distinguish the Input side effects, sometimes called co-effects from the output side effects, called simply effects.&lt;/li&gt;
&lt;/ol&gt;&lt;h3&gt;State&lt;/h3&gt;&lt;p&gt;So let&amp;rsquo;s start by talking about how we can fight state.&lt;/p&gt;&lt;p&gt;In the case of the bonus system, our application has to keep track of the state of each client and its progress on the bonus campaign. &lt;/p&gt;&lt;p&gt;To do that you can image that the application kept a map, with the client id as the key and some kind of ClientBonus object as the value. This ClientBonus object itself could have maybe Client object and a bonus object. Also, it will also have to keep track of the deposits made, so it could have a DepositList, which will contain a bunch of Deposit objects, and each of these deposits objects could contain even more objects. In a similar way, it would need to keep track of the bets done by the client.&lt;/p&gt;&lt;p&gt;So these would be our object graph, and we would have one of these graphs per client.&lt;/p&gt;&lt;p&gt;Now when it came to state management, I would traditionally made each object responsible for its own state change. So the Map would get its own little machinery, its own little piece of code to manage its internal state and to make sure that if several threads try to manipulate or read the map, they will see a consistent state.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/017-state-management-in-object-oriented.gif&quot; alt=&quot;State management in Object Oriented&quot; title=&quot;State management in OO&quot; /&gt;&lt;/p&gt;&lt;p&gt;In a similar way, the ClientBonus object would also be responsible to manipulate its own state internal state and to provide a consistent view of it, and the same for each and every object. &lt;/p&gt;&lt;p&gt;Now, from a complexity point of view, what does it mean that each object gets its own machinery to control its state? Each of those little machines are possible side effects that you have to take into account whenever you make a change to your code. You not only you have to think about the business logic that you have to write, you also have to thinking about any timing issues due to concurrent access to the objects.&lt;/p&gt;&lt;p&gt;So the code is mixing in the same place business rules and concurrency rules.&lt;/p&gt;&lt;p&gt;So what Clojure teach us is that, to simplify this, what you want to do is separate application logic, your business logic, from any state management, so you don’t need to think about both at the same time.&lt;/p&gt;&lt;p&gt;So how we do this? First by making everything immutable, everything is a value, even that map holding all of our ClientBonus objects. Now that everything is immutable, when writing your application logic, you do not need to think about timing, you do not care about what other threads are doing at the same time, because none of them can change to your object graph. So this frees your mind, this makes writing your application logic a lot simpler.&lt;/p&gt;&lt;p&gt;For the state management part, Clojure comes with a construct or a class, called Atom, which is basically the same as a Java AtomicReference, but with a little bit more functionality. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;atom =~ j.u.c.a.AtomicReference&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Lets see how an atom works.&lt;/p&gt;&lt;p&gt;An atom holds a reference to the whole immutable value, to the whole state, and your job as a developer is to write a function, that takes the current state as a parameter, and it produces the new state, and the atom machinery will make sure that the transition from one state to the next is done in an atomic way.&lt;/p&gt;&lt;p&gt;To understand it better, lets see what happens if two threads try to modify that state at the same time.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/018-state-management-atom.gif&quot; alt=&quot;State management Atom&quot; title=&quot;State management in Atom&quot; /&gt;&lt;/p&gt;&lt;p&gt;Both threads will get the initial state and will start calculating the next state. Lets say that thread-1 finishes before thread-2. At this point thread-1 tries to change the state of the atom, to the new green value. To do that it tells the atom to do an atomic compare and swap operation. As the value used to calculate the green state is still the white value, the atom changes it state to the green value.&lt;/p&gt;&lt;p&gt;Now thread-2 finishes, when it tries to change the state of the atom, the compare and swap operation fails, because the atom is not longer pointing to the white state. So the thread-2 has to start again, but this time with the green value.&lt;/p&gt;&lt;p&gt;All this machinery about retrying and detecting conflicts is provided by the atom, so you as a developer only have to write a pure function.&lt;/p&gt;&lt;p&gt;Now to make sure that we all in the same page, I want to point out two things.&lt;/p&gt;&lt;p&gt;The first one is that the only valid values of the atom during the time were the white, green and red ones. Nobody ever saw the blue value.&lt;/p&gt;&lt;p&gt;The other thing is that if for example there was another thread, thread-3, that at time 0 read the current state of the atom and it keeps a reference to it for some time, as time moved, from t0 to t1 and t2, the thread-3 will still see the initial state, the white state. Because the value is immutable, nobody can touch it, which means that thread-3 can potentially be working with a stale value.&lt;/p&gt;&lt;p&gt;Now you may be wondering, wow, if I have to create a whole new graph every time that I want to change anything, isn&amp;rsquo;t all this immutability going to be extremely slow, extremely expensive? And in practice it is actually slower, but not as much as you would expect. &lt;/p&gt;&lt;p&gt;Lets say that you have this state, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/019-object-graph.jpg&quot; alt=&quot;Object graph&quot; title=&quot;Object graph&quot; /&gt;&lt;/p&gt;&lt;p&gt;and to calculate the new state, you need to change some field in that bet object over there. Of course, you cannot change anything, so you create a new bet object. As the bet belongs to a BetList, and again everything is immutable, it also means that you have to create a new BetList, which also means that you have to create a new ClientBonus, and a new bucket on the hashmap.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/020-structural-sharing.jpg&quot; alt=&quot;Structural sharing&quot; title=&quot;Structural sharing&quot; /&gt;&lt;/p&gt;&lt;p&gt;Those 4 things are what it is different between the green and the white state. So to build the green state you just need to create 4 new objects and you can reuse all the others, and you can do this because those objects are all immutable, and we know that it is safe to share immutable objects. This technique is call structural sharing.&lt;/p&gt;&lt;p&gt;Now, this is still slower that mutating one field in the Bet object, but the cost is still very cheap, specially if we compare it with the benefits of this approach.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Is this thread safe? &lt;cite&gt;Every Java developer, every day.&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Have you ever ask yourself this question? With immutability and atoms, you still ask this question, but the rules to answer it are a lot simpler as they don’t involve the Java Memory Model and the “happens-before” semantics.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/021-thread-safe.jpg&quot; alt=&quot;Thread safe rules&quot; title=&quot;Thread safe rules&quot; /&gt;&lt;/p&gt;&lt;p&gt;The first rule is that the state within an atom is always consistent, as everything is immutable, it is not possible to see half-baked states. This already removes a lot of the complexity in your code.&lt;/p&gt;&lt;p&gt;The second rule is that the function to calculate the new state must be pure, as it maybe run multiple times. &lt;/p&gt;&lt;p&gt;As we saw in the example with Thread-3, any decision that you make outside this pure function could be done with stale data or be subject of a race condition.&lt;/p&gt;&lt;p&gt;From this third rule, it should also be obvious that if you code has to look at two atoms to make some decision, the decision is not atomic.&lt;/p&gt;&lt;p&gt;So how all of this affected our Java code?&lt;/p&gt;&lt;p&gt;The first, obvious things, is that all the domain classes are immutable, so all the fields, including any map or list.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class ClientBonus {

    private final Client client;
    private final Bonus bonus;
    private final DepositList deposits;

…
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now for the state management part, we actually did not use an AtomicReference to store the whole map with all the ClientBonus.&lt;/p&gt;&lt;p&gt;In our case, as what one client does, do not affect the outcome of another&amp;rsquo;s client bonus, our application logic just really needs the ClientBonus to be consistent, it doesn&amp;rsquo;t need a consistent view of all current ClientBonuses. &lt;/p&gt;&lt;p&gt;So what we did was to actually use a ConcurrentHashMap to hold the state, and then each value will get its own little machinery to advance time.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/022-concurrent-hashmap.jpg&quot; alt=&quot;Concurrent HashMap&quot; title=&quot;Concurrent hashmap&quot; /&gt;&lt;/p&gt;&lt;p&gt;That machinery is provided by the compute family of methods of the ConcurrentMap, which basically provide the same semantics as Clojure’s atom, but on a per key level.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public interface ConcurrentMap&amp;lt;…&amp;gt; extends Map&amp;lt;…&amp;gt; {

V compute(K key, BiFunction&amp;lt;…&amp;gt; remappingFunction) 
V computeIfAbsent(K key, Function&amp;lt;…&amp;gt; mappingFunction) 
V computeIfPresent(K key, BiFunction&amp;lt;…&amp;gt; remappingFunction) 
…
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So this is how the class that hold the state would look like. &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class TheStateHolder {
    private final Map&amp;lt;Long, ClientBonus&amp;gt; state = new ConcurrentHashMap&amp;lt;&amp;gt;();
    public ClientBonus nextState(Long client, Bet bet) {
        return state.computeIfPresent(
                client,
                (k, currentState) -&amp;gt; currentState.nextState(bet));
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It contains the ConcurrentHashMap, and every time that the application gets new data, it just calculates the new state in an atomic way.&lt;/p&gt;&lt;p&gt;In our case, we decided that the ClientBonus itself should be the one that calculates the new state, &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class ClientBonus {
...
    public ClientBonus nextState(Bet bet) {
        ...
    }
…
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;so that nextState function must be a pure function.&lt;/p&gt;&lt;p&gt;So this way we managed to separate state management from application logic.&lt;/p&gt;&lt;h3&gt;Effects&lt;/h3&gt;&lt;p&gt;So now that we know how to fight State, let&amp;rsquo;s look at what we can do with effects. &lt;/p&gt;&lt;p&gt;Effects are actions that our application has to do in order to change the state of the external world.&lt;/p&gt;&lt;p&gt;In our case, those effects were things like sending a notification to the user about the progress of the bonus, or paying the price into the client’s account.&lt;/p&gt;&lt;p&gt;Clojure, the same as Java, is not a pure language like Haskel, so it actually does not provide any special tools to deal with IO. So lets see how we can handle effects.&lt;/p&gt;&lt;p&gt;Typically, in our applications, we would have something like this. Some kind of &lt;em&gt;service&lt;/em&gt; object that depends on some interface and then at runtime we inject some dependencies. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/023-service-design.jpg&quot; alt=&quot;Service design&quot; title=&quot;Service design&quot; /&gt;&lt;/p&gt;&lt;p&gt;If you think about what this kind of service looks like, you will notice that is it takes care of two things: it decides which side effects our applications has to do, plus it has to execute those side effects and deal with any possible errors or exceptions raised by doing the effects. So when you write the code for the service, you have to keep in mind both things.&lt;/p&gt;&lt;p&gt;So if we want to follow a more functional approach, we want to separate those two things, so we can work on them independently. On one hand, we want to decide what effects need to be performed, and in the other hand we have to deal with the messy and ugly details of interacting with the external world.&lt;/p&gt;&lt;p&gt;To decide what effects need to be performed, in our business logic, we can instead of calculating the next state, we can also calculate the effects. With this, calculating the effects to be performed becomes part of our pure business logic, becomes part of our pure function. &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class ClientBonus {
...
    public Pair&amp;lt;ClientBonus,Effects&amp;gt; next(Bet bet) {
        ...
    }
…
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note that this also means that our effects become explicit first-class concepts in our application.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/024-notify-class.jpg&quot; alt=&quot;Notify class&quot; title=&quot;Notify class&quot; /&gt;&lt;/p&gt;&lt;p&gt;This would be an example of a class representing the effect of notifying a client about the progress of a bonus.&lt;/p&gt;&lt;p&gt;Now, even if another part of the system is going to be executing this effect and dealing with errors, our business logic can still decide on how the effects and the errors are going to be handle.&lt;/p&gt;&lt;p&gt;For example, in our business logic, we could be wrapping this effect in a Ignore error policy, while in other cases, maybe it could decide that the correct policy is to stop the JVM. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/025-notify-wrapped.jpg&quot; alt=&quot;Wrapped in policy&quot; title=&quot;Notify wrapped in policy&quot; /&gt;&lt;/p&gt;&lt;p&gt;Apart from the error policy, the application logic can also decide if the effects must be run sequentially, so if one fails, the rest will to be not executed.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/026-sequential-execution.jpg&quot; alt=&quot;Sequential execution&quot; title=&quot;Sequential execution&quot; /&gt;&lt;/p&gt;&lt;p&gt;or that maybe the effects are independent, so that an error in one should not affect the others, which also could mean that the effects can be executed in parallel.&lt;/p&gt;&lt;p&gt;For our bonus application, we decide to not build any of these flexibility in the effects, as we thought it was not necessary, and instead we went to have a very rigid, very static, way of defining the effects, and encode in the type system what were the valid and possible chain of effects. &lt;/p&gt;&lt;p&gt;But now that we have a description of what side effects must be run, we still need to execute them, we still need to run them, so some piece of code needs to go and interpret this description of the chain of effects. &lt;/p&gt;&lt;p&gt;In our case, as the structure of this description was very rigid, we opted to just let each effect know how to run itself.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public interface Effect {
    void run(AllDependencies dependencies);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note that it is here were we pass all the dependencies required to execute those side effects, things like the http or JMS clients. &lt;/p&gt;&lt;p&gt;Passing that AllDependencies object around has the benefit that it makes very obvious which methods are impure, because to be able to perform any side effect, the method would need to declare that dependencies object as a parameter.&lt;/p&gt;&lt;p&gt;It has the drawback that sometimes it is a little bit cumbersome to pass it around, and that the AllDependencies class is quite ugly, as it has to hold, and make accessible, a lot of dependencies. That AllDependencies class feel almost like your Spring Context.&lt;/p&gt;&lt;p&gt;So this is how our code would look like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;Pair&amp;lt;ClientBonus, Effects&amp;gt; pair = theStateHolder.nextState(bet);
pair.effects.run(dependencies);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We calculate the next state and the effects to perform, and then we will perform those effects.&lt;/p&gt;&lt;p&gt;But the question is, is this thread safe? &lt;/p&gt;&lt;p&gt;With the rules that we saw before regarding atoms, it is obvious that it is not, because one of the rules was that anything that happens outside that pure function that calculates the new state, could be subject of a race condition.&lt;/p&gt;&lt;p&gt;And were is the race condition here?&lt;/p&gt;&lt;p&gt;So let&amp;rsquo;s say that two threads come and calculate the new state and the effects to perform. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/028-race-condition.jpg&quot; alt=&quot;Race condition&quot; title=&quot;Race condition&quot; /&gt;&lt;/p&gt;&lt;p&gt;The atom takes care that those two threads make a decision that is atomic, consistent and isolated. So far, so good.&lt;/p&gt;&lt;p&gt;But now that we are outside the atom mechanism, we are subject to possible race conditions, so it could be that the thread-2 performs its side effects before thread-1. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/029-race-condition-2.jpg&quot; alt=&quot;Race condition&quot; title=&quot;Race condition&quot; /&gt;&lt;/p&gt;&lt;p&gt;And this may, or may not, be acceptable, depending on your business requirements.&lt;/p&gt;&lt;p&gt;So, atoms do not make all race conditions go away, but they should make it a lot more obvious of when they could happen.&lt;/p&gt;&lt;p&gt;If in your application this kind of race condition is not acceptable, a possible option could be to use an Agent. &lt;/p&gt;&lt;p&gt;Clojure Agents are basically like an atom, but it gives you the additional guarantee of being single threaded. If you are familiar with actors, they are a little bit like actors, in their concurrency model.&lt;/p&gt;&lt;p&gt;For our bonus application, this kind of race condition was not acceptable, but we decided to not use Agents, and stick with atoms, why?&lt;/p&gt;&lt;p&gt;Well, we were running multiple instances of the bonus service, so we are now in the realm of distributed system programming. &lt;/p&gt;&lt;p&gt;As the side-effects that our application needed to perform, could not be done in an atomic way, the distributed system theory tell you that you must chose between at-least-once or at-most-once semantics.&lt;/p&gt;&lt;p&gt;In our case, we look at each effect and for each one, we decided what was more appropriate. For those that were at-least-once, we did no coordination, nothing. &lt;/p&gt;&lt;p&gt;For the ones that required at-most-once semantics, we used a relational database as the coordination mechanism, as the DB provides ACID guarantees. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/030-race-condition-effects.gif&quot; alt=&quot;Race condition DB fix&quot; title=&quot;Race condition DB fix&quot; /&gt;&lt;/p&gt;&lt;p&gt;So before doing one an effect that required at-most-one semantics, the application will check with the DB, so that if there was a race between several instances to perform the same effect, only one will get the go ahead and execute it.&lt;/p&gt;&lt;p&gt;Note that it was still our pure functions, the ones calculating the effects, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/031-wrap-at-most-once.jpg&quot; alt=&quot;At most once&quot; title=&quot;At most once&quot; /&gt;&lt;/p&gt;&lt;p&gt;the ones that would decide when and which effects needed at-least-once or at-most-once semantics, and we did by wrapping the effects in a “at-most-once” policy.&lt;/p&gt;&lt;h3&gt;Co-Effects&lt;/h3&gt;&lt;p&gt;The last type of side effect are the co-effects. Co-effects are the inputs, the data, that our application needs to make their decisions. &lt;/p&gt;&lt;p&gt;For our bonus application, we basically needed 4 pieces of information: which clients have sign up for which bonus, the bets and deposit made by the client, and as the client has a limited amount of time to achieve the bonus, we also need to know what time it is.&lt;/p&gt;&lt;p&gt;As I hinted before, we kept all of our state in memory, and we were able to do this because the input source of the client events, was Kafka. If you are not familiar with Kafka, you can think about it like an immutable message queue, that remembers all the message go through it. &lt;/p&gt;&lt;p&gt;So that when the bonus application started, it will ask Kafka for all the messages in the last couple of months, and recalculate the current state from all those events. Also, each event would be timestamped, so the application will use the event time as the current time in its logic. &lt;/p&gt;&lt;p&gt;This is basically Event sourcing. At its heart, Event Sourcing and functional programming share a lot in common. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/033-event-sourcing.jpg&quot; alt=&quot;Event sourcing&quot; title=&quot;Event sourcing&quot; /&gt;&lt;/p&gt;&lt;p&gt;Event sourcing and functional programming go hand in hand.&lt;/p&gt;&lt;h3&gt;Benefits&lt;/h3&gt;&lt;p&gt;So this is how the whole thing looks like if you put everything together&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class KafkaConsumer {
    private AllDependencies allDependencies;
    private TheStateHolder theStateHolder;
    
    public void run() {
        while (!stop) {
            Bet bet = readNext();
            Effects effects = theStateHolder.event(bet);
            effects.run(allDependencies);
        }
    }
…
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;These are two dependencies that will be injected by your dependency injection framework of choice. &lt;/p&gt;&lt;p&gt;The object with all the dependencies required to do effects, and the state of the application.&lt;/p&gt;&lt;p&gt;Here we are using the Kafka polling api, so the KafkaConsumer will be a Thread that will be reading new events from the Kafka topic.&lt;/p&gt;&lt;p&gt;Then ask our state to advance time, update the state and to return the effects that we need to execute.&lt;/p&gt;&lt;p&gt;And last we ask the effects to execute themselves.&lt;/p&gt;&lt;p&gt;By following this approach, some interesting things happen to our code:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/034-benefits.jpg&quot; alt=&quot;Benefits&quot; title=&quot;Benefits&quot; /&gt;&lt;/p&gt;&lt;p&gt;First, our business objects had 0 getters or setters.&lt;/p&gt;&lt;p&gt;Also, our business logic was cleaner, because it will have no locks or synchronised methods, no try/catch blocks and no logging, because all of these will be done in a different part of the system. This removed a lot of noise from out business logic.&lt;/p&gt;&lt;p&gt;Also, there were no mocks in our unit tests, as both the inputs and outputs of our business logic where all plain values, so our unit tests were simpler. To test the side effects, all the impure parts of the codebase, we decide to use a small number of full-stack or integration tests.&lt;/p&gt;&lt;p&gt;And last, because we did not have to mock anything, we did not had any useless interfaces in the codebase. By useless interface, I mean those interfaces that just have one production implementation. &lt;/p&gt;&lt;h3&gt;Functional core, Imperative shell&lt;/h3&gt;&lt;p&gt;Now this style of design or architecture is called functional core, imperative shell. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/035-functional-core.jpg&quot; alt=&quot;Functional core, imperative shell&quot; title=&quot;Functional core, imperative shell&quot; /&gt;&lt;/p&gt;&lt;p&gt;The functional core is where all of our pure functions live, it is devoid of side-effects. The functional core is where we try to make as many decisions as possible, as it is easier to test and to change.&lt;/p&gt;&lt;p&gt;The imperative shell is where all the side effects live, all the ugly code about error handling, state and IO. We try to devoid the imperative shell from any conditionals, from any decisions.&lt;/p&gt;&lt;p&gt;And the aim is to try to make the functional core as big as possible, while we make the imperative shell as thin as possible.&lt;/p&gt;&lt;p&gt;As there are other architectures that have the same circular shape, I want to make something very clear.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/036-not-functional.jpg&quot; alt=&quot;Not so funtional&quot; title=&quot;Not so functional&quot; /&gt;&lt;/p&gt;&lt;p&gt;If you have some code like this, where your core class depends on some interface also in your core package, and then you inject the actual implementation at runtime, this piece of code in ClientBonus is not functional. You functional core cannot dependent on any piece of code that could do a side-effect, not even on an indirect way.&lt;/p&gt;&lt;p&gt;Now I am not saying that you shouldn&amp;rsquo;t do that, I am just pointing out that when you do this, all this code belongs to the imperative shell, so you do not have the benefits of your functional core.&lt;/p&gt;&lt;h1&gt;Dynamic (vs Static) typing&lt;/h1&gt;&lt;p&gt;Lets talk about the next big difference. Clojure is a dynamic language, while Java is a static one.&lt;/p&gt;&lt;p&gt;This is how a typical Clojure program looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;clientBonus = Map.of(
        &amp;quot;client&amp;quot;, Map.of(&amp;quot;id&amp;quot;, &amp;quot;123233&amp;quot;),
        &amp;quot;deposits&amp;quot;,
        List.of(
                Map.of(&amp;quot;amount&amp;quot;, 3,
                            &amp;quot;type&amp;quot;, &amp;quot;CASH&amp;quot;),
                Map.of(&amp;quot;amount&amp;quot;, 234,
                            &amp;quot;type&amp;quot;, &amp;quot;CARD&amp;quot;)));

((List) clientBonus.get(&amp;quot;deposits&amp;quot;))
        .stream()
        .collect(
                Collectors.summarizingInt(
                        m -&amp;gt; (int) ((Map) m).get(&amp;quot;amount&amp;quot;)));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;First, our domain objects are just a bunch of maps and list. And then our business logic consists on manipulating those maps and lists.&lt;/p&gt;&lt;p&gt;I am not sure what do you think about this, but for my Java sensibility, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/001-alien.jpg&quot; alt=&quot;alien&quot; title=&quot;Alien&quot; /&gt;&lt;/p&gt;&lt;p&gt;this is just hell, this code is the exact definition of unmaintainable code. If anybody in my team wrote that piece of code, I would demand for a very very good explanation of why are they doing it.&lt;/p&gt;&lt;p&gt;So in our bonus application, we decided to not do this at all, so we did not bring Clojure’s dynamic typing, and just use the Java type system.&lt;/p&gt;&lt;p&gt;But when you are writing Clojure code, surprisingly, this dynamic typing is less of an issue, and I think it is because the Clojure core api is tailor to work with this dynamic data structures, so is a lot less hassle than with the Java API.&lt;/p&gt;&lt;p&gt;But once you have write enough Clojure code, your mind starts to dysfunction, and then when you come back to Java, you start to have really weird thoughts. &lt;/p&gt;&lt;p&gt;So when you type this class, &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public class Bet {    
    private String id;   
    private int amount;
    private long timestamp;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;you start to wonder, well, what is the value of creating a new class? What do I get out of this instead of using a plain map? &lt;/p&gt;&lt;p&gt;And you notice that the first thing that you get is an almost useless toString method, you also get a broken equals and hashCode implementation. That is really annoying, but at least we have Lombok.&lt;/p&gt;&lt;p&gt;But what do you lose? Suddenly, you lose all the functionality that comes with maps, all of it, but what is worse, all the code that you have that works with maps, that understands maps, will not work with this new class. You have no code in the Java core API that can work, that can do anything, with this class. Except maybe for the reflection API. &lt;/p&gt;&lt;p&gt;What is more, how many libraries are you going to find in Github that work with this new class? None.&lt;/p&gt;&lt;p&gt;It is at this point when you start to understand what Alan Perlis meant with &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;It is better to have 100 functions operate on one data structure than 10 functions on 10 data structures. &lt;cite&gt;Alan Perlis&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Each new class is a new data structure, that comes with zero functionality, that is completely isolated from any other code. This hampering the reusability of your code.&lt;/p&gt;&lt;p&gt;But what if we just leave our Bet objects as plain data? &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:type :bet
 :id &amp;quot;client1&amp;quot;
 :amount 23
 :timestamp 123312321323}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You have a sensible toString, the one that you see there. &lt;/p&gt;&lt;p&gt;You also get a proper equals and hashCode for free.&lt;/p&gt;&lt;p&gt;But what is more important, you can still use all the core functionality that comes with your programming language, so you don’t start from scratch, you can reuse a lot of code. and you will find Github libraries that work with this code.&lt;/p&gt;&lt;p&gt;The Clojure community has embraced idea this idea of using plain data to represent as many things as possible. &lt;/p&gt;&lt;p&gt;For example, you can use plain data to represent an http request, so what your http servers have to do is work with this map as an input&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:request-method :get 
 :uri            &amp;quot;/foobaz&amp;quot;
 :query-params   {&amp;quot;somekey&amp;quot; &amp;quot;somevalue&amp;quot;}
 :headers        {&amp;quot;accept-encoding&amp;quot; &amp;quot;gzip, deflate&amp;quot; 
                  &amp;quot;connection&amp;quot; &amp;quot;close&amp;quot;}
 :body           nil
 :scheme         :http 
 :content-length 0
 :server-port    8080
 :server-name    &amp;quot;localhost&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;and just generate another map as an output. And you will do this by using the same core api. &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:status  200  
 :headers {&amp;quot;Content-Type&amp;quot; &amp;quot;text/html&amp;quot;} 
 :body    &amp;quot;Hello World&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Think how much easier your test would become.&lt;/p&gt;&lt;p&gt;But also, you can represent other things as plain data.&lt;/p&gt;&lt;p&gt;Sql queries:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:select [:id :client :amount]
 :from   [:transactions]
 :where  [:= :client &amp;quot;a&amp;quot;]}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;and the database result sets:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;[{:id 1 :client 32 :amount 3} 
 {:id 2 :client 87 :amount 7} 
 {:id 3 :client 32 :amount 4} 
 {:id 4 :client 40 :amount 6}]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;HTML and CSS:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;[:html     
 [:body         
  [:p &amp;quot;Count: 4&amp;quot;]
  [:p &amp;quot;Total: 20&amp;quot;]]]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Configuration:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:web-server          {:listen 8080} 
 :db-config           {:host     &amp;quot;xxxx&amp;quot;                        
                       :user     &amp;quot;xxxx&amp;quot;                        
                       :password &amp;quot;xxxx&amp;quot;} 
 :http-defaults       {:connection-timeout 10000                      
                       :request-timeout    10000                       
                       :max-connections    2000} 
 :user-service        {:url &amp;quot;http://user-service&amp;quot;                       
                       :connection-timeout 1000}}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Even data about your data, your metadata:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;{:id        :string  
 :name      :string  
 :deposits  [{:id        :string               
              :amount    :int               
              :timestamp :long}]}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So by embracing this idea of using plain data, you end up using the same core API to write &lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;your business logic&lt;/li&gt;
  &lt;li&gt;your infrastructure code&lt;/li&gt;
  &lt;li&gt;your configuration&lt;/li&gt;
  &lt;li&gt;your metadata.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Just one API that you need to learn and master.&lt;/p&gt;&lt;p&gt;So dynamic typing in Clojure is not as bad as you would expect, as it is brings a big chunk of benefits.&lt;/p&gt;&lt;h1&gt;Dynamic (vs Static) development&lt;/h1&gt;&lt;p&gt;But types is just one of the dynamic vs static differences between Clojure and Java. Clojure provides a dynamic development experience. What does this mean? In Clojure, the first thing that you do when you have to develop a new feature is to start your application, and then what you do is just keep changing that running application, until you are done, without ever stopping it.&lt;/p&gt;&lt;p&gt;You do this by using a REPL.&lt;/p&gt;&lt;p&gt;Of course Java now has something call a REPL, but &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/037-repl.jpg&quot; alt=&quot;Java vs Clojure REPL&quot; title=&quot;Java vs Clojure REPL&quot; /&gt;&lt;/p&gt;&lt;p&gt;just because they both have the same name, it doesn&amp;rsquo;t mean that they are the same.&lt;/p&gt;&lt;p&gt;With a proper REPL, you never build or start your application, you grow the application from inside, one tiny bit at a time. &lt;/p&gt;&lt;p&gt;A proper REPL gives you the same feeling, the same ergonomics, as a Unix Shell.&lt;/p&gt;&lt;p&gt;A proper REPL is like having a debugger all the time attached to you running JVM.&lt;/p&gt;&lt;p&gt;A proper REPL is the missing piece on your test-driven-development workflow.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://danlebrero.com/repl&quot;&gt;This talk&lt;/a&gt; is my best attempt to explain what a REPL is, but I think that a REPL is one of this very very alien things, that you really need to experience it, because it is very hard to understand or imagine.&lt;/p&gt;&lt;p&gt;A proper REPL is the thing that I miss the most when working with Java.&lt;/p&gt;&lt;h1&gt;Lisp (vs Fortan)&lt;/h1&gt;&lt;p&gt;Ok, last section of the talk.&lt;/p&gt;&lt;p&gt;For our bonus project we obviously did not use the Clojure syntax, because if I did, I wouldn’t be here giving this talk. &lt;/p&gt;&lt;p&gt;But for all of you that run away screaming whenever you see some Lisp, I have some good news for you.&lt;/p&gt;&lt;p&gt;The first thing is that, like other modern JVM languages, in Clojure you don’t have to type semicolons! This, I think we all agree, is a huge improvement over Java. &lt;/p&gt;&lt;p&gt;In fact, this feature is so awesome, it is such a huge productivity boost, that Clojure goes even further, and in Clojure, commas are optional! Think about all those millions and millions of commas that you have typed.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/039-no-more.jpg&quot; alt=&quot;No more commas&quot; title=&quot;No more commas&quot; /&gt;&lt;/p&gt;&lt;p&gt;Imagine if you could get all that time back, I would be at least 20 years younger.&lt;/p&gt;&lt;p&gt;But I know what you are thinking&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/040-what-about-parenthesis.jpg&quot; alt=&quot;What about parenthesis&quot; title=&quot;What about parenthesis&quot; /&gt;&lt;/p&gt;&lt;p&gt;what about all those parenthesis that Lisps is infamous for? Well, even here I have good news for you.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;.filter(removeCsvHeaders(firstHeader))
.map(splitCsvString())
.map(convertCsvToMap(csvHeaders))
.map(convertToJson(eventCreator))
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;Clojure&quot;&gt;(filter not-header?)
(map parse-csv-line)
(map (partial zipmap headers))
(map -&amp;gt;event)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Those are two pieces of code from one of my teams. When we were learning Apache Spark, we happen to write basically the same application both in Clojure and Java. This is the main logic of the application, and as you can see they are the same, but there is an important difference. &lt;/p&gt;&lt;p&gt;Let’s count parenthesis. 1, 2, 3 … The Java version has 16 parenthesis. And how many does the Clojure one has? 10. So the Clojure version has 40% less parenthesis.&lt;/p&gt;&lt;p&gt;But not only that, the Clojure version of the application, had one tenth of the code. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/041-java-apps-more-parens.jpg&quot; alt=&quot;Java more parens&quot; title=&quot;Java more parens&quot; /&gt;&lt;/p&gt;&lt;p&gt;One tenth, imagine if you could delete 90% of your code.&lt;/p&gt;&lt;p&gt;Ok, enough of silly jokes. Let&amp;rsquo;s look at why Lisp people are so in love with their parenthesis. For this, I am very sorry, but I am going to have to show you some more Clojure code.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;List.of(
        new Symbol(&amp;quot;defn&amp;quot;),
        new Symbol(&amp;quot;plus-one&amp;quot;),
        List.of(
                new Symbol(&amp;quot;a&amp;quot;),
                new Symbol(&amp;quot;b&amp;quot;)),
        Map.of(
                new Keyword(&amp;quot;time&amp;quot;), List.of(new Symbol(&amp;quot;System/currentTimeMillis&amp;quot;)),
                new Keyword(&amp;quot;result&amp;quot;), List.of(
                        new Symbol(&amp;quot;+&amp;quot;),
                        new Symbol(&amp;quot;a&amp;quot;),
                        new Symbol(&amp;quot;b&amp;quot;),
                        new Long(1))));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This is a typical Clojure program. We are defining a function that takes two parameters and returns a map with the sum of those parameters, plus one.&lt;/p&gt;&lt;p&gt;Ok, maybe Clojure is a little bit less verbose than this, but this is essentially what you are doing when you write, when you type Clojure. What is this? Your code are just lists and maps, this is what we mean when we say that in Lisp, code is data, because look at this, it is actual data.&lt;/p&gt;&lt;p&gt;And because it is data, we can manipulate it, we can generate it, we can analyse it, with exactly the same tools, the same api, that we use for our Business logic, our infrastructure code, our configuration.&lt;/p&gt;&lt;p&gt;Metaprogramming, so writing programs that write programs, becomes a matter of working with lists and maps. This is very simple, yet extremely powerful.&lt;/p&gt;&lt;p&gt;This is why Lispers love their parenthesis so much. &lt;/p&gt;&lt;h1&gt;Summary&lt;/h1&gt;&lt;p&gt;So in summary &amp;hellip;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/035-functional-core.jpg&quot; alt=&quot;Functional core, imperative shell&quot; title=&quot;Functional core, imperative shell&quot; /&gt;&lt;/p&gt;&lt;p&gt;Try to write as many pure functions as possible, they will make your application easier to understand and easier to change.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/042-types-balance.jpg&quot; alt=&quot;Type balance&quot; title=&quot;Type balance&quot; /&gt;&lt;/p&gt;&lt;p&gt;After using Clojure, I see the dynamic vs static typing as a trade off. It is true that in Clojure I miss some of the refactoring capabilities that I get with a good Java IDE, and that I sometimes waste time chasing some misspelt word, but Clojure’s focus on data, somehow, makes the trade off a fair one.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/043-development-balance.jpg&quot; alt=&quot;Development experience balance&quot; title=&quot;Development experience balance&quot; /&gt;&lt;/p&gt;&lt;p&gt;But after enjoying Clojure’s dynamic development experience, this is something I would never ever want to let go.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/044-parens-scare.jpg&quot; alt=&quot;Parens are scary&quot; title=&quot;Parens are scary&quot; /&gt;&lt;/p&gt;&lt;p&gt;And please do not be scared about parenthesis. The same way you would not write Java without an IDE, you will not write Clojure without one. And the IDE is going to take care of all those scary parenthesis. And remember that there is a very good and powerful reason for them.&lt;/p&gt;&lt;p&gt;I want to finish with another quote by Alan Perlis: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A Language that doesn’t affect the way you think about programming, is not worth knowing.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Clojure has been, for me, one of those languages. Immutability by default, functional programming, dynamic typing and the repl, Lisp syntax and macros, everything as simple data.&lt;/p&gt;&lt;p&gt;All those things have been big lessons for me. They have change the way I approach problems, they have change the way I build applications, they have change the way I design systems.&lt;/p&gt;&lt;p&gt;But none of those has been Clojure’s most important lesson.&lt;/p&gt;&lt;p&gt;The key insight, the most profound lesson on my journey learning Clojure, has been that I have been how close minded I have always been to different ideas, just because of the fact that they were different to what I was used to.&lt;/p&gt;&lt;p&gt;If any of you had told me 5 or 6 years ago to learn a dynamic lisp, I would had say “no way, I am not going to waste my time”. And yet, here I am, preaching about Clojure. &lt;/p&gt;&lt;p&gt;Clojure has open my mind to be curious about different ideas, even those that initially may seem disgusting.&lt;/p&gt;&lt;p&gt;So I want to encourage everybody to learn this year, or next year, a new language, and it doesn&amp;rsquo;t need to be Clojure, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/045-languages.jpg&quot; alt=&quot;Languages&quot; title=&quot;Languages&quot; /&gt;&lt;/p&gt;&lt;p&gt;but pick something completely different to what you are used to, something that makes you uneasy, something completely alien.&lt;/p&gt;&lt;p&gt;I am sure that on that journey, you will learn something that you will want to bring to your day to day job.&lt;/p&gt;&lt;p&gt;And in the worst case, &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/java-with-a-clojure-mindset/046-weird.jpg&quot; alt=&quot;Weird&quot; title=&quot;Weird&quot; /&gt;&lt;/p&gt;&lt;p&gt;it will just make you weirder and harder to relate to.&lt;/p&gt;&lt;p&gt;Thanks a lot for you time.&lt;/p&gt;&lt;p&gt;But before you leave, please have a quick look at this video:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/MSFvEK8asY8&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;
</description>
</item>
<item>
<title>
Architecture decisions: the belligerent contrarian and the rule of three
</title>
<link>
https://danlebrero.com/2019/02/27/architecture-decisions-beligerent-contrarian-rule-of-three/
</link>
<guid>
https://danlebrero.com/2019/02/27/architecture-decisions-beligerent-contrarian-rule-of-three/
</guid>
<pubDate>
Wed, 27 Feb 2019 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;Here are a couple of simple rules that have helped me a great deal on my years as a software architect.&lt;/p&gt;&lt;h1&gt;The rule of three&lt;/h1&gt;&lt;p&gt;The first rule is that, when you have to make any decision, there must always be at least three possible alternatives in consideration. &lt;/p&gt;&lt;p&gt;To find this third option, we will need to look at the problem from unusual and novel angles, or bring back options that were discarded because we thought they were obviously wrong.&lt;/p&gt;&lt;p&gt;This is basically a way of enforcing brainstorming, but using a clear rule and not calling it brainstorming, which in my experience somehow helps.&lt;/p&gt;&lt;h1&gt;The rule of three&lt;/h1&gt;&lt;p&gt;The second rule of three is that there must be at least three people involved in the decision.&lt;/p&gt;&lt;p&gt;It is very unlikely that all three people will have the same background and bias, so the alternatives will be looking at from more diverse points of view.&lt;/p&gt;&lt;h1&gt;The belligerent contrarian&lt;/h1&gt;&lt;p&gt;Having three options and three people in the room is useless if everybody has the same preferred option. There must be at least one person that disagreed with the group and have a good reason to prefer a different option.&lt;/p&gt;&lt;p&gt;If there is no such person, then there is not going to be a real debate about which option is the most adequate, as we all will be biased to make sure that our preferred option looks the best. Having to defend our position will make it very obvious if we have solid reasons to make that choice.&lt;/p&gt;&lt;p&gt;Unfortunately, a lot of times there is no such person, which means that you must be willing to defend one other option, even if you think is not the best one. &lt;/p&gt;&lt;p&gt;This means that you have to make sure that you are the last one on expressing your opinion, so that if the rest of the group all choose an option, you can pick another one.&lt;/p&gt;&lt;p&gt;But it also means that you have to have a deep understanding of the weaknesses and shortcomings of the preferred option, plus the benefits or possible benefits of the other options. This is an excellent exercise to look with honesty at your own choices and to make sure that the group understands the trade-offs.&lt;/p&gt;&lt;p&gt;Being the belligerent contrarian is not a comfortable position as a lot of times you are going to be defending a position that looks silly or that is obviously wrong, which means that you have to be comfortable with your status within the company and the people in the meeting. This role is not suitable for junior architects or if your ego doesn&amp;rsquo;t allow you to be wrong.&lt;/p&gt;&lt;p&gt;If you decide to play this role, it is important to not say &lt;a href=&quot;https://en.wikipedia.org/wiki/Devil's_advocate&quot;&gt;&amp;ldquo;I am playing Devil’s advocate&amp;rdquo;&lt;/a&gt; as if you do so, people will not take your position seriously. If it makes you feel more comfortable, you can say so after the decision has been made.&lt;/p&gt;&lt;h1&gt;The rule of three&lt;/h1&gt;&lt;p&gt;And as we are talking about the rule of three, I cannot pass the opportunity to mention a design level rule of three: there is no duplication until you have three copies of the same code or logic.&lt;/p&gt;&lt;p&gt;The third time that you write the same piece of logic is when you can evaluate if it is worth moving that piece of code to a common library or class. &lt;/p&gt;&lt;p&gt;Until you have three samples, you cannot be sure that the common code will actually be common enough.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;It is surprising how many times the new third option turns up to be the one implemented, either because we find a better alternative or because we get over our biases.&lt;/p&gt;&lt;p&gt;Playing the belligerent contrarian, or devil’s advocate, is sometimes fun, sometimes annoying, sometimes distressing, but at the end, having a good debate about the options means that the team ends up moving with more confidence on the decision made, and it is more aware of the possible pitfalls.&lt;/p&gt;
</description>
</item>
<item>
<title>
Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen
</title>
<link>
https://danlebrero.com/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/
</link>
<guid>
https://danlebrero.com/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/
</guid>
<pubDate>
Mon, 18 Feb 2019 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;Perhaps the world does not need another “X reasons for TDD”, but I find most people miss these four very important reasons for following a test-first approach:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Baby steps&lt;/li&gt;
  &lt;li&gt;ROI&lt;/li&gt;
  &lt;li&gt;Evil Manager Syndrome&lt;/li&gt;
  &lt;li&gt;Watching the watchmen&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;Baby steps&lt;/h2&gt;&lt;p&gt;The TDD (Test-driven Development) workflow encourages you to make progress in small baby steps. With this workflow, you feel like a small meerkat that every few steps stands up to check its environment.&lt;/p&gt;&lt;p&gt;Maybe not the fastest way to reach your destination but, without a doubt, the safest. But as we do not run the risk of being eaten, what does it mean for us to be safer? &lt;/p&gt;&lt;p&gt;After each small change, we check that no bug was introduced. And if a bug is introduced, it is obvious when and where the bug was introduced: in the last tiny step. &lt;/p&gt;&lt;p&gt;Finding the bug becomes trivial. And bugs are the second worst time wasters in software development:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;First, you spend time writing it.&lt;/li&gt;
  &lt;li&gt;Then somebody has to review the bug.&lt;/li&gt;
  &lt;li&gt;Then you have to release it to production.&lt;/li&gt;
  &lt;li&gt;Your client has to report it.&lt;/li&gt;
  &lt;li&gt;You triage the impact.&lt;/li&gt;
  &lt;li&gt;Your manager has to prioritize it.&lt;/li&gt;
  &lt;li&gt;You have to fill up some JIRA issue.&lt;/li&gt;
  &lt;li&gt;You explain it to your QA.&lt;/li&gt;
  &lt;li&gt;You have to debug the code, code that by now is probably completely alien to you as probably it has been days or weeks since you wrote it.&lt;/li&gt;
  &lt;li&gt;Then you fix it.&lt;/li&gt;
  &lt;li&gt;Somebody reviews the fix.&lt;/li&gt;
  &lt;li&gt;And at last, you release the fix to production.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;So, paradoxically, doing baby steps and being safer can also mean going faster, depending on how many bugs you write.&lt;/p&gt;&lt;p&gt;This principle is in fact exactly the same as the &lt;a href=&quot;https://continuousdelivery.com/principles/#work-in-small-batches&quot;&gt;“Small batches” principle&lt;/a&gt; in Continuous Delivery.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Moral:&lt;/em&gt; if you don&amp;rsquo;t write bugs, do not waste your time writing tests.&lt;/p&gt;&lt;h3&gt;How small should the baby steps be?&lt;/h3&gt;&lt;p&gt;As small as possible, but its lower limit it going to depend on how fast your test suite is:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/why-tdd/changes-between-runs.jpg&quot; alt=&quot;Changes between runs&quot; title=&quot;Changes between runs&quot; /&gt;&lt;/p&gt;&lt;p&gt;Even if you try to be very disciplined about running your tests after every small change, if your test suite is slow, you will end up making your change batch size bigger, just to avoid the pain of waiting. &lt;/p&gt;&lt;p&gt;Hence, if you want to influence how often the tests are run, you need to make sure that they run very fast.&lt;/p&gt;&lt;h2&gt;Return on Investment (ROI)&lt;/h2&gt;&lt;p&gt;A test suite is an investment and, as with any investment, you want to have a high positive return on investment (ROI). ROI can be calculated as:&lt;/p&gt;&lt;p&gt;&lt;em&gt;ROI = (Gain from Investment - Cost of Investment) / Cost of Investment&lt;/em&gt;&lt;/p&gt;&lt;p&gt;The costs of a test suite are pretty obvious: time to build and maintain it. There is also the ongoing cost of running it (another reason why faster test suites are better).&lt;/p&gt;&lt;p&gt;There are several benefits to a test suite, but we can sum them all up as time saved while making changes.&lt;/p&gt;&lt;p&gt;So the ROI of a test suite can be calculated as:&lt;/p&gt;&lt;p&gt;&lt;em&gt;ROI = (time saved - time spent) / time spent&lt;/em&gt;&lt;/p&gt;&lt;p&gt;If we plot the ROI (in red) with a test-last approach when building a new feature, we can imagine something like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/why-tdd/roi-test-last.jpg&quot; alt=&quot;ROI test last&quot; title=&quot;ROI test last&quot; /&gt;&lt;/p&gt;&lt;p&gt;If you never ever touch that part of the codebase again, the tests are the worst of your investments, as it will not start to pay off until you start making changes again in that particular area of the codebase. &lt;/p&gt;&lt;p&gt;Let’s compare it with a test-first approach:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/why-tdd/roi-test-first.jpg&quot; alt=&quot;ROI test first&quot; title=&quot;ROI test first&quot; /&gt;&lt;/p&gt;&lt;p&gt;Tests start to pay off immediately, as you are actively changing the codebase covered by those tests. &lt;/p&gt;&lt;p&gt;&lt;em&gt;Moral:&lt;/em&gt; &lt;strong&gt;if&lt;/strong&gt; you write a test, write it first. Note the highlighted &lt;strong&gt;if&lt;/strong&gt; in the previous statement.&lt;/p&gt;&lt;h2&gt;Evil Manager Syndrome&lt;/h2&gt;&lt;p&gt;&amp;ldquo;I’m not given time to write tests&amp;rdquo; is probably one of our favorites excuses when we are questioned about why our code coverage is less than ideal. It is not your fault, it is your evil manager’s fault:&lt;/p&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “We have to deliver yesterday!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Team: “But we haven’t finished yet!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “Let cut some corners!!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Team: “Let&amp;rsquo;s skip writing the tests until we have time!!!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “Awesome! You are a fantastic team!!!!!”&lt;br/&gt;&lt;/p&gt;&lt;p&gt;And this is how typically the spiral to the crying rewrite starts:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/why-tdd/spiral-to-crying-rewrite.jpg&quot; alt=&quot;Spiral to the crying rewrite&quot; title=&quot;Spiral to the crying rewrite&quot; /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;As you have little tests, you cannot refactor.&lt;/li&gt;
  &lt;li&gt;As you cannot refactor, your codebase starts to accumulate garbage.&lt;/li&gt;
  &lt;li&gt;The more garbage in your codebase, the longer features take to be implemented.&lt;/li&gt;
  &lt;li&gt;The longer features take to be implemented, the more time pressure there is.&lt;/li&gt;
  &lt;li&gt;The more time pressure, the fewer tests.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;And this completes the downward spiral that always ends up with us, developers, crying for a complete rewrite.&lt;/p&gt;&lt;p&gt;Let’s see the same situation but when doing test-first:&lt;/p&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “We have to deliver yesterday!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Team: “But we haven’t finished yet!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “Let cut some corners!!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Team: “What features can we cut?!?!?!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “Cutting features??? Do not write any tests!!!!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Team: “We already wrote them!!!!!!”&lt;br/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;Manager: “Bastards!!!!!!!”&lt;br/&gt;&lt;/p&gt;&lt;p&gt;And then follows a long conversation about what features to trim, which your manager hates. Welcome to agile.&lt;/p&gt;&lt;h2&gt;Watching the watchman&lt;/h2&gt;&lt;p&gt;Seeing a test fail is the test that tests if the test tests what is supposed to test.&lt;/p&gt;&lt;p&gt;Or in simpler words, how do you know that your test doesn&amp;rsquo;t have any bugs? Who watches your watchmen?&lt;/p&gt;&lt;p&gt;If you write a test first and you see it fail, there is a strong indication that there is some piece of production code, some logic, that is not there.&lt;/p&gt;&lt;p&gt;If you write the test and you never see it fail, you don’t know if it is because you’ve ready implemented a feature, or because you forgot on an assert in your test or the setup code is not correct.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/why-tdd/watchmen.jpg&quot; alt=&quot;watchmen&quot; title=&quot;Watching your tests&quot; /&gt;&lt;/p&gt;&lt;p&gt;Moral: Writing your tests first keeps the watchmen honest.&lt;/p&gt;&lt;h2&gt;Test-first all the things?&lt;/h2&gt;&lt;p&gt;But no matter how many reasons you have, when you present this test-first approach, most of the time you get the ominous answer: “How can I write the tests first if I don’t know what I am going to build?”&lt;/p&gt;&lt;p&gt;And as any experienced TDD developer will tell you, that is BS &amp;hellip; but &lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;not always&lt;/a&gt;.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
Kodsnack podcast: The immediate feedback loop 
</title>
<link>
https://danlebrero.com/2019/01/10/kodsnack-clojure-repl-feedback-loop-automation/
</link>
<guid>
https://danlebrero.com/2019/01/10/kodsnack-clojure-repl-feedback-loop-automation/
</guid>
<pubDate>
Thu, 10 Jan 2019 09:00:00 +0100
</pubDate>
<description>
&lt;p&gt;I was at the KodSnack podcast talking about how I got into Clojure, feedback loops, the REPL and building your own tools: &lt;a href=&quot;https://kodsnack.se/294/&quot;&gt;https://kodsnack.se/294/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Enjoy!&lt;/p&gt;
</description>
</item>
<item>
<title>
If I ever write a book ...
</title>
<link>
https://danlebrero.com/2018/12/17/if-i-ever-write-a-book/
</link>
<guid>
https://danlebrero.com/2018/12/17/if-i-ever-write-a-book/
</guid>
<pubDate>
Mon, 17 Dec 2018 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;Autobiography. No other Spaniards will be harmed during its production, maybe.&lt;/p&gt;
</description>
</item>
<item>
<title>
RocksDB range queries in KafkaStream: dealing with big results 
</title>
<link>
https://danlebrero.com/2018/12/17/big-results-in-kafka-streams-range-query-rocksdb/
</link>
<guid>
https://danlebrero.com/2018/12/17/big-results-in-kafka-streams-range-query-rocksdb/
</guid>
<pubDate>
Mon, 17 Dec 2018 09:25:00 +0100
</pubDate>
<description>
&lt;p&gt;There was an interesting question on the &lt;a href=&quot;https://confluentcommunity.slack.com/archives/C48AHTCUQ/p1538999729000100&quot;&gt;Confluence Slack channel&lt;/a&gt;, paraphrasing:&lt;/p&gt;&lt;p&gt;&lt;em&gt;Hi,&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;I created a Kafka Streams app &amp;hellip; where external processes put a command message on an &amp;ldquo;input.cmd&amp;rdquo; topic with a pending status, the app process it and put an updated command message on the same &amp;ldquo;input.cmd&amp;rdquo; topic with a new status indicating if it was processed with or without errors.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;Now I need to create a stream app that will receive a file containing &lt;strong&gt;lots of commands&lt;/strong&gt; (~100k), send each command to the existing process, read the result of the processing (the updated command) and produce a new file with the result of each line.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;Is there a good way to do this without incurring in saving very big objects in the DataStore?&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;My problem is that I am collecting the completed messages and keeping them in the Store, but am struggling to make an efficient algorithm that would not use too much memory since the messages can come back in any order and from many files (lots of files might be still under processing).&lt;/em&gt;&lt;/p&gt;&lt;p&gt;Note that the issue here is not that the Kafka messages are too big (&lt;a href=&quot;https://stackoverflow.com/questions/21020347/how-can-i-send-large-messages-with-kafka-over-15mb&quot;&gt;&amp;gt;1mb&lt;/a&gt;), but that the consuming application has to collect hundreds of thousands of small messages to produce the result.&lt;/p&gt;&lt;p&gt;A naive approach would mean storing in our KafkaStreams application an state object like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;{:file &amp;quot;a file&amp;quot;
 :partial-results [{:line 1      :result &amp;quot;result1&amp;quot;}
                   {:line 110202 :result &amp;quot;result21&amp;quot;}
                   {:line 329323 :result &amp;quot;result32&amp;quot;}
                   {:line 132423 :result &amp;quot;result412&amp;quot;}
                   {:line 62     :result &amp;quot;result14234&amp;quot;}
                   {:line 33     :result &amp;quot;result1121132321&amp;quot;}
                   ,,, ;; Hundred of thousands more here
                   ]}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can imagine how expensive would be to deserialize, update and serialize back the state once we have 100k lines in that array, every time a new line is processed. The object could even end up not fitting in the JVM heap.&lt;/p&gt;&lt;h2&gt;External storage&lt;/h2&gt;&lt;p&gt;The developer that asked the question has a very reasonable solution:&lt;/p&gt;&lt;p&gt;&lt;em&gt;The solution I am implementing is to use Cassandra (we already use it) to keep the file ordered. Every completed message that arrive, I put the corresponding result line in this table.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;So we use the capabilities of another storage database to store and later retrieve the results in the correct order. &lt;/p&gt;&lt;p&gt;This is probably fine, if you have Cassandra running, but what if you do not, or if you prefer to have less moving parts in your application?&lt;/p&gt;&lt;h1&gt;RocksDB range queries&lt;/h1&gt;&lt;p&gt;It happens that KafkaStream&amp;rsquo;s state store provides a &lt;a href=&quot;https://kafka.apache.org/20/javadoc/org/apache/kafka/streams/state/ReadOnlyKeyValueStore.html#range-K-K-&quot;&gt;range query&lt;/a&gt;, that returns all the objects stored in a StateStore between two keys. &lt;/p&gt;&lt;p&gt;Let&amp;rsquo;s see how we can use this API to implement an efficient way to store and retrieve big results. &lt;/p&gt;&lt;h2&gt;The architecture&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kafka-big-results-rocksdb-range-query.jpg&quot; alt=&quot;kafka rocksdb big result&quot; title=&quot;kafka rocksdb big result&quot; /&gt;&lt;/p&gt;&lt;p&gt;The &lt;a href=&quot;https://www.enterpriseintegrationpatterns.com/patterns/messaging/Sequencer.html&quot;&gt;splitter process&lt;/a&gt; reads the very big file with those 100k of commands and puts each command in some &lt;code&gt;pending&lt;/code&gt; topic. Once the splitter has finished pushing all the pending commands, it will know how many lines/commands the file had, and it will push this total lines to our &lt;a href=&quot;https://www.enterpriseintegrationpatterns.com/patterns/messaging/Aggregator.html&quot;&gt;aggregator&amp;rsquo;s&lt;/a&gt; input topic. The aggregator will use this number to know when it has received all the processed commands.&lt;/p&gt;&lt;p&gt;Note that the splitter will use no key when pushing to the &lt;code&gt;pending&lt;/code&gt; topic so that the commands are evenly distributed to all partitions (&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/FAQ#FAQ-Whyisdatanotevenlydistributedamongpartitionswhenapartitioningkeyisnotspecified?&quot;&gt;more or less&lt;/a&gt;), but then, all the processed commands for a given file must end up in the same &lt;code&gt;to.aggregate&lt;/code&gt; partition so that they end up being consumed by the same aggregator process. We will use the name of the file as the key, assuming is unique enough.&lt;/p&gt;&lt;p&gt;Given that the splitter does not know before hand the number of lines in the file, and that the commands will be processed in a semi-random order, our aggregator input could look like:&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Key &lt;/th&gt;
      &lt;th&gt;Line Number &lt;/th&gt;
      &lt;th&gt;Partial Result &lt;/th&gt;
      &lt;th&gt;Total Lines &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;file1 &lt;/td&gt;
      &lt;td&gt;2 &lt;/td&gt;
      &lt;td&gt;SecondLine &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;file1 &lt;/td&gt;
      &lt;td&gt;3 &lt;/td&gt;
      &lt;td&gt;LastLine &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;file1 &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;file1 &lt;/td&gt;
      &lt;td&gt;1 &lt;/td&gt;
      &lt;td&gt;FirstLine &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;&lt;p&gt;Notice that in this case, our aggregator receives two lines before it knows that there should be a total of three, and that it receives line 1 the last.&lt;/p&gt;&lt;h2&gt;The state&lt;/h2&gt;&lt;p&gt;Instead of just storing one piece of state on the aggregator with all the partial results on it, what we are going to do is move the partial results out of it. &lt;/p&gt;&lt;p&gt;To do that, we will store each partial result with a key like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn line-key [file-name line-number]
  (format &amp;quot;%s-part-%019d&amp;quot; file-name line-number))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So the result for the first line will be stored with a key like &lt;code&gt;thefilename-part-00000000001&lt;/code&gt;. &lt;/p&gt;&lt;p&gt;This way, once we know that our aggregator app has received all the partial results for a file, we can use the StateStore &lt;code&gt;range&lt;/code&gt; query to retrieve all partial results by using the range &lt;code&gt;thefilename-part-00000000001&lt;/code&gt; to &lt;code&gt;thefilename-part-00000xxxxxxx&lt;/code&gt;, being &lt;code&gt;xxxxxx&lt;/code&gt; the total number of lines. In code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn all-results-received [store file-id total-lines]
  (log/info &amp;quot;Writing file &amp;quot; file-id &amp;quot;total records&amp;quot; total-lines)
  (with-open [all-records (.range store (line-key file-id 0) (line-key file-id total-lines))
              writer (io/writer file-id)]
    (doseq [^KeyValue record (iterator-seq all-records)]
      (.write writer (str (.key record) &amp;quot;-&amp;gt;&amp;quot; (.value record) &amp;quot;\n&amp;quot;))))
  (log/info &amp;quot;Deleting&amp;quot;)
  (let [all-keys (map
                   (fn [i] (KeyValue. (line-key file-id i) nil))
                   (range 1 (inc total-lines)))]
    (doseq [keys-batch (partition-all 1000 all-keys)]
      (.putAll store keys-batch)))
  (.delete store file-id))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Remember that the iterator returned by RocksDB is lazy, so we do not need to realize the whole result in memory.&lt;/p&gt;&lt;p&gt;To know if we have received all the partial results, we just need to keep a count of how many we have seen so far, and compare that number with the total number of lines in the file:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn check-if-all-results-received [store file-id records-so-far total-lines]
  (when (= records-so-far total-lines)
    (all-results-received store file-id total-lines)
    {:finish file-id}))
  
(defn get-so-far [store file-id]
  (or (.get store file-id) {:so-far 0}))
  
(defn line-processed [store file-id {:keys [line-number partial-result]}]
  (let [{:keys [total-lines so-far]} (get-so-far store file-id)
        records-so-far (inc so-far)] ;; Increment counter
    (.put store (line-key file-id line-number) partial-result) ;; store partial result
    (.put store file-id {:total-lines total-lines :so-far records-so-far}) ;; store counter so far
    (check-if-all-results-received store file-id records-so-far total-lines)))

(defn total-lines-msg-arrived [store file-id total-lines]
  (let [{:keys [so-far]} (get-so-far store file-id)]
    (.put store file-id {:total-lines total-lines :so-far so-far}) ;; store total results
    (check-if-all-results-received store file-id so-far total-lines)))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note that this counter must be exact, so KafkaStream&amp;rsquo;s default &lt;code&gt;at-least-once&lt;/code&gt; semantics is not good enough in this case, we will need to configure the &lt;code&gt;exactly-once&lt;/code&gt; semantics. &lt;/p&gt;&lt;p&gt;If this becomes a performance bottleneck, we can go back to &lt;code&gt;at-least-once&lt;/code&gt; semantics and deal with any possible double count by doing a read-repair: when writing the final result file, if the number of records returned by the &lt;code&gt;range&lt;/code&gt; is different from the expected total, discard the generated file and set the &lt;code&gt;so-far&lt;/code&gt; counter to the correct number (the number of results returned by the &lt;code&gt;range&lt;/code&gt; query).&lt;/p&gt;&lt;h2&gt;A big but&lt;/h2&gt;&lt;p&gt;Unfortunately, there is a major &lt;em&gt;but&lt;/em&gt; on the &lt;a href=&quot;https://kafka.apache.org/20/javadoc/org/apache/kafka/streams/state/ReadOnlyKeyValueStore.html#range-K-K-&quot;&gt;range query&lt;/a&gt; documentation:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Get an iterator over a given range of keys. &amp;hellip; &lt;strong&gt;No ordering guarantees are provided&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;With no ordering guarantees, it means that we would need to sort the results in memory, which maybe ok, depending if the whole result fits in memory or not.&lt;/p&gt;&lt;h4&gt;Angering your architect&lt;/h4&gt;&lt;p&gt;If we dig a little bit on the source code of the &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/RocksDBStore.java#L512&quot;&gt;RocksDB range implementation&lt;/a&gt; we find the following comment: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;RocksDB&amp;rsquo;s JNI interface does not expose getters/setters that allow the comparator to be pluggable, and the default is lexicographic, so it&amp;rsquo;s safe to just force lexicographic comparator here for now.&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;So the actual implementation returns the results in lexicographical order, which means that it will return the partial results already ordered by line number, which is what we are looking for. &lt;/p&gt;&lt;p&gt;This means that, if we accept the trade-off of depending on some implementation detail, we can avoid the restriction that the result must be ordered in memory.&lt;/p&gt;&lt;h4&gt;Pissing off your architect&lt;/h4&gt;&lt;p&gt;But probably we are not using just a plain &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/RocksDBStore.java#L67&quot;&gt;RocksDbStore&lt;/a&gt;, but one wrapped by a &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/CachingKeyValueStore.java#L38&quot;&gt;CachingKeyValueStore&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;We could configure KafkaStreams to not use the cache, but given that we are already relying on some implementation detail &amp;hellip; we see that the CachingKeyValueStore &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/CachingKeyValueStore.java#L193&quot;&gt;range implementation&lt;/a&gt; returns a &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/MergedSortedCacheKeyValueBytesStoreIterator.java#27&quot;&gt;MergedSortedCacheKeyValueBytesStoreIterator&lt;/a&gt;, which its &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/AbstractMergedSortedCacheStoreIterator.java#L73&quot;&gt;next() implementation&lt;/a&gt; looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;    public KeyValue&amp;lt;K, V&amp;gt; next() {
        // Simplified code
        final Bytes nextCacheKey = cacheIterator.peekNextKey();
        final KS nextStoreKey = storeIterator.peekNextKey();
        //
        final int comparison = compare(nextCacheKey, nextStoreKey);
        if (comparison &amp;gt; 0) {
            return nextStoreValue(nextStoreKey);
        } else if (comparison &amp;lt; 0) {
            return nextCacheValue(nextCacheKey);
        } else {
            storeIterator.next();
            return nextCacheValue(nextCacheKey);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So the merge expects the keys of both the cache and the actual store (the RocksDB one) to be ordered in the same way, as it is comparing them and advancing either of the iterators depending on an order. &lt;/p&gt;&lt;p&gt;We could conclude that, given that the RocksDB iterator uses a lexicographical order, the cache must use the same order, but, just in case, let&amp;rsquo;s looks at the MergedSortedCacheKeyValueBytesStoreIterator &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/streams/src/main/java/org/apache/kafka/streams/state/internals/MergedSortedCacheKeyValueBytesStoreIterator.java#L57&quot;&gt;compare method&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;    public int compare(final Bytes cacheKey, final Bytes storeKey) {
        return cacheKey.compareTo(storeKey);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The cacheKey and the storeKey are &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/clients/src/main/java/org/apache/kafka/common/utils/Bytes.java#L26&quot;&gt;org.apache.kafka.common.utils.Bytes&lt;/a&gt;, which have a &lt;a href=&quot;https://github.com/apache/kafka/blob/2.0/clients/src/main/java/org/apache/kafka/common/utils/Bytes.java#L94&quot;&gt;compareTo implementation&lt;/a&gt; like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;Java&quot;&gt;public int compareTo(Bytes that) {
        return BYTES_LEXICO_COMPARATOR.compare(this.bytes, that.bytes);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So the CachingKeyValueStore also takes care of returning the range results in the order that we need! &lt;/p&gt;&lt;p&gt;If we do not mind relying on these &lt;em&gt;little&lt;/em&gt; implementation details, we can rely on KafkaStreams state stores &lt;code&gt;range&lt;/code&gt; queries to be able to work in an efficient way with any huge results, even those that do not fit in memory, plus we remove the the need to use any external storage, with the consequent improvement on the simplicity and availability of our application.&lt;/p&gt;&lt;p&gt;We all good! (Your architect may disagree about this statement and with any enthusiasm associated with it)&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;All the code can be found &lt;a href=&quot;https://github.com/dlebrero/kafka-streams-big-results&quot;&gt;here&lt;/a&gt;, including a Docker Compose file that will run Kafka, Zookeeper plus three instances of this service, so you can play around with it. The details of how to build and run it are in the repository.&lt;/p&gt;
</description>
</item>
<item>
<title>
REPL driven development: immediate feedback for you backend code
</title>
<link>
https://danlebrero.com/2018/11/26/repl-driven-development-immediate-feedback-for-you-backend/
</link>
<guid>
https://danlebrero.com/2018/11/26/repl-driven-development-immediate-feedback-for-you-backend/
</guid>
<pubDate>
Mon, 26 Nov 2018 08:30:00 +0100
</pubDate>
<description>
&lt;p&gt;In this talk I explain the motivations for using a REPL, and where and how it can be used. The talk is mostly a live demo.&lt;/p&gt;&lt;p&gt;Here are the slides in &lt;a href=&quot;/slides/repl-driven-development-geecon-2018.key&quot;&gt;keynote format&lt;/a&gt;, &lt;a href=&quot;/slides/repl-driven-development-geecon-2018.pptx&quot;&gt;ppt format (untested!)&lt;/a&gt; and &lt;a href=&quot;https://www.slideshare.net/DanielLebrero2/habits-ofefficientdevelopers&quot;&gt;SlideShare (somehow broken!)&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;And the video:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/ZkJX9ciI5aM&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;Feedback and questions welcomed!&lt;/p&gt;
&lt;hr/&gt;&lt;h1&gt;Transcript&lt;/h1&gt;&lt;p&gt;Hello everybody I am Daniel Lebrero, thanks for coming and we are here today to talk about REPL driven development. &lt;/p&gt;&lt;p&gt;But before we get started I have a confession to make. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/001-confession.jpeg&quot; alt=&quot;Confession&quot; title=&quot;Consession&quot; /&gt;&lt;/p&gt;&lt;p&gt;On my very very first job as a developer, I got to work with three technologies that made a profound and lasting impact on my career as a developer. &lt;/p&gt;&lt;p&gt;Those three technologies were Netscape, Internet Explorer 4 and Internet Explorer 5. &lt;/p&gt;&lt;p&gt;Thanks to those three technologies I decided to become back-end developer avoiding in any kind of front-end work for a lot of years. And I have been very happy Java developer, living in a world of XML and JSON.&lt;/p&gt;&lt;p&gt;But on a recent project, I got to work again with a front-end team, and I have to confess that since that day, since that project, I&amp;rsquo;m actually very very jealous of the front-end developers, up to the point that I&amp;rsquo;m contemplating the possibility of becoming one of them.&lt;/p&gt;&lt;p&gt;You may wonder, wow isn&amp;rsquo;t that crazy? &lt;/p&gt;&lt;p&gt;Maybe the JavaScript that these developers were using was somehow different from the JavaScript I that I have to learn and suffer 20 years ago?&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/002-js-the-good-parts.jpeg&quot; alt=&quot;Javacript the good parts&quot; title=&quot;Javascript the good parts&quot; /&gt;&lt;/p&gt;&lt;p&gt;You know, Javascript is evolving, but that is heart it&amp;rsquo;s still the same JavaScript.&lt;/p&gt;&lt;p&gt;Maybe they have fixed all those incompatibilities between browsers that used to drive me crazy? &lt;/p&gt;&lt;p&gt;Doesn&amp;rsquo;t seem so, seems that they are there, and now with all the phones and tablets is even worse.&lt;/p&gt;&lt;p&gt;To really understand why I&amp;rsquo;m so jealous of the front-end developers let&amp;rsquo;s look at a picture of myself doing some front-end work.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/004-css.gif&quot; alt=&quot;CSS&quot; title=&quot;CSS&quot; /&gt;&lt;/p&gt;&lt;p&gt;That&amp;rsquo;s me trying to get a two column layout working on Internet Explorer and Opera; and, as you can see, I&amp;rsquo;m not very good at it, and as much as I try and I try and I try, the result is always the same: it&amp;rsquo;s just a big pile of crap.&lt;/p&gt;&lt;p&gt;But even if CSS doesn&amp;rsquo;t make any sense at all, there is something really nice, there&amp;rsquo;s something really powerful, on that picture. So let&amp;rsquo;s look at it again.&lt;/p&gt;&lt;p&gt;Focus on Mr. Griffin&amp;rsquo;s workflow. &lt;/p&gt;&lt;p&gt;See how he pulls the string in one direction and he sees straight away, without any kind of delay what&amp;rsquo;s the result on the blind. And he doesn&amp;rsquo;t like it, he just pulls the string in a different direction. And he keeps doing that until he&amp;rsquo;s done.&lt;/p&gt;&lt;p&gt;Is this immediate feedback what I&amp;rsquo;m really missing on my day-to-day job as a back-end developer.&lt;/p&gt;&lt;h1&gt;Immediate feedback&lt;/h1&gt;&lt;p&gt;We know from agile, scrum and lean that feedback loops are very important, but why is this immediate feedback so important for us?&lt;/p&gt;&lt;p&gt;Because without this immediate feedback it&amp;rsquo;s very difficult to get into the flow or the zone.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/005-the-flow.jpeg&quot; alt=&quot;The Flow&quot; title=&quot;the flow&quot; /&gt;&lt;/p&gt;&lt;p&gt;The Flow is that state where you feel like Neo when he comes to realize that he&amp;rsquo;s the Chosen One. &lt;/p&gt;&lt;p&gt;When you are in the flow, you are so focused, that the real world disappears and is replaced with your code, it&amp;rsquo;s design, and the data flowing through it.&lt;/p&gt;&lt;p&gt;When you are in the flow no problem is difficult enough, no bug can hide from you, and your solutions are clean, simple and elegant.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/006-productivity.jpeg&quot; alt=&quot;productivity&quot; title=&quot;productivity&quot; /&gt;&lt;/p&gt;&lt;p&gt;When you are in the flow is when you are your most productive, and it&amp;rsquo;s not that you just produce more, what you produce is of better quality.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/007-joy.jpeg&quot; alt=&quot;joy&quot; title=&quot;joy&quot; /&gt;&lt;/p&gt;&lt;p&gt;But this productivity is just a nice side effect of being in the flow. What we are really looking for is that feeling of joy, that feeling of achievement, that feeling of creating something beautiful. &lt;/p&gt;&lt;p&gt;And is this feeling why I am, after 20 years, still a software developer.&lt;/p&gt;&lt;p&gt;But we all know it, you are there in the flow completely focus doing all your tips and tricks, and then&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/008-losing-focus.gif&quot; alt=&quot;losing focus&quot; title=&quot;losing focus&quot; /&gt;&lt;/p&gt;&lt;p&gt;sounds familiar? That&amp;rsquo;s how little it takes to push you out of the flow.&lt;/p&gt;&lt;p&gt;And we backend developers, we are experts at these kinds of interruptions.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/009-compiling.jpeg&quot; alt=&quot;compiling&quot; title=&quot;compiling&quot; /&gt; &lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://www.xkcd.com/303/&quot;&gt;https://www.xkcd.com/303/&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;We do them all the time, and we think they&amp;rsquo;re unavoidable, we even have comics about it. &lt;/p&gt;&lt;p&gt;But probably we have a laugh at it because we, maybe, don&amp;rsquo;t know what&amp;rsquo;s the cost of one interruption, of getting out of the flow.&lt;/p&gt;&lt;p&gt;There are a couple of studies that they tried to quantify what&amp;rsquo;s that cost is&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/010-interruption-cost.jpeg&quot; alt=&quot;interruption cost&quot; title=&quot;interruption cost&quot; /&gt;&lt;/p&gt;&lt;p&gt;it seems that, every time that you are interrupted, you waste between ten and fifteen minutes to get back the context of the tasks that you were doing. &lt;/p&gt;&lt;p&gt;So it takes you 15 minutes to start coding again, and the worrying thing is that if you look at what usability expert say &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/011-interrumption-limit.jpeg&quot; alt=&quot;interruption limit&quot; title=&quot;interruption limit&quot; /&gt;&lt;/p&gt;&lt;p&gt;if you want to keep your train of thought, interruptions cannot be longer than one second. And if your interruptions are longer than 10 seconds it&amp;rsquo;s quite probable that you will end up playing with your phone, or checking the news, or looking at your social media.&lt;/p&gt;&lt;p&gt;And who here is able to build, compile, start the runtime in in one second or less?&lt;/p&gt;&lt;p&gt;While preparing this presentation, as a test, I created a new Tomcat application using the company&amp;rsquo;s archetype, completely new, and I just timed how long it took the project to build, and start. The project had one controller with nothing, and one test doing nothing. &lt;/p&gt;&lt;p&gt;Who wants to give a guess of how long it took for the Tomcat to start an empty application? In my case it was 30 seconds, so it&amp;rsquo;s 30 seconds a long time or is 30 seconds at reasonable amount of time? &lt;/p&gt;&lt;p&gt;So let&amp;rsquo;s think for 30 seconds about 30 seconds. Okay, are you ready?&lt;/p&gt;&lt;p&gt;(30 seconds pause)&lt;/p&gt;&lt;p&gt;Those were 30 seconds, and I don&amp;rsquo;t know how I felt for you, but for me, standing up here in front of all of you, those were very long 30 seconds, and we do this all the time. &lt;/p&gt;&lt;p&gt;And this is not going to get any better, right? As we add more tests, more code, this is just going to get worse and worse and worse.&lt;/p&gt;&lt;p&gt;But we know this, so probably, if you want to keep yourself productive, you are already following the advice of that very wise man: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do not run Tomcat. Embrace TDD &lt;cite&gt;Dan Lebrero&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;so what you do is: you don&amp;rsquo;t run your application. What you do instead, you rely on a good unit test suite to know if you are making progress and to know if you didn&amp;rsquo;t break anything. &lt;/p&gt;&lt;p&gt;And remember that a good test suit it has to run in 10 seconds or less, if you don&amp;rsquo;t want to lose focus.&lt;/p&gt;&lt;p&gt;If you have been doing TDD long enough, you probably know that TDD has some shortcomings, so let&amp;rsquo;s look at them.&lt;/p&gt;&lt;p&gt;Who can tell me what mocks, stubs, fakes and spies have in common? &lt;/p&gt;&lt;p&gt;What are mocks? Mocks are just lies.&lt;/p&gt;&lt;p&gt;What are fakes? They are all just lies, right? &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/012-lies.jpeg&quot; alt=&quot;mocks are lies&quot; title=&quot;mocks are lies&quot; /&gt;&lt;/p&gt;&lt;p&gt;They are lies that we create to keep our test suite really fast, to keep our workflow sane, but they&amp;rsquo;re just lies.&lt;/p&gt;&lt;p&gt;They&amp;rsquo;re not the real thing. Now, I think we cannot avoid them, but what we really want is credible lies.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/013-credible-lies.jpeg&quot; alt=&quot;credible lies&quot; title=&quot;credible lies&quot; /&gt;&lt;/p&gt;&lt;p&gt;We want to create our mocks that they behave as the real thing. But how can you do that? &lt;/p&gt;&lt;p&gt;To be able to mock the real thing, you really really need to understand how the real world works. And how do you do that? &lt;/p&gt;&lt;p&gt;Well, if you are talking with the database the only way that I know is going and poking at the database, looking which tables are there, which columns, what are the possible range of ranges of values in those columns.&lt;/p&gt;&lt;p&gt;If you need to integrate with a third-party HTTP restful endpoint, the only way that I know is going there and poking at that thing. &lt;/p&gt;&lt;p&gt;And TDD doesn&amp;rsquo;t give us any kind of tool to be able to go and understand how the real world works, so we can go and do our mocking.&lt;/p&gt;&lt;p&gt;I have been doing TDD for 16-17 years now, and one thing that I&amp;rsquo;m learned is that, no matter how many tests you have, what&amp;rsquo;s your code coverage is&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/014-dancing-bugs.gif&quot; alt=&quot;dancing bugs&quot; title=&quot;dancing bugs&quot; /&gt;&lt;/p&gt;&lt;p&gt;they are always, always, some bugs. &lt;/p&gt;&lt;p&gt;You start the thing, maybe your configuration is not there or is not correct. Maybe your Spring wiring is not exactly the same as your unit testing. &lt;/p&gt;&lt;p&gt;So it&amp;rsquo;s always a situation that you&amp;rsquo;re going to have, and TDD again doesn&amp;rsquo;t give you anything when it breaks. &lt;/p&gt;&lt;h1&gt;So what do we want for our workflow?&lt;/h1&gt;
&lt;ol&gt;
  &lt;li&gt;We want to write code and get immediate feedback.&lt;/li&gt;
  &lt;li&gt;We don&amp;rsquo;t want to be sitting there waiting for the builds and the deploy to happen.&lt;/li&gt;
  &lt;li&gt;We want tools to understand the real world,&lt;/li&gt;
  &lt;li&gt;So we can have an easy way of creating faithful lies.&lt;/li&gt;
  &lt;li&gt;And we don&amp;rsquo;t want any surprises when the application is started.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;And what kind of tool we can use to get all of those things? You&amp;rsquo;re not going to be surprised, a REPL it&amp;rsquo;s a possible tool.&lt;/p&gt;&lt;p&gt;REPL stands for read, eval, print loop, and we have all probably used a REPL, usually in the form of a command-line interface. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/015-terminal.gif&quot; alt=&quot;terminal&quot; title=&quot;terminal&quot; /&gt;&lt;/p&gt;&lt;p&gt;So the console what is doing here? Is reading your command, then it evaluates, it runs it and then, it prints the result and then it loops so it goes back to reading to allow you to put another command.&lt;/p&gt;&lt;p&gt;Basically, a REPL is the same thing, with the only difference that, instead of writing Unix commands, what we are going to be doing is writing small pieces of code, that are going to be run in our program.&lt;/p&gt;&lt;p&gt;So, we&amp;rsquo;re going to do a demo, and what the demo is going to do is:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/016-repl-setup.gif&quot; alt=&quot;repl setup&quot; title=&quot;repl setup&quot; /&gt;&lt;/p&gt;&lt;p&gt;We are going to use Maven to start Tomcat, the Tomcat is going to start our application, our war, and inside the war what we are going to do is start a REPL inside our application. &lt;/p&gt;&lt;p&gt;Now because typing things in that really small screen is really cumbersome, the REPL, instead of reading from the standard input, what is going to do is going to be listening to a socket, and then from our favorite IDE, we&amp;rsquo;re just going to connect to that socket, and we&amp;rsquo;re going to be writing code where we always write code in your IDE. We&amp;rsquo;ll use a shortcut to send code to the application. The code will run inside the application, and then we will get back the results, that will be printed on the bottom window. &lt;/p&gt;&lt;p&gt;Okay, I&amp;rsquo;m going to do the demo in Clojure. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/017-clojure-lisp.jpeg&quot; alt=&quot;Clojure&quot; title=&quot;Clojure&quot; /&gt;&lt;/p&gt;&lt;p&gt;Clojure is, right now, my favorite language. Clojure is a lisp for the JVM and the point of the presentation is not about Clojure, so I don&amp;rsquo;t expect anybody to understand any of the code, and I&amp;rsquo;m not going to explain any of the code, so the only thing that I want you to do is focus on the workflow, on how, with a REPL, we do all the task and I want for you to compare it with how would you do it at work. &lt;/p&gt;&lt;p&gt;Now, one of the reasons to have a REPL, it&amp;rsquo;s to be able to learn the language. A REPL is a tool that it makes it a lot easier to learn a language, because it&amp;rsquo;s easier to play with it, so I&amp;rsquo;m going to add another item tp the list that is to learn a language.&lt;/p&gt;&lt;h1&gt;Demo&lt;/h1&gt;&lt;p&gt;(Demo start min 12:25, &lt;a href=&quot;#enddemo&quot;&gt;skip it&lt;/a&gt;)&lt;/p&gt;&lt;p&gt;So the very first thing that we are going to do, is to start the application. So this is the first thing that if you have a good REPL, before even writing or thinking about what you&amp;rsquo;re going to write, the very very first thing that you do is start the application. &lt;/p&gt;&lt;p&gt;This is usually the slowest bit of all the workflow and usually takes around 30 seconds or so. Now, this is something that you will do once a day, or maybe once a week, or once a month. It dependents on how often you need to change projects. You will try to keep it running all the time.&lt;/p&gt;&lt;p&gt;So what we are going to build is a small restful application that what it&amp;rsquo;s going go to the database, is going to get some transactions for a user, and it&amp;rsquo;s going to do some kind of summary, and it&amp;rsquo;s going to expose that on an HTTP endpoint.&lt;/p&gt;&lt;h4&gt;Basic workflow with REPL&lt;/h4&gt;&lt;p&gt;So we&amp;rsquo;re going to learn just a tiny tiny bit of Clojure, but this is so you get used to what I&amp;rsquo;m going to be doing all the time. &lt;/p&gt;&lt;p&gt;So in Clojure everything is a list, it&amp;rsquo;s a Lisp. &lt;/p&gt;&lt;p&gt;So the first thing on the list is the function that you want to call, and then zero or more parameters. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/repl-001.gif&quot; alt=&quot;repl basic&quot; title=&quot;repl basic&quot; /&gt;&lt;/p&gt;&lt;p&gt;I&amp;rsquo;m going to hit the magic shortcut and I&amp;rsquo;m going to send this particular piece of code, to the Tomcat, and the Tomcat is going to return me the response. So you see down here what I sent and got a three back. &lt;/p&gt;&lt;p&gt;Questions? Clear? Because I&amp;rsquo;m going to be doing it all the time.&lt;/p&gt;&lt;p&gt;So let&amp;rsquo;s say that you want to learn a little bit more about the plus function: what happens if you pass three parameters to the plus function? You just write the code, you run it, and you see that the Clojure allows you to do that. What happens if you just pass one parameter to the plus function? It also works. What happens if you pass no parameters? It returns zero. What happens if you pass a very long value? Seems to work. Let&amp;rsquo;s go for a longer value: it throws an arithmetic exception.&lt;/p&gt;&lt;p&gt;So what we are doing here is just trying to understand how the plus function works. And how we are doing it? We make small changes, we write small programs, and we run each of them, and we see straightaway what&amp;rsquo;s the result. &lt;/p&gt;&lt;p&gt;The same way we are doing it with the plus function, that is part of the core language, you could be doing it with absolutely any library that you want to explore. &lt;/p&gt;&lt;p&gt;This is enough Clojure. &lt;/p&gt;&lt;h4&gt;Testing configuration at REPL&lt;/h4&gt;&lt;p&gt;So now we are going to build the application for real. Again, we are going to go to database, and for a given client, we are going to get a list of all his transactions, and we are going to do something very simple to summarize all those transactions.&lt;/p&gt;&lt;p&gt;The first thing that I want to do it&amp;rsquo;s just connect to database, just check that our configuration to the database is correct. And to do that, we just try to run &lt;code&gt;select one from dual&lt;/code&gt;. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/repl-002.gif&quot; alt=&quot;repl jdbc&quot; title=&quot;repl jdbc&quot; /&gt;&lt;/p&gt;&lt;p&gt;And if you know Java, this is telling you there is no suitable driver for Postgres, so if I go to my pom, we see here that I forgot to uncomment it. And the usual thing that you will do is uncomment the dependencies and restart the JVM to see if works.&lt;/p&gt;&lt;p&gt;But instead of that, the JVM is able to load code from anywhere and it&amp;rsquo;s able to do it at runtime, so we just tell the JVM to please go to Maven, download all dependencies for the Postgres driver and just install it. And then we just try it again.&lt;/p&gt;&lt;p&gt;It seems that we get another exception, but this one is different, the database does not exist. And this is because I make a little typo, we fix it, give it another try, and now we are connected to the database.&lt;/p&gt;&lt;p&gt;So what are we doing? we&amp;rsquo;re basically testing our configuration. I don&amp;rsquo;t know how you do it, but for me is usually very painful because when you have to test things like configuration, you have to be constantly restarting the JVM, to see if it works, if it find the configuration files, if it doesn&amp;rsquo;t find them, if you put the credentials correctly or not, but here we are able to do it in an interactive way. &lt;/p&gt;&lt;h4&gt;Exploring a database&lt;/h4&gt;&lt;p&gt;Now we are going to explore the real world. Lets say that we know the database that the data, but we don&amp;rsquo;t know what&amp;rsquo;s inside the database, so what I usually will do it open something like Oracle SQLDeveloper, and then I would put the credentials, and then I will start navigating, and look in the UI to see what is in there.&lt;/p&gt;&lt;p&gt;But instead of that, what we are going to do is, using the JDBC metadata API, from the Tomcat, we are just going to query the database, searching for all the tables that start with &amp;ldquo;transac&amp;rdquo;. We see here that Postgres is returning us three objects, three maps. Instead of printing it like this, because its a little bit difficult to read, and because we are on the JVM, we are just going to write a function so we print it in a more tablely way, so it is a little bit easier to read.&lt;/p&gt;&lt;p&gt;So we have here a table called transaction, probably the table that we want to use, and what we are going to do is to query the database, it returns a bunch of results, and here we&amp;rsquo;ll see there is a currency, there is an amount, there&amp;rsquo;s some timestamp, an ID, client ID, so we get an example of the data that is in it.&lt;/p&gt;&lt;p&gt;Now we realize that there are two currencies, so probably if you want to summarize this thing properly, we need some kind of foreign exchange. So we go to our architect, and we ask him to we have this problem, I have euros in one side, pounds in the another one, what do we do? He say, well, we have a restful endpoint somewhere that you can hit, and it will give you the forex exchange. So he give us the URL, and we are just going to poke a this restful.&lt;/p&gt;&lt;h4&gt;HTTP client code, one bit at a time&lt;/h4&gt;&lt;p&gt;So if I run this, I&amp;rsquo;m making now the HTTP request. This is failing somehow, so what we&amp;rsquo;re going to do, we need have a look at what&amp;rsquo;s the error. It is a 400 and if we look at the body it says something like the date is missing. &lt;/p&gt;&lt;p&gt;So lets add it to our request parameters, try it again, we see now at the body contains some JSON. We are in the good path, so let&amp;rsquo;s just extract the body, that looks good, and let&amp;rsquo;s parse the JSON, and that&amp;rsquo;s it. &lt;/p&gt;&lt;p&gt;Look at what we are doing, look at the flow, we write one little piece of code, and we run it immediately, and we see the result, and we do it for each and every small step. &lt;/p&gt;&lt;p&gt;Now we probably want to check, do we have data that is old? Seems that we have data. What about data that is very very old? Since that we don&amp;rsquo;t have data before 1970. What happens if for some reason we ask for data in the future? We have data in the future, that&amp;rsquo;s very interesting feature. And what happens if we pass a string? We get an error saying that the date should be a long.&lt;/p&gt;&lt;p&gt;So we&amp;rsquo;re exploring how the thing works, and now, for example, we know how errors look like, so now we can go and build our logic around handling errors. &lt;/p&gt;&lt;h4&gt;Generating code for Stored Procs&lt;/h4&gt;&lt;p&gt;Now when you are building this, your team lead comes in and says: well, there is already some Stored Proc in the database that is going to do all this logic for you so don&amp;rsquo;t pay attention to architects. They don&amp;rsquo;t know anything. &lt;/p&gt;&lt;p&gt;So what are you going to do, is exactly the same thing as before, we&amp;rsquo;re going to ask the database through the JDBC API, which stored procs we have, that contains the word &amp;ldquo;trans&amp;rdquo;. And we see that we have a &amp;ldquo;transcations_in_gbp&amp;rdquo;. So lets have a look again at what that stored proc is about. So we see that it returns a cursor and it requires the client ID.&lt;/p&gt;&lt;p&gt;So now that we know what they stored proc expects and what it requires, what we could do is write our code, but you know that JDBC client code is just hell, but what we are doing here at the end of the day is just printing this thing as a table, but why do we need to print it as a table? We can also print it as a piece of code.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(def-proc transactions-in-gbp
 &amp;quot;transactions_in_gbp&amp;quot;
 [:return Types/OTHER :return-value]
 [:in Types/BIGINT :clientid])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So I printed it as a piece of code, copied it, paste it in our file, and now we can give it a try. Does it work? Seems to work. What happens if I pass a client that doesn&amp;rsquo;t exist? No value. What happens if I pass nil value? What happens if I pass a string? Exception.&lt;/p&gt;&lt;h4&gt;Why not SQL developer or Postman? Why a REPL for exploration?&lt;/h4&gt;&lt;p&gt;So we&amp;rsquo;re just poking around to understand how things work, but you maybe wonder, well why is this any better than using oracle SQL developer, right? This is a SQL specific tool. &lt;/p&gt;&lt;p&gt;What is this piece of code that we just generated? This is our first piece of production code. This is production code. If you were using SQL Developer, we would know what to do, but now we&amp;rsquo;ll have to go on type the code to be able to call the database, and that code you will need to test it, because you don&amp;rsquo;t really know if it works or not. &lt;/p&gt;&lt;p&gt;But how likely it is that this stored proc, when we deploy it, when we run it in the application, it fails? That it doesn&amp;rsquo;t work? If you think about it, every time that we evaluate, every time that we send a piece of code to the REPL, we are sending it inside the Tomcat, so basically what we are doing is deploying the piece of code into the Tomcat, so it&amp;rsquo;s very very unlikely that this code doesn&amp;rsquo;t work. &lt;/p&gt;&lt;p&gt;I haven&amp;rsquo;t explained it but, where are we making these changes? The file we are editing is not a special place, this is a project file. Once we are finished with the work, what we will do is just commit this file as it is. We do not have to copy this code into another place. This is production code, this is in the correct place.&lt;/p&gt;&lt;p&gt;Another reason what you would want to use a REPL instead of SQL Developer or Postman, is &amp;hellip; How many people know how to do a for loop? Everybody knows how to do a for loop. How many people know how to do a for loop in Postman? I have been told that it is possible. We do for loops all day long, right? If you have a REPL you have a whole language, your production language, it is not that different language, is your production language, to do everything. &lt;/p&gt;&lt;p&gt;The same way, because we are in the JVM, what happens if, for some reason, for your investigation, you needed to get data from the database and somehow correlated it the HTTP service? Well, if you are using Postman and SQL Developer, you need to export the resulting to CSV in both tools, and maybe create some Bash script &amp;hellip; but again, we are on the JVM, so you could just write in a little piece of code to do that for us, because the JVM has libraries for absolutely everything.&lt;/p&gt;&lt;p&gt;We can get more fancy, and if we really really need it, we can also do graphs. We got plenty of graphing libraries in the JVM, so again, we have all the tools of the JVM at our disposal to understand how the real world works.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/repl-004.gif&quot; alt=&quot;repl graph&quot; title=&quot;repl graph&quot; /&gt;&lt;/p&gt;&lt;h4&gt;TDD and a REPL&lt;/h4&gt;&lt;p&gt;So let&amp;rsquo;s say that we have finished this exploration phase to understand how the real world works, and now we want to switch to our TDD workflow. So the first thing that we&amp;rsquo;ll do is to write a test, this is a test, and if you see, it&amp;rsquo;s saying that it&amp;rsquo;s failing, but that&amp;rsquo;s because we didn&amp;rsquo;t provide it with any data, any mock data. &lt;/p&gt;&lt;p&gt;We could go here and type of all the mock data, but if you think about it, we are already calling DB, so one option is just to copy the results from that DB call into our test setup. &lt;/p&gt;&lt;p&gt;How likely is that this data that we are using in our tests it has a typo? Or it&amp;rsquo;s not the right type? That came from the database, so out of our exploration work, we are able to get pieces of data and use them straight away in our tests.&lt;/p&gt;&lt;p&gt;Ok, so lets say that your business manager says that we don&amp;rsquo;t want for our summary function to take into account records with type 101. So, if you are doing TDD, the first thing that you will do is change the expectation. You write the test, you see it fail, now you want to make it green, so we&amp;rsquo;ll go to the code, we&amp;rsquo;ll remove the types 101, run it again, and it&amp;rsquo;s green. Cool, so we have implemented what we were asked for.&lt;/p&gt;&lt;p&gt;Now the business manager changes his mind: well, you know, we don&amp;rsquo;t want to count numbers, because they look very bad, so the summary should be 23. You run your test again, and now you go to your production file, and you make a change&amp;hellip; But this switching between files is a little bit annoying. &lt;/p&gt;&lt;p&gt;So we can tell the REPL to keep track of all the changes that we&amp;rsquo;re making in the project, and run the test as soon as we save the file. So we save the file now, it&amp;rsquo;s running the test automatically without me having to do anything. &lt;/p&gt;&lt;p&gt;And the nice thing about it is that, it&amp;rsquo;s not just running all the tests. If I go to a file that has no tests, see what he says here? Well it didn&amp;rsquo;t run any tests because this file doesn&amp;rsquo;t have any tests at all. So it&amp;rsquo;s not just going to run all the tests, all your test suite, it is just going to run the test that could be affected by the change that you made. &lt;/p&gt;&lt;h4&gt;Wiring your controllers&lt;/h4&gt;&lt;p&gt;Now that we&amp;rsquo;re happy with our business logic, the only bit that we are missing is to create a REST endpoint to expose this function to the external world. &lt;/p&gt;&lt;p&gt;This particular service is using Swagger. Everybody familiar with Swagger? Swagger is a standard way of defining your endpoints as JSON, so then you consume that defition with out tools. In this case, the one that consumes that JSON definition is a Swagger UI, which just draws the API endpoints, and it allows you to easily make HTTP calls, and play with the endpoints. &lt;/p&gt;&lt;p&gt;Lets add our new endpoint, and we&amp;rsquo;re going to just copy the previous one, we call it total, and let&amp;rsquo;s see if that works. Refresh the browser, and we see now the total is here, this is our new endpoint. Instead of &amp;ldquo;who&amp;rdquo;, we will require a client of type long, and we need to wire our dependencies, lets call the database, and let&amp;rsquo;s give it a try. Total twenty three.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/repl-005.gif&quot; alt=&quot;repl wiring&quot; title=&quot;repl wiring&quot; /&gt;&lt;/p&gt;&lt;p&gt;Okay, I personally don&amp;rsquo;t put or try to put any kind of logic on my controllers so I usually don&amp;rsquo;t test them, and what we have done here is just test that the wiring actually works. &lt;/p&gt;&lt;p&gt;Let&amp;rsquo;s say that apart from the total, you want to return the client. We could go and check it here, but this, again, changing from one tool to another to do your testing is getting annoying. And the JVM, I&amp;rsquo;m pretty sure, that&amp;rsquo;s able to do HTTP calls, so we write a little piece of code that is going to make an HTTP call straight away, so now if we change the client to account, see, it changed automatically. And we don&amp;rsquo;t need to change to another tool, and we see that the changes appear, and we can check it. &lt;/p&gt;&lt;p&gt;This feedback loop it&amp;rsquo;s immediate.&lt;/p&gt;&lt;h4&gt;State&lt;/h4&gt;&lt;p&gt;Now that we have all this automatic refreshing of code, what happens with the application state? Here we have a piece of state that we&amp;rsquo;re going to use to count how many HTTP requests this service has done. &lt;/p&gt;&lt;p&gt;In our new endpoint we&amp;rsquo;re just going to return that counter with the number of requests: 1, 2, 3, &amp;hellip; we have now 12. Now we are going to change this so what happens when it refresh my changes? The counter, that piece of state, has gone back to 0.&lt;/p&gt;&lt;p&gt;What&amp;rsquo;s happening? When the code is refresh, we are losing that state. That may be something that you want to, but sometimes it&amp;rsquo;s a little bit annoying, for example, when you have some caching and you&amp;rsquo;re testing the caching. Loading the caching from database takes forever, losing the state of the cache is really really annoying. It just slows you down, so what we can tell the REPL is, for this particular piece of state, I don&amp;rsquo;t want you to destroy it when there&amp;rsquo;s a change. &lt;/p&gt;&lt;p&gt;So we can selectively decide which piece of states we want to keep, but it&amp;rsquo;s not just that. &lt;/p&gt;&lt;p&gt;Because we are really inside the JVM, we can go and we can inspect the state, any state that you have in your application, you can go and poke at it. This is like having a debugger connected to the JVM. &lt;/p&gt;&lt;p&gt;And the same way that you can inspect it, you could go and just change it.&lt;/p&gt;&lt;p&gt;But sometimes, even state that you think that you don&amp;rsquo;t want to get rid of, you may want to get rid of it. So there is a way of telling the REPL to get rid of everything, even the things that you told it not to get rid of.&lt;/p&gt;&lt;p&gt;And the same way we&amp;rsquo;re inspecting the state, we can also pick up any state that is going through your application and capture it, and inspect it later.&lt;/p&gt;&lt;p&gt;&lt;a name=&quot;enddemo&quot;&gt;&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;Some REPL benefits&lt;/h2&gt;&lt;p&gt;So what do we got from our REPL?&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Perfect tool to learn a programming language and its libraries.&lt;/li&gt;
  &lt;li&gt;Write code with immediate feedback.&lt;/li&gt;
  &lt;li&gt;No build or deploy. Live change our running application without restarting it.&lt;/li&gt;
  &lt;li&gt;Tools to understand the real world: all the JVM libraries.&lt;/li&gt;
  &lt;li&gt;Easy way of creating faithful lies for our tests.&lt;/li&gt;
  &lt;li&gt;Fewer surprises when starting the application.&lt;/li&gt;
  &lt;li&gt;Add new libraries to a running application.&lt;/li&gt;
  &lt;li&gt;Run automatically unit test affected by a change.&lt;/li&gt;
  &lt;li&gt;Inspect and manage state.&lt;/li&gt;
  &lt;li&gt;Stay on the comfort of your favourite IDE.&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;A REPL in staging and production?&lt;/h2&gt;&lt;p&gt;If you think about it, the REPL is listening to a socket, and things that are listening to a socket means that you don&amp;rsquo;t really need to run a them locally. &lt;/p&gt;&lt;p&gt;So what will happen if we leave this REPL with the socket open in our staging and production environments? And then, from our IDE, we connect it to the staging or production environments? &lt;/p&gt;&lt;p&gt;How many times you have had a bug reported and you think: &amp;ldquo;If I could just look the state of this particular object in staging, I will know straightaway what was the issue, and I will be able to fix it straightaway&amp;rdquo;.&lt;/p&gt;&lt;p&gt;Or how you many times you have thought: &amp;ldquo;If I could just add one log line here, I will know what&amp;rsquo;s happening&amp;rdquo;, and then you make that change to your logging, you deploy again and you realize: &amp;ldquo;oh, it wasn&amp;rsquo;t exactly this the log line that I wanted, I really need a different log line&amp;rdquo;. &lt;/p&gt;&lt;p&gt;With a REPL we are able to make all these changes immediately, in whatever environment you want.&lt;/p&gt;&lt;p&gt;But who would be so crazy to want to have this kind of power in production? It&amp;rsquo;s just too dangerous right? &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;In May of 1999, we were able to debug and fix a race condition that had not shown up during ground testing. Debugging a program running on a $100M piece of hardware that is 100 million km away is an interesting experience. Having a read-eval-print-loop running on the spacecraft proved invaluable in finding and fixing the problem. &lt;cite&gt;Ron Garret NASA Jet Propulsion Lab Engineer&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;So I&amp;rsquo;m going to state that if the NASA have this power in production, probably we can also use it. You have to be extremely careful, but why not?&lt;/p&gt;&lt;p&gt;So to do all the things that we said a REPL gives your, I&amp;rsquo;m going to add two more:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Debug staging and production environments&lt;/li&gt;
  &lt;li&gt;Control spacecrafts&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;More REPLs&lt;/h2&gt;&lt;p&gt;(yet another 30 seconds pause) oh sorry, its just 30 seconds. Don&amp;rsquo;t worry, just the second time in one hour &amp;hellip; &lt;/p&gt;&lt;p&gt;Remember why we want a REPL: you do it for your joy, and you do it for the company&amp;rsquo;s productivity.&lt;/p&gt;&lt;p&gt;As I said, this is not exclusive to Clojure, here are other videos for similar things in different languages and environments. But each REPL is going to have different capabilities, they&amp;rsquo;re not all equal.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Javascript: &lt;a href=&quot;https://vimeo.com/123513496&quot;&gt;https://vimeo.com/123513496&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;ClojureScript: &lt;a href=&quot;https://www.youtube.com/watch?v=KZjFVdU8VLI&quot;&gt;https://www.youtube.com/watch?v=KZjFVdU8VLI&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Elm: &lt;a href=&quot;http://debug.elm-lang.org/&quot;&gt;http://debug.elm-lang.org/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Groovy: &lt;a href=&quot;https://www.youtube.com/watch?v=bTRUC78X87g&quot;&gt;https://www.youtube.com/watch?v=bTRUC78X87g&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Python: &lt;a href=&quot;https://www.youtube.com/watch?v=EwI-e3WlTew&quot;&gt;https://www.youtube.com/watch?v=EwI-e3WlTew&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;iOS: &lt;a href=&quot;https://www.youtube.com/watch?v=Ci4uviG8S0o&quot;&gt;https://www.youtube.com/watch?v=Ci4uviG8S0o&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Android: &lt;a href=&quot;https://www.youtube.com/watch?v=mVXTcAEKgF8&quot;&gt;https://www.youtube.com/watch?v=mVXTcAEKgF8&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Unity: &lt;a href=&quot;https://www.youtube.com/watch?v=tJr_TD1BtF0&quot;&gt;https://www.youtube.com/watch?v=tJr_TD1BtF0&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Music: &lt;a href=&quot;https://www.youtube.com/watch?v=yY1FSsUV-8c&quot;&gt;https://www.youtube.com/watch?v=yY1FSsUV-8c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;What about the JAVA REPL? &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/repl-driven-development/018-java9repl.gif&quot; alt=&quot;Java 9 REPL&quot; title=&quot;Java 9 REPL&quot; /&gt;&lt;/p&gt;&lt;p&gt;This is me when I read that Java was going to get a REPL, and then what that REPL was going to get. &lt;/p&gt;&lt;p&gt;Of all the list of things that you saw that a REPL can give you, the aim of the Java REPL is to make easy to learn the language, nothing more, but even this, it&amp;rsquo;s funny because the language is not exactly the same in the REPL as in Java as it has different semantics, different syntax, while in more powerful REPLs you get the whole language, there is no difference.&lt;/p&gt;&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The code: &lt;a href=&quot;https://github.com/dlebrero/repl-driven-development-talk&quot;&gt;https://github.com/dlebrero/repl-driven-development-talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Bret Victor: Inventing by principle &lt;a href=&quot;https://vimeo.com/36579366&quot;&gt;https://vimeo.com/36579366&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Ron Garret: The Remote Agent Experiment: Debugging Code from 60 Million Miles Away &lt;a href=&quot;https://www.youtube.com/watch?v=_gZK0tW8EhQ&quot;&gt;https://www.youtube.com/watch?v=_gZK0tW8EhQ&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Jakob Nielsen – Usability Engineering: &lt;a href=&quot;https://www.nngroup.com/books/usability-engineering/&quot;&gt;https://www.nngroup.com/books/usability-engineering/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Thank you!&lt;/p&gt;
</description>
</item>
<item>
<title>
How to do a Java/JVM heap dump in Kubernetes
</title>
<link>
https://danlebrero.com/2018/11/20/how-to-do-java-jvm-heapdump-in-kubernetes/
</link>
<guid>
https://danlebrero.com/2018/11/20/how-to-do-java-jvm-heapdump-in-kubernetes/
</guid>
<pubDate>
Tue, 20 Nov 2018 00:30:00 +0100
</pubDate>
<description>
&lt;p&gt;Kubernetes is so awesome that one of our JVM containers has been periodically running out of memory for more than a year, and we just recently realized about it.&lt;/p&gt;&lt;p&gt;Once we realized about the issue, we obviously wanted to find out what was going on, but we could not replicate it locally. &lt;/p&gt;&lt;p&gt;Also, the issue happened so sporadically, that we could not just jump to the ill container and perform a &lt;code&gt;jmap&lt;/code&gt;. Before we had any time, Kubernetes had already killed and restarted the container, which also meant that it had wiped out any heap dump that the JVM could have done with the &lt;code&gt;-XX:+HeapDumpOnOutOfMemoryError&lt;/code&gt; flag.&lt;/p&gt;&lt;p&gt;After a lot of head scratching, we found that the solution was quite simple, but not obvious, if you are just starting with Kubernetes:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml      &quot;&gt;apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: your-app
spec:
  replicas: 1
  template:
    metadata:
      labels:
        test: heapdump
    spec:
      containers:
      - name: a-jvm-container
        image: openjdk:11.0.1-jdk-slim-sid
        command: [&amp;quot;java&amp;quot;, &amp;quot;-XX:+HeapDumpOnOutOfMemoryError&amp;quot;, &amp;quot;-XX:HeapDumpPath=/dumps/oom.bin&amp;quot;, &amp;quot;-jar&amp;quot;, &amp;quot;yourapp.jar&amp;quot;]
        volumeMounts:
        - name: heap-dumps
          mountPath: /dumps
      volumes:
      - name: heap-dumps
        emptyDir: {}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So what we are doing is adding an &lt;a href=&quot;https://kubernetes.io/docs/concepts/storage/volumes/#emptydir&quot;&gt;empty dir&lt;/a&gt; volume to the container, and configuring the JVM to do the heap dumps to that directory.&lt;/p&gt;&lt;p&gt;The first part of the puzzle is that, when Kubernetes is killing your container because it is not responding to the health check, Kubernetes will just restart the container, but will &lt;strong&gt;not&lt;/strong&gt; reschedule the pod, so it will not move it to another node.&lt;/p&gt;&lt;p&gt;The other part of the puzzle is that an &lt;em&gt;empty dir&lt;/em&gt; volume is not deleted until the pod is moved to another node.&lt;/p&gt;&lt;p&gt;Putting both things together means that, after the container is restarted, the new container will mount the same &lt;em&gt;empty dir&lt;/em&gt;, which will contain the heap dump from the previous run. So you can &lt;code&gt;kubectl cp&lt;/code&gt; those files at any time after the event.&lt;/p&gt;&lt;h4&gt;OOM on startup&lt;/h4&gt;&lt;p&gt;If the OutOfMemory error is happening during start up, you probably are not going to be able to copy the dump before the container is restarted.&lt;/p&gt;&lt;p&gt;In this case, the little trick is to add a very simple and tiny sidecar to your pod, and mount in that sidecar the same &lt;em&gt;empty dir&lt;/em&gt;, so you can access the heap dumps through the sidecar container, instead of the main container.&lt;/p&gt;&lt;p&gt;Remember in this case to set the &lt;code&gt;-XX:HeapDumpPath&lt;/code&gt; option to generate an unique file name.&lt;/p&gt;&lt;h4&gt;Shipping the heap dump out of Kubernetes&lt;/h4&gt;&lt;p&gt;If you don&amp;rsquo;t want to, or cannot, access the Kubernetes pod directly, you can always ship the heap dumps out of Kubernetes. &lt;/p&gt;&lt;p&gt;In our case, credits to &lt;a href=&quot;https://perdomo.me&quot;&gt;Ivan Perdomo&lt;/a&gt; for the work, we did it by adding a sidecar that will also mount that &lt;em&gt;empty dir&lt;/em&gt; volume, and it will listen with &lt;code&gt;inotify&lt;/code&gt; to changes in that directory. On closing of the heap dump file, it will start the process of copying the file to a Google Storage bucket:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: your-app
spec:
  replicas: 1
  template:
    metadata:
      labels:
        test: heapdump
    spec:
      containers:
      - name: a-jvm-container
        image: openjdk:11.0.1-jdk-slim-sid
        command: [&amp;quot;java&amp;quot;, &amp;quot;-XX:+HeapDumpOnOutOfMemoryError&amp;quot;, &amp;quot;-XX:HeapDumpPath=/dumps/oom.bin&amp;quot;, &amp;quot;-jar&amp;quot;, &amp;quot;yourapp.jar&amp;quot;]
        volumeMounts:
        - name: heap-dumps
          mountPath: /dumps
      - name: ship-heap-dump
        image: google/cloud-sdk:206.0.0-alpine
        command: [&amp;quot;/bin/sh&amp;quot;, &amp;quot;-c&amp;quot;]
        args:
        - |
          apk add --no-cache inotify-tools &amp;amp;&amp;amp;
          gcloud auth activate-service-account --key-file=/secrets/jvm-debug.json &amp;amp;&amp;amp;
          inotifywait -m /dumps -e close_write | while read path action file; do gsutil cp &amp;quot;$path$file&amp;quot; &amp;quot;gs://heap-dump/$file&amp;quot;; done;
        volumeMounts:
        - name: heap-dumps
          mountPath: /dumps
      volumes:
      - name: heap-dumps
        emptyDir: {}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As it trip us in our happy Kubernetes journey, maybe it will makes yours easier.&lt;/p&gt;
</description>
</item>
<item>
<title>
How to convince your company to use Clojure
</title>
<link>
https://danlebrero.com/2018/10/16/how-to-convince-your-company-to-use-clojure/
</link>
<guid>
https://danlebrero.com/2018/10/16/how-to-convince-your-company-to-use-clojure/
</guid>
<pubDate>
Tue, 16 Oct 2018 00:30:00 +0200
</pubDate>
<description>
&lt;p&gt;You have found Clojure and fall in love with it. &lt;/p&gt;&lt;p&gt;As any good Clojurian, you eagerly to try convert your colleagues, by showing them the power of immutability, the REPL, macros, core.async, protocols, multi-methods, &amp;hellip;&lt;/p&gt;&lt;p&gt;But they seem to be blind.&lt;/p&gt;&lt;p&gt;You have also tried to appeal to their aesthetic sense, the beauty of simplicity or just their good heart.&lt;/p&gt;&lt;p&gt;But none of that works. &lt;/p&gt;&lt;p&gt;Desperate, you have invoked Rich Hickey&amp;rsquo;s name three times, and shout &amp;ldquo;Complected! Complected! Complected!&amp;rdquo; every time your teammate creates a new class.&lt;/p&gt;&lt;p&gt;But still no luck.&lt;/p&gt;&lt;p&gt;But don&amp;rsquo;t give up, here is the definitive video that will convert any sceptic to Clojure:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/MSFvEK8asY8&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;The video should be watched in repeat mode for 48 uninterrupted hours.&lt;/p&gt;&lt;p&gt;Happy Clojuring! &lt;/p&gt;
</description>
</item>
<item>
<title>
In KafkaStreams, when to choose between a KTable or a KStream?
</title>
<link>
https://danlebrero.com/2018/10/08/when-to-choose-ktable-or-kstream-in-kafka-streams/
</link>
<guid>
https://danlebrero.com/2018/10/08/when-to-choose-ktable-or-kstream-in-kafka-streams/
</guid>
<pubDate>
Mon, 08 Oct 2018 20:25:00 +0200
</pubDate>
<description>
&lt;p&gt;If you are starting with KafkaStreams, or with streaming applications in general, sometimes is hard to come up with appropriate solutions to applications that you would previously consider trivial to implement. But it is just a matter of getting used to the new APIs and concepts, and seeing a bunch of examples. &lt;/p&gt;&lt;p&gt;I recently got this email inquiry (feel free to send me others!) about how KafkaStreams could be used:&lt;/p&gt;&lt;p&gt;&lt;em&gt;I&amp;rsquo;ve a sensor data coming out of device and it has latitude/longitude along with other information. The device serial number is the key.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;My requirement is to calculate distance between 2 consecutive messages for the device.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;I&amp;rsquo;ve a kafka topic and each message in the topic has lat/lon and event timestamp. For example:&lt;/em&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Device &lt;/th&gt;
      &lt;th&gt;GpsDateTime &lt;/th&gt;
      &lt;th&gt;Latitude &lt;/th&gt;
      &lt;th&gt;Longitude &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:38:36 &lt;/td&gt;
      &lt;td&gt;32.685757 &lt;/td&gt;
      &lt;td&gt;-96.735942&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:39:07 &lt;/td&gt;
      &lt;td&gt;32.687347 &lt;/td&gt;
      &lt;td&gt;-96.732841&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:39:37 &lt;/td&gt;
      &lt;td&gt;32.68805 &lt;/td&gt;
      &lt;td&gt;-96.729726&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;&lt;p&gt;&lt;em&gt;I would like to create a new KStream on the above topic and enrich it with distance.&lt;/em&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Device &lt;/th&gt;
      &lt;th&gt;GpsDateTime &lt;/th&gt;
      &lt;th&gt;Latitude &lt;/th&gt;
      &lt;th&gt;Longitude &lt;/th&gt;
      &lt;th&gt;Distance&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:38:36 &lt;/td&gt;
      &lt;td&gt;32.685757 &lt;/td&gt;
      &lt;td&gt;-96.735942 &lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:39:07 &lt;/td&gt;
      &lt;td&gt;32.687347 &lt;/td&gt;
      &lt;td&gt;-96.732841 &lt;/td&gt;
      &lt;td&gt;0.340&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;xyz &lt;/td&gt;
      &lt;td&gt;2016-11-30 22:39:37 &lt;/td&gt;
      &lt;td&gt;32.68805 &lt;/td&gt;
      &lt;td&gt;-96.729726 &lt;/td&gt;
      &lt;td&gt;0.302&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;&lt;p&gt;&lt;em&gt;What would be the best approach to refer the previous message lat/lon for a device?&lt;/em&gt;&lt;/p&gt;&lt;p&gt;As we are talking about keeping some state, the first thing that pops in our minds is that we must use a KTable, because we have drilled in our heads that state requires a DB. As we have always read that a KafkaStreams KTable is the streaming equivalent to a DB table, it seems natural to reach for a KTable for any problem in our streaming applications that requires some state to be maintained.&lt;/p&gt;&lt;p&gt;A possible solution for the above application would be:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn create-kafka-stream-topology-ktable []
  (let [^StreamsBuilder builder (StreamsBuilder.)
        _ (-&amp;gt; builder
              (.stream device-data-topic)
              (.groupByKey)
              (.aggregate (initializer [])
                          (aggregator [k new-point [previous _]]
                            [new-point previous]))
              (.toStream)
              (.mapValues (value-mapper [current previous]
                            (if previous
                              (assoc current :dist (distance current previous))
                              (assoc current :dist 0))))
              (.to &amp;quot;points-with-distance&amp;quot;))]
    builder))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So we use a KTable to generate pairs of &amp;lt;current-value,previous-value&amp;gt; and then we just transform those two values into one, adding the distance between both values to the current-value.&lt;/p&gt;&lt;p&gt;Running this streaming application seems to work:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;device-gsp-coords    : xyz , {:lat 32.685757, :lon -96.735942, :time 2016-11-30 22:38:36 }
points-with-distance : xyz , {:lat 32.685757, :lon -96.735942, :time 2016-11-30 22:38:36, :dist 0}
device-gsp-coords    : xyz , {:lat 32.687347, :lon -96.732841, :time 2016-11-30 22:39:07 }
points-with-distance : xyz , {:lat 32.687347, :lon -96.732841, :time 2016-11-30 22:39:07, :dist 0.340}
device-gsp-coords    : xyz , {:lat 32.68805,  :lon -96.729726, :time 2016-11-30 22:39:37 }
points-with-distance : xyz , {:lat 32.68805,  :lon -96.729726, :time 2016-11-30 22:39:37, :dist 0.302}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;But what happens if we get a lot of messages for a given device in a short period of time?&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;device-gsp-coords    : xyz1 , {:lat 32.685757, :lon -96.735942, :time 2016-11-30 22:38:36, :ts 1538755525616}
device-gsp-coords    : xyz1 , {:lat 32.687347, :lon -96.732841, :time 2016-11-30 22:39:07, :ts 1538755525618}
device-gsp-coords    : xyz1 , {:lat 32.68805,  :lon -96.729726, :time 2016-11-30 22:39:37, :ts 1538755525620}
points-with-distance : xyz1 , {:lat 32.685757, :lon -96.735942, :time 2016-11-30 22:38:36, :ts 1538755525616, :dist 0}
points-with-distance : xyz1 , {:lat 32.68805,  :lon -96.729726, :time 2016-11-30 22:39:37, :ts 1538755525620, :dist 0.302}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;It looks like that the middle value (the one with distance 0.340) has disappeared, but notice that the distance calculation of the last message is exactly the same previously.&lt;/p&gt;&lt;p&gt;Reading the documentation of the &lt;a href=&quot;https://docs.confluent.io/current/streams/javadocs/org/apache/kafka/streams/kstream/KGroupedStream.html#aggregate-org.apache.kafka.streams.kstream.Initializer-org.apache.kafka.streams.kstream.Aggregator-&quot;&gt;KStream#aggregate method&lt;/a&gt; it becomes clear what happens:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Not all updates might get sent downstream, as an internal cache is used to deduplicate consecutive updates to the same key. The rate of propagated updates depends on your input data rate, the number of distinct keys, the number of parallel running Kafka Streams instances, and the configuration parameters for cache size, and commit interval. &lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Note that this scenario can happen not just then device sends a lot of information in a short time, but will also happen if your application has a lot of catch up work to do, like when starting for the very first time.&lt;/p&gt;&lt;h2&gt;But, why?&lt;/h2&gt;&lt;p&gt;If you were to query a row in a traditional DB table at two different times, would you know how many times the row had changed between those two times? Would you be able to retrieve all those intermediate values? No. &lt;/p&gt;&lt;p&gt;KTables are again equivalent to DB tables, and as in these, using a KTable means that you just care about the latest state of the row/entity, which means that any previous states can be safely thrown away. Not in vain a KTable is backed up by a compacted topic.&lt;/p&gt;&lt;p&gt;So this becomes an excellent test to know if it is appropriate to use a KTable:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If you deleted all states but the last, would your application still be correct?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;In the above example, we see that we actually care about each position. If the requirement was to know the total distance traveled since the start of time, then a KTable would be appropriate.&lt;/p&gt;&lt;p&gt;It is important to note that being able to throw away intermediate state is also an optimization, as thousands of input messages can end up producing just a handful of output messages, improving the processing time, and avoiding a lot of IO and compaction work.&lt;/p&gt;&lt;h2&gt;A stateful KStream solution&lt;/h2&gt;&lt;p&gt;In KafkaStreams, stateful transformations are not exclusive of KTables, we also found them in KStreams and in the Processor API (remember that KTables and KStreams are build on top of the Processor API).&lt;/p&gt;&lt;p&gt;Using the &lt;a href=&quot;https://docs.confluent.io/current/streams/javadocs/org/apache/kafka/streams/kstream/KStream.html#transformValues-org.apache.kafka.streams.kstream.ValueTransformerWithKeySupplier-java.lang.String...-&quot;&gt;KStream#transformValues method&lt;/a&gt; we end up with:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn create-kafka-stream-topology-kstream []
  (let [^StreamsBuilder builder (StreamsBuilder.)
        state-name &amp;quot;last-device-state&amp;quot;
        store (Stores/keyValueStoreBuilder
                (Stores/persistentKeyValueStore state-name)
                (EdnSerde.)
                (EdnSerde.))
        _ (-&amp;gt; builder
              (.addStateStore store)
              (.stream device-data-topic)
              (.transformValues (value-transformer-with-store
                                  state-name
                                  (fn [store key current]
                                    (let [previous (.get store key)]
                                      (.put store key current)
                                      (if-not previous
                                        (assoc current :dist 0)
                                        (assoc current :dist (distance current previous))))))
                                (into-array [state-name]))
              (.to &amp;quot;points-with-distance&amp;quot;))]
    builder))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So we manually create a state store and then we use it to store/retrieve the previous value when doing the computation. &lt;/p&gt;&lt;p&gt;Pretty simple and neat.&lt;/p&gt;&lt;p&gt;All the code can be found &lt;a href=&quot;https://github.com/dlebrero/kafka-consecutive-values&quot;&gt;here&lt;/a&gt;, including a Docker Compose file that will run Kafka, Zookeeper plus three instances of this service, so you can play around with it. The details of how to build and run it are in the repository.&lt;/p&gt;
</description>
</item>
<item>
<title>
Kubernetes explained in pictures: StatefulSets, Persistent Volumes and Headless Services
</title>
<link>
https://danlebrero.com/2018/07/22/kubernetes-explained-in-pictures-stateful-sets-persistent-volume-headless-service/
</link>
<guid>
https://danlebrero.com/2018/07/22/kubernetes-explained-in-pictures-stateful-sets-persistent-volume-headless-service/
</guid>
<pubDate>
Sun, 22 Jul 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;This is the third part on a series of posts where we explain Kubernetes concepts using a Theme park analogy.&lt;/p&gt;&lt;p&gt;On the &lt;a href=&quot;/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/#content&quot;&gt;first post&lt;/a&gt; we covered the basics of a Kubernetes cluster.&lt;/p&gt;&lt;p&gt;On the &lt;a href=&quot;/2018/07/16/kubernetes-explained-in-pictures-the-theme-park-analogy/#content&quot;&gt;second post&lt;/a&gt; we talked about scaling, affinities and taints.&lt;/p&gt;&lt;p&gt;On this post, we will talk StatefulSets, Persistent Volumes and Headless Services.&lt;/p&gt;&lt;h2&gt;The cloakroom and the cloakroom service&lt;/h2&gt;&lt;p&gt;To improve the KubePark&amp;rsquo;s experience, you decide to provide a free of charge cloakroom service. You use the same fun ride template to inform your crew to build one cloakroom in the park, you add a new wayfinder colour for it, and visitors happily start using it.&lt;/p&gt;&lt;p&gt;Complains about lost clothes don&amp;rsquo;t get long to start. Investigating what is going on, it doesn&amp;rsquo;t take you long to realize what is going on when you see your maintenance crew replacing the faulty cloakroom:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-stateful-set-maintenance.jpg&quot; alt=&quot;kubernetes stateful set maintenance&quot; title=&quot;Kubernetes stateful set maintenance&quot; /&gt;&lt;/p&gt;&lt;p&gt;Maybe the idea of &lt;a href=&quot;/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/#maintenance&quot;&gt;burning everything to the ground&lt;/a&gt; was not without its flaws. &lt;/p&gt;&lt;p&gt;Similarly, when the parcel with the cloakroom becomes unavailable, either due to some flood or because your control crew is reducing the number of rented parcels, all the clothes in that cloakroom are left behind. More lost clothes!&lt;/p&gt;&lt;p&gt;This is obviously not good publicity for KubePark, and your landlord doesn&amp;rsquo;t waste time offering his self storage service &lt;strong&gt;(k8s &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/docs/concepts/persistent-volumes&quot;&gt;persistent volume&lt;/a&gt;)&lt;/strong&gt;, built in a nuclear shelter, as a solution. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-persistent-volume.jpg&quot; alt=&quot;kubernetes stateful set maintenance&quot; title=&quot;Kubernetes persistent volume&quot; /&gt;&lt;/p&gt;&lt;p&gt;The only thing that you will need to do is specify in the cloakroom&amp;rsquo;s plan how many storage units must be rented and your control crew will take of doing all the paperwork &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/storage/persistent-volumes/&quot;&gt;dynamic persistent volume claim&lt;/a&gt;)&lt;/strong&gt;. &lt;/p&gt;&lt;p&gt;As the self storage is outside the park, the cloakroom&amp;rsquo;s crew will run to the storage unit to leave and retrieve the visitors&amp;rsquo; items, making the whole service slower, but at least the items will not get lost. &lt;/p&gt;&lt;p&gt;Problem solved! At least for a short while …&lt;/p&gt;&lt;h2&gt;Scaling your cloakroom service&lt;/h2&gt;&lt;p&gt;As KubePark gets more popular, the queue to leave the clothes starts to be unbearable. You panic: there is just one key per storage unit and the key cannot be duplicated. Increasing the number of cloakrooms will not reduce the queue! &lt;/p&gt;&lt;p&gt;Each cloakroom must have its own storage unit, but this brings a whole new set of problems.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-stateful-set-wrong-instance.jpg&quot; alt=&quot;kubernetes stateful set headless service missing&quot; title=&quot;Kubernetes stateful set wrong instance&quot; /&gt;&lt;/p&gt;&lt;p&gt;First, visitors will need redeem the cloakroom&amp;rsquo;s receipt in exactly the same cloakroom that they received the receipt from. &lt;/p&gt;&lt;p&gt;Second, if a cloakroom must be moved or replaced for maintenance, the replacement must keep the same name and storage unit key as the cloakroom that it replaced:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The same name so that from the visitors point of view is the same cloakroom.&lt;/li&gt;
  &lt;li&gt;The same storage unit because if not, the storage unit would be empty and items stored in the previous storage unit inaccessible.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This is so complex that it deserves its own attraction-like template &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/&quot;&gt;statefulsets&lt;/a&gt;, note that StatefulSets also come with some additional ordering guarantees)&lt;/strong&gt;. &lt;/p&gt;&lt;p&gt;Third, remember that the coloured wayfinder takes visitors to any attraction that matches a tag, but here the visitor must go to the receipt&amp;rsquo;s cloakroom, so coloured wayfinder is of no use. Even if more cumbersome for visitors, you end up installing a sign posts &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/service/#headless-services&quot;&gt;headless service&lt;/a&gt;)&lt;/strong&gt; with the name and direction of the cloakrooms, so that the visitor can find by herself the appropriate cloakroom.&lt;/p&gt;&lt;p&gt;Now KubePark can have hundreds of cloakrooms. A dream come true.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-stateful-set-final.jpg&quot; alt=&quot;kubernetes stateful set headless service&quot; title=&quot;Kubernetes stateful set headless service&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Is that all?&lt;/h2&gt;&lt;p&gt;Almost! There are still some additional concepts to be aware of, but I don&amp;rsquo;t feel they need a KubePark analogy:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Namespaces, like the usual file system folders.&lt;/li&gt;
  &lt;li&gt;DaemonSets, run a pod in each and every parcel, current or future.&lt;/li&gt;
  &lt;li&gt;Secrets and Config Maps, equivalent to configuration files.&lt;/li&gt;
  &lt;li&gt;Jobs, one-off tasks.&lt;/li&gt;
  &lt;li&gt;CronJobs, a job with a cron.&lt;/li&gt;
  &lt;li&gt;Priorities, to decide what attractions are more important when scheduling or running out of resources.&lt;/li&gt;
  &lt;li&gt;Init Containers, to prepare the ground for a pod.&lt;/li&gt;
  &lt;li&gt;Replication Controllers, obsolete, replaced by Replica Set.&lt;/li&gt;
  &lt;li&gt;Replica Set, you can consider it an implementation detail of Deployments.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/disruptions/&quot;&gt;Disruptions and rolling update&lt;/a&gt;, how many pods can be down at the same time?&lt;/li&gt;
  &lt;li&gt;Kubelet/Scheduler/Master Controller/API server: &lt;a href=&quot;https://jvns.ca/blog/2017/06/04/learning-about-kubernetes/&quot;&gt;k8s internals&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;And of course, there are still a myriad of details on each of the concepts that you will need to be aware of, but I hope that you are a little bit less lost in the Kubernetes world.&lt;/p&gt;&lt;p&gt;Enjoy your Kubernetes ride!&lt;/p&gt;
</description>
</item>
<item>
<title>
Kubernetes explained: the theme park analogy: auto scaling, taints and affinities
</title>
<link>
https://danlebrero.com/2018/07/16/kubernetes-explained-in-pictures-the-theme-park-analogy/
</link>
<guid>
https://danlebrero.com/2018/07/16/kubernetes-explained-in-pictures-the-theme-park-analogy/
</guid>
<pubDate>
Mon, 16 Jul 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;In the &lt;a href=&quot;/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/#content&quot;&gt;previous post&lt;/a&gt; we covered quite a bit of ground explaining the Kubernetes concepts using a theme park analogy: containers, pods, deployments, containerPorts, cpu and memory resources, probes, services, ingresses, labels, nodes and node pool. &lt;/p&gt;&lt;p&gt;On this post, we will continue with the theme park analogy talking about auto scaling, taints and affinities. &lt;/p&gt;&lt;p&gt;You can also read the next post about &lt;a href=&quot;/2018/07/22/kubernetes-explained-in-pictures-stateful-sets-persistent-volume-headless-service/#content&quot;&gt;Kubernetes StatefulSets&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Success!&lt;/h2&gt;&lt;p&gt;As it couldn&amp;rsquo;t be otherwise, KubePark is a big success. People flood to the gates, eager to enjoy the KubePark experience, but there are just too many people: queues start to grow and grumpy visitors leave ugly reviews in popular websites.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/queues-to-the-parks-main-roller-coaster-big.jpg&quot; alt=&quot;big queues&quot; title=&quot;Big queues ahead&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;http://www.thethemeparkguy.com/&quot;&gt;http://www.thethemeparkguy.com/&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;You keep the queues in check by first increasing the number of attractions in your fun ride plans, and then by also increasing the number of rented parcels when the parcels become full.&lt;/p&gt;&lt;p&gt;If having to fiddle everyday with the fun ride plans and parcel contracts was not bad enough, you very soon notice that the 1909 Carousel is extremely popular in the mornings but hardly used in the evenings, while the Roller Coaster is the opposite, and let&amp;rsquo;s not talk about those wild 4am Conga Lines! Also, the number of visitor on the weekends is orders of magnitude bigger than on workdays. &lt;/p&gt;&lt;p&gt;You are just wasting a ton of money and time.&lt;/p&gt;&lt;p&gt;To solve the issue, you devise an additional set of instructions (one per attraction) for your control crew, so that if the average usage of all clones of an attraction is high, the control crew will install more of those attractions, removing them when the usage is low &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/&quot;&gt;pod horizontal autoscaling&lt;/a&gt;)&lt;/strong&gt;. The usage can be measured in different ways, but you decide that the power consumption &lt;strong&gt;(k8s, CPU usage)&lt;/strong&gt; is a good enough proxy to know how busy an attraction is.&lt;/p&gt;&lt;p&gt;On top of that, a new clause is added to the rental agreement with your landlord that will allow your control crew to rent additional parcels without your consent (up to a maximum). This way, during the weekends the park can grow, and shrink on workdays &lt;strong&gt;(k8s &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler&quot;&gt;cluster autoscaler&lt;/a&gt;)&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;From now on, KubePark will always run with the minimum required resources, and with little additional effort on your side.&lt;/p&gt;&lt;h2&gt;More attractions!&lt;/h2&gt;&lt;p&gt;Now that KubePark is running smoothly, it is time to offer a wider range of attractions. &lt;/p&gt;&lt;p&gt;A market study suggests that an ice rink and a ski slope will be the next big things. &lt;/p&gt;&lt;p&gt;As they require snow and cold weather, you sign a new rental contract &lt;strong&gt;(k8s &lt;a href=&quot;/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/#node-pool&quot;&gt;node pool&lt;/a&gt;)&lt;/strong&gt; to provide you with parcels in the arctic, of size 500x200 with 250kW power, and you tag them as “plains” and “arctic weather”.&lt;/p&gt;&lt;p&gt;On the fun ride template, you add a new optional section: &lt;em&gt;Must-have and nice-to-have parcel tags&lt;/em&gt;, and both the ice rink and ski slope fun ride plans include the “must-have arctic weather”. The control crew will make sure that those attractions are always installed on parcels with arctic weather &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/configuration/assign-pod-node&quot;&gt;node affinity&lt;/a&gt;)&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;Note attractions with no parcel requirements could be installed in the arctic parcels. Most of the time you are ok with this, the 1909 carousel looks even more beautiful with the snow. But some some special cases, like those extremely expensive zero-gravity parcels, you want to keep all attractions out, except for the ones designed explicitly for them &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/&quot;&gt;taints and tolerances&lt;/a&gt;)&lt;/strong&gt;.&lt;/p&gt;&lt;h2&gt;Trouble ahead&lt;/h2&gt;&lt;p&gt;With the snowy parcels in mind, you start to spring new attractions: Igloo Overnights, The Penguin Race, Polar Bear Sightseeing, Naked-Man Ice Fishing Competition&amp;hellip; but on the rush to have all these new attractions, you neglect a very important detail and calamity strikes, badly hurting KubePark’s reputation. &lt;/p&gt;&lt;p&gt;The following picture goes viral, but be warned, you mind find it very disturbing:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-explained-pod-affinity.jpg&quot; alt=&quot;kubernetes affinities&quot; title=&quot;Kubernetes node affinities&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;http://26anibestiario.kukuxumusu.com/resultados-animals/#&quot; title=&quot;Lick&quot;&gt;Lick&lt;/a&gt; by &lt;a href=&quot;http://www.kukuxumusu.com/&quot;&gt;Kukuxumusu&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;By chance, a Polar Bear Sightseeing attraction was installed next to a Penguin Race. Not a nice spectacle. &lt;/p&gt;&lt;p&gt;To ensure that it doesn&amp;rsquo;t happen again, the Penguin Race is tagged as &lt;em&gt;yummy snacks&lt;/em&gt; and a new option is added to the attraction’s template so that you can specify that the Polar Bear Sightseeing must not be in the same parcel as attractions with the tag &lt;em&gt;yummy snacks&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;Foreseeing possible future uses, you decide to also add the options to specify &lt;em&gt;must-have-attraction-with-tag-X-in-the-same-parcel&lt;/em&gt;, &lt;em&gt;nice-to-have-attraction-with-tag-X-in-the-same-parcel&lt;/em&gt; and &lt;em&gt;nice-to-NOT-have-attraction-with-tag-X-in-the-same-parcel&lt;/em&gt; &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#inter-pod-affinity-and-anti-affinity-beta-feature&quot;&gt;pod affinity and anti-affinity&lt;/a&gt;)&lt;/strong&gt;. &lt;/p&gt;&lt;p&gt;Your control crew will need to hire, at the very least, a &lt;a href=&quot;https://en.wikipedia.org/wiki/Classic_Tetris_World_Championship&quot;&gt;Tetris World Champion&lt;/a&gt;. &lt;/p&gt;&lt;h2&gt;Is that all?&lt;/h2&gt;&lt;p&gt;You wish again! &lt;/p&gt;&lt;p&gt;We can read about Replication, Daemon and Stateful sets, Persistent Volumes, Jobs and Cron Jobs, Secrets, Config Maps in the &lt;a href=&quot;/2018/07/22/kubernetes-explained-in-pictures-stateful-sets-persistent-volume-headless-service/#content&quot;&gt;next post&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
<item>
<title>
Kubernetes explained in pictures: the theme park analogy
</title>
<link>
https://danlebrero.com/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/
</link>
<guid>
https://danlebrero.com/2018/07/09/kubernetes-explained-in-pictures-the-theme-park-analogy/
</guid>
<pubDate>
Mon, 09 Jul 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;Kubernetes (k8s from now on) comes with its own set of abstractions, its own lingo, but with a little bit of imagination we can correlate those abstractions with more familiar concepts.&lt;/p&gt;&lt;p&gt;I was hoping for the sausage factory analogy to work, but unfortunately k8s is more than sausages, so we will have to settle for a theme park analogy. &lt;/p&gt;&lt;p&gt;The following is based on &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/&quot;&gt;Google Kubernetes Engine&lt;/a&gt;; some of the concepts may work slightly different in other providers or if you run k8s yourself.&lt;/p&gt;&lt;h2&gt;Who are you&lt;/h2&gt;&lt;p&gt;You are Kubenelius Fizzbuzz, a newly graduated MBA, with the speciality on Boxes Of All Sizes and you are about to embark on your greatest idea: KubePark Theme World.&lt;/p&gt;&lt;h2&gt;The fun ride plans&lt;/h2&gt;&lt;p&gt;To start KubePark, you need to plan its fun rides. You decide that, for each attraction, you will just need to fill in a template like this &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&quot;&gt;deployment&lt;/a&gt;)&lt;/strong&gt;:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-deployment.jpg&quot; alt=&quot;kubernetes deployment&quot; title=&quot;Kubernetes deployment&quot; /&gt;&lt;/p&gt;&lt;p&gt;Here you say that KubePark will have three 1909 carousels. &lt;/p&gt;&lt;p&gt;A 1909 carousel is composed of two parts: a classic carousel plus a candy floss booth. Each part &lt;strong&gt;(k8s &lt;a href=&quot;https://www.docker.com/what-container&quot;&gt;container&lt;/a&gt;)&lt;/strong&gt; will be delivered by drone in a huge box, completely assembled and ready to roll once unboxed.&lt;/p&gt;&lt;p&gt;Each attraction will be surrounded by a fence, isolating it from other attractions, so that a problem in one attraction is not spread to other attractions. But the parts of the attraction form an inseparable whole &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/&quot;&gt;pod&lt;/a&gt;)&lt;/strong&gt;, so there are no barriers or firewalls that could impede the communication or movement between the parts, ruining the enjoyment of visitors &lt;strong&gt;(k8s except if you want to &lt;a href=&quot;https://www.mirantis.com/blog/multi-container-pods-and-container-communication-in-kubernetes/&quot;&gt;share files&lt;/a&gt; which requires a little bit of configuration)&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;Having a fence means that you need to plan where the doors &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/&quot;&gt;containerPort&lt;/a&gt;)&lt;/strong&gt; for visitors should be. In the case of the 1909 carousel, visitors will come through the candy floss booth: a carousel ride is always more fun while enjoying a big fluffy sugar cloud.&lt;/p&gt;&lt;p&gt;The template also specifies the size &lt;strong&gt;(k8s memory)&lt;/strong&gt; and power &lt;strong&gt;(k8s CPU)&lt;/strong&gt; requirements &lt;strong&gt;(k8s &lt;a href=&quot;http://www.noqcks.io/notes/2018/02/03/understanding-kubernetes-resources/&quot;&gt;resources&lt;/a&gt;)&lt;/strong&gt;, and tags &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&quot;&gt;labels&lt;/a&gt;)&lt;/strong&gt; the 1909 carousel as a carousel, kid friendly and classic attraction. We will see later how you will use all this information.&lt;/p&gt;&lt;p&gt;&lt;a name=&quot;maintenance&quot;&gt;&lt;/a&gt;In the reverse of the template, not shown above, you write down the maintenance instructions &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/&quot;&gt;probes&lt;/a&gt;)&lt;/strong&gt; for each part. Your crew will periodically follow those instructions to know if any of the parts needs replacement. If it does, the maintenance crew will burn the faulty part to the ground and drones will bring another huge box with the replacement. So no fiddling around to try to fix anything, but just a plain simple replacement of the whole booth or carousel. During the replacement the attraction will be closed to visitors, even if some parts are still in a working state: the 1909 carousel experience must have candy floss and must include a carousel ride, both things are inseparable.&lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;node-pool&quot;&gt;&lt;/a&gt;The land&lt;/h2&gt;&lt;p&gt;With the fun rides planned, it is time to build the park. &lt;/p&gt;&lt;p&gt;You sign a rent contract &lt;strong&gt;(k8s &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/docs/concepts/node-pools&quot;&gt;node pool&lt;/a&gt;)&lt;/strong&gt; with a landlord:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-node-pool.jpg&quot; alt=&quot;kubernetes node pool&quot; title=&quot;Kubernetes node pool&quot; /&gt;&lt;/p&gt;&lt;p&gt;The contract is for two parcels of land &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/architecture/nodes/&quot;&gt;nodes&lt;/a&gt;)&lt;/strong&gt;, each one with the specified size &lt;strong&gt;(k8s memory)&lt;/strong&gt; and power generator &lt;strong&gt;(k8s CPU)&lt;/strong&gt;. Note that the contract is not for two particular parcels, but for any two parcels with those characteristics, it will be the landlord’s job to find them. With the modern means of passenger transportation, they don’t even need to be adjacent.&lt;/p&gt;&lt;p&gt;The landlord also takes care of securing the access to the parcel, by installing barbed wired around each parcel.&lt;/p&gt;&lt;p&gt;You also tick the free disaster insurance &lt;strong&gt;(k8s &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/docs/concepts/node-auto-repair&quot;&gt;auto repair&lt;/a&gt;)&lt;/strong&gt; box: if a parcel becomes unusable, the landlord will replace it for another one with exactly the same characteristics. It will be the landlord’s sole responsibility to find out and decide if the parcel is unusable, and to replace it.&lt;/p&gt;&lt;p&gt;Lastly, any parcel provided by the contract will be tagged &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&quot;&gt;labels again&lt;/a&gt;)&lt;/strong&gt; as plains with Mediterranean weather. We will see later how we use this information.&lt;/p&gt;&lt;h2&gt;Building KubePark&lt;/h2&gt;&lt;p&gt;You already worked hard enough, so you delegate the details of the park’s construction to your control crew. The crew will make sure that the exact number and type of attractions that you specified in your plans are always working. &lt;/p&gt;&lt;p&gt;In a gesture of unexpected generosity, your landlord offers an air traffic control tower &lt;strong&gt;(k8s &lt;a href=&quot;https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-architecture#master&quot;&gt;cluster master&lt;/a&gt;)&lt;/strong&gt; to accommodate the control crew, and to take care of any maintenance and improvement work that the tower may need. One less thing to care about!&lt;/p&gt;&lt;p&gt;From the tower’s privileged position and with your fun ride plans in hand, your crew will decide on which parcels to build each attraction, making sure that the parcel’s available room and spare power can accommodate those required &lt;strong&gt;(k8s &lt;a href=&quot;https://cromleylabs.com/post/k8s-resource-limits-requests-qos/&quot;&gt;resource quality of service&lt;/a&gt;)&lt;/strong&gt; by an attraction.&lt;/p&gt;&lt;p&gt;An attraction will always get the minimum power &lt;strong&gt;(k8s CPU)&lt;/strong&gt; required, will never get more than the maximum power (as it will short circuit and burn otherwise), and will just get additional power (over the minimum) if there is spare in the parcel. If there is none spare, the attraction will just move more sluggishly.&lt;/p&gt;&lt;p&gt;The Conga Dancing Party Line has a minimum and maximum size &lt;strong&gt;(k8s memory)&lt;/strong&gt;. It will always get the minimum size specified, but if gets longer than the maximum size, it will be shutdown. Everybody knows that a too long a Conga always ends up in wild riots! It will get additional space (over the minimum) if there is spare in the parcel, but if there is none, an attraction that is over its minimum space will be shutdown. It is up to the traffic control tower to decide which one, which could be the Conga Dancing Party Line itself or another.&lt;/p&gt;&lt;p&gt;As there is plenty of room and power, the team has no problem creating all the attractions that you planned. The park is almost ready!&lt;/p&gt;&lt;h2&gt;KubePark opening&lt;/h2&gt;&lt;p&gt;To help visitors reach the attraction you decide that it&amp;rsquo;s easiest for them to use a coloured path wayfinder &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport&quot;&gt;nodePort service&lt;/a&gt;)&lt;/strong&gt; like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-nodeport-service.jpg&quot; alt=&quot;kubernetes nodeport service&quot; title=&quot;Kubernetes node port service&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Cmglee_London_Victoria_station_floor_lines.jpg&quot; title=&quot;London Victoria station floor lines&quot;&gt;London Victoria station floor lines&lt;/a&gt; by &lt;a href=&quot;https://commons.wikimedia.org/wiki/User:Cmglee&quot;&gt;Cmglee&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Here you have decided to create a blue lane that will take visitors to the attractions that you tagged as “classic” and a green lane that will take them to the attractions that you tagged as “roller coaster”. You can be as specific or generic as you need, and can combine multiple tags if necessary.&lt;/p&gt;&lt;p&gt;This wayfinder is not just for visitors, your internal crew could also use it, and you could even create paths visible to just your crew &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types&quot;&gt;clusterIP service&lt;/a&gt;)&lt;/strong&gt;, for example to find the crew’s canteen.&lt;/p&gt;&lt;p&gt;As the parcels are completely surrounded by barbed wire, you need to somehow let the visitors to come into the park. One option would be to take one of the coloured paths all the way to the barbed wire and make a hole in it &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/service/#type-loadbalancer&quot;&gt;loadBalancer service&lt;/a&gt;)&lt;/strong&gt;, but this would mean that you will need to somehow secure each and every coloured path. &lt;/p&gt;&lt;p&gt;So instead you opt to have some admission gates &lt;strong&gt;(k8s &lt;a href=&quot;https://kubernetes.io/docs/concepts/services-networking/ingress/&quot;&gt;ingress&lt;/a&gt;)&lt;/strong&gt;. Your landlord provides some standard gates, so that your crew do not need to maintain them, neither do they require space or power from your parcels. The landlord will also take care of building an overpass from the gates to the parcels. Maybe in the future you will opt for more specialized admission gates &lt;strong&gt;(k8s like &lt;a href=&quot;https://docs.traefik.io/user-guide/kubernetes/&quot;&gt;Traefik&lt;/a&gt;)&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;You give the admission gates’ crew some simple instructions: &lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Visitors with kids younger than six, should use the red lane.&lt;/li&gt;
  &lt;li&gt;Visitors with just teenagers, should use the green lane.&lt;/li&gt;
  &lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;Up and running!!!&lt;/h2&gt;&lt;p&gt;And with this, your park is ready to roll:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kubernetes-explained/kubernetes-explained-in-pictures.jpg&quot; alt=&quot;kubernetes as a picture&quot; title=&quot;Kubernetes explained in pictures&quot; /&gt;&lt;/p&gt;&lt;h2&gt;Is that all?&lt;/h2&gt;&lt;p&gt;You wish! &lt;/p&gt;&lt;p&gt;You can read more about Kubernetes &lt;a href=&quot;/2018/07/16/kubernetes-explained-in-pictures-the-theme-park-analogy/#content&quot;&gt;scaling, taints and affinities&lt;/a&gt; and &lt;a href=&quot;/2018/07/22/kubernetes-explained-in-pictures-stateful-sets-persistent-volume-headless-service/#content&quot;&gt;StatefulSets, Persistent Volumes and Headless Services&lt;/a&gt;!&lt;/p&gt;
</description>
</item>
<item>
<title>
Habits of efficient developers - WeAreDevelopers 2018
</title>
<link>
https://danlebrero.com/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/
</link>
<guid>
https://danlebrero.com/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/
</guid>
<pubDate>
Wed, 04 Jul 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;The video of my WeAreDevelopers talk on &amp;ldquo;Habits of efficient developers&amp;rdquo; is online. This is what you can expect:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/6GmSEVkz1dU&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;Slides are &lt;a href=&quot;/2018/05/17/habits-of-efficient-developers/#content&quot;&gt;here&lt;/a&gt; and the full video:&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/9-cyC6O81Bk&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;Feedback and questions welcomed!&lt;/p&gt;
&lt;hr/&gt;&lt;h1&gt;Transcript&lt;/h1&gt;&lt;p&gt;Hello everybody, my name is Daniel I work for a company called Akvo and we are here today to talk about efficient developers.&lt;/p&gt;&lt;p&gt;So the first thing that I want to do is define what we mean by efficient.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.002.jpeg&quot; alt=&quot;Efficient definition&quot; title=&quot;Efficient definition&quot; /&gt;&lt;/p&gt;&lt;p&gt;To be efficient means achieving maximum productivity without wasting resources, and in our case as developers that resource is usually time, which means to be efficient is to do things fast.&lt;/p&gt;&lt;p&gt;But this definition is missing one key element for us that we can see in this quote by Peter Drucker:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.003.jpeg&quot; alt=&quot;Peter Drucker Efficient vs Effective&quot; title=&quot;Peter Drucker Efficient vs Effective&quot; /&gt;&lt;/p&gt;&lt;p&gt;So to be efficient is not that we have to be very very fast, it&amp;rsquo;s that the things we do, we have to do them in a proper way, so the decisions that we take today don&amp;rsquo;t slow us down in the future.&lt;/p&gt;&lt;p&gt;Now that we have this quote here you maybe wonder: well what is more important to be efficient or to be effective?&lt;/p&gt;&lt;p&gt;Obviously doesn&amp;rsquo;t make any sense to go really really fast if you end up in the wrong place, but equally if we know where we want to go but we never reach that place it doesn&amp;rsquo;t make sense either.&lt;/p&gt;&lt;p&gt;In fact there is some synergy between the two: if you are efficient it means that you spend less, time takes you less time to do things, which means that you have more time in your hands to stop, look around and make sure that you&amp;rsquo;re going in the right direction.&lt;/p&gt;&lt;p&gt;So to be efficient allows you to be more effective. &lt;/p&gt;&lt;p&gt;Now, in this talk we are just going to focus on what it takes, what it makes us efficient.&lt;/p&gt;&lt;h1&gt;1. Focus&lt;/h1&gt;&lt;p&gt;And we&amp;rsquo;re going to start talking about focus. &lt;/p&gt;&lt;p&gt;There are plenty of studies that try to quantify what is the cost of an interruption for us developers, and it seems that the cost is around ten or fifteen minutes. So every time that somebody comes and interrupts you it take us between ten and fifteen minutes to reload the context of the tasks that we were doing to be able to be productive.&lt;/p&gt;&lt;p&gt;So it paramount to be efficient to minimize the number of interruptions that we get, so we have long periods of time where we can focus on the task at hand.&lt;/p&gt;&lt;p&gt;There are basically two types of interruptions: the ones that you control and the ones that other people control the ones that you control.&lt;/p&gt;&lt;p&gt;This one, email notifications, is probably the worst offender. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/popup.jpg&quot; alt=&quot;Focus email popup&quot; title=&quot;Focus, email popup&quot; /&gt;&lt;/p&gt;&lt;p&gt;If you think that that little pop-up doesn&amp;rsquo;t nothing for your concentration, the truth is that for your brain it looks more something like this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.006.gif&quot; alt=&quot;Focus alert&quot; title=&quot;Focus, alert&quot; /&gt;&lt;/p&gt;&lt;p&gt;You cannot just stop looking at it. Millions of years of evolution have made our brains really sensible to any unexpected movement, mostly because the fear of being eaten. &lt;/p&gt;&lt;p&gt;So when that little pop-up shows up on your screen you have to focus on it. You don&amp;rsquo;t have an option.&lt;/p&gt;&lt;h2&gt;1a. Disable ALL notifications&lt;/h2&gt;&lt;p&gt;So efficient developers the first thing that they do they disable all notifications.&lt;/p&gt;&lt;p&gt;Not just email notifications, but absolutely all notifications. In fact you don&amp;rsquo;t even want to see that little number with the number of unread notifications on your screen, because as soon as that little number changes, your brain is going to pick up the change and you&amp;rsquo;re going to start thinking about who could send my an email or what do I need to read. &lt;/p&gt;&lt;p&gt;So you can always deal with emails whenever you want, whenever you have the time. Nobody should expect that you&amp;rsquo;d reply immediately to their emails. There are other means of of communication that are more appropriate if something is really really urgent. &lt;/p&gt;&lt;p&gt;Emails are asynchronous and it&amp;rsquo;s more efficient to deal with them in batches. &lt;/p&gt;&lt;p&gt;The only notification that you want to say is the one that tells you that you broke the build. &lt;/p&gt;&lt;p&gt;And please never be one of these guys:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.010.jpeg&quot; alt=&quot;Focus, email send&quot; title=&quot;Focus, email sent&quot; /&gt;&lt;/p&gt;&lt;p&gt;That they type an email and they want to tell you just to make sure that you received an email this is really really annoying. &lt;/p&gt;&lt;p&gt;And this brings us to the other types of interruptions: the ones that you don&amp;rsquo;t control.&lt;/p&gt;&lt;p&gt;What can you do with somebody comes to your desk and interrupt your flow? I know three possible options. &lt;/p&gt;&lt;p&gt;The first one is to wear some headphones. Really, really big, so when somebody comes you pretend that you didn&amp;rsquo;t see him and you hope that he will just walk away.&lt;/p&gt;&lt;p&gt;The second option is that you have a very good team, somebody like this guy:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.011.gif&quot; alt=&quot;Focus, tackle&quot; title=&quot;Focus, tackle&quot; /&gt;&lt;/p&gt;&lt;p&gt;Somebody that is able to tackle any interruption before it reaches the team.&lt;/p&gt;&lt;h2&gt;1b. Pair Programming&lt;/h2&gt;&lt;p&gt;The third option is to do Pair Programming. &lt;/p&gt;&lt;p&gt;If you are doing pair programming, when somebody comes to interrupt you, what should happen is that one of the two developers in the pair stands up, walk away a couple of meters and deal with the interruption, and when he&amp;rsquo;s done he goes back to the other pair, and that other guy, that was able to keep focus, works like a really fast cache to get him into a productive state a lot faster.&lt;/p&gt;&lt;p&gt;The additional benefit of pair programming is that, because you have another developer looking at what you are doing all the time, you are not going to check the news or your phone or your email as often, so that peer pressure is just going to cause you to be more efficient.&lt;/p&gt;&lt;h2&gt;1c. Rest&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/efficient-sleep-rest.jpg&quot; alt=&quot;Focus, sleep&quot; title=&quot;Focus, sleep&quot; /&gt;&lt;/p&gt;&lt;p&gt;I don&amp;rsquo;t think I need to explain this, right? We all know it, and I don&amp;rsquo;t like to sound like your mom when she tells you to eat your greens. &lt;/p&gt;&lt;p&gt;So let&amp;rsquo;s move to the next one.&lt;/p&gt;&lt;h2&gt;1d. One thing at a time&lt;/h2&gt;&lt;p&gt;Efficient developers just do one thing at a time and the reason is exactly the same why we hate interruptions: because of the context switches.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/multitask.jpg&quot; alt=&quot;Focus, several things&quot; title=&quot;Focus, several things&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://www.targetprocess.com/articles/speed-in-software-development/&quot; title=&quot;The Ivory Tower&quot;&gt;https://www.targetprocess.com/articles/speed-in-software-development/&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Here we see that doing the blue task after finishing the green task, it just takes less time.&lt;/p&gt;&lt;p&gt;In fact it is not just that it takes less time, when you try to do multiple things at the same time, the quality of your work usually suffers. &lt;/p&gt;&lt;p&gt;We all know that the definition of multitasking is:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.017.jpeg&quot; alt=&quot;Focus, multitask&quot; title=&quot;Focus, multitask&quot; /&gt;&lt;/p&gt;&lt;p&gt;Just screwing several things at the same time, so you should always focus on one thing, finish it and then you move to the next task.&lt;/p&gt;&lt;h1&gt;2. Master IDE&lt;/h1&gt;&lt;p&gt;You, me, we are all going to spend thousands upon thousands of hours in front of your IDE. It&amp;rsquo;s one of our main tools, so you really need to know it inside out because any efficiency that you gain in your IDE is going to be multiplied but those are thousands of hours that you are going to spend front of it. &lt;/p&gt;&lt;h2&gt;2a and 2b. Functionality and shorcuts&lt;/h2&gt;&lt;p&gt;Basically need to know two things: its functionality and its shortcuts. &lt;/p&gt;&lt;p&gt;Now just because you are sitting already in front of it for six hours a day it doesn&amp;rsquo;t mean that you are going to master it. &lt;/p&gt;&lt;p&gt;To master your IDE you have to make a conscious and deliberate effort to learn it, to find what functionality you don&amp;rsquo;t know about it.&lt;/p&gt;&lt;p&gt;You can read the release notes, you can follow blogs or YouTube channels of people using it or you can just do pair programming.&lt;/p&gt;&lt;h2&gt;2c. Pair Programming&lt;/h2&gt;&lt;p&gt;When you do pair programming, each of your partners is going to show you how they use the IDE and it&amp;rsquo;s going to show you functionality that you didn&amp;rsquo;t know about, or it&amp;rsquo;s going to show you more efficients ways of doing some tasks. Also you can teach him your tips and tricks, so you make the whole team more efficient. &lt;/p&gt;&lt;h1&gt;3. No menial work&lt;/h1&gt;&lt;p&gt;I&amp;rsquo;m always surprised about the amount of manual work that we, developers, can put up with. And I found it very paradoxical, given that we are paid to automate others people&amp;rsquo;s job. &lt;/p&gt;&lt;p&gt;Manual work is not just slower to do, but it&amp;rsquo;s dull, boring and error prone. So I&amp;rsquo;ll always wonder well why we keep doing it. &lt;/p&gt;&lt;p&gt;I think one of the main reason is that we sometimes forget that: &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.022.jpeg&quot; alt=&quot;Menial work, we are devs&quot; title=&quot;We are devs&quot; /&gt;&lt;/p&gt;&lt;p&gt;And as developers, we have this very rare and powerful skill that allow us to create an army of minions that will do as we say, they will not complain about it, they never get tired and they do it really really fast. &lt;/p&gt;&lt;p&gt;And I think we don&amp;rsquo;t use this skill often enough. &lt;/p&gt;&lt;p&gt;Sometimes, it maybe because we just end up with this kind of minions:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.023.gif&quot; alt=&quot;Menial work, minions&quot; title=&quot;minions&quot; /&gt;&lt;/p&gt;&lt;p&gt;But that&amp;rsquo;s a different talk.&lt;/p&gt;&lt;p&gt;Just to make sure that this sinks I&amp;rsquo;m going to repeat it again:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.025.jpeg&quot; alt=&quot;Menial work, you are a dev&quot; title=&quot;you are a dev&quot; /&gt;&lt;/p&gt;&lt;p&gt;You don&amp;rsquo;t do things that a computer, that your computer, can do for you.&lt;/p&gt;&lt;h2&gt;3a. Write programs (for yourself)&lt;/h2&gt;&lt;p&gt;So efficient developers before starting any task they always think: well, can I write a program to do the task? or at least to help me to do the task? &lt;/p&gt;&lt;p&gt;And I&amp;rsquo;m not just talking about automating some work that can take you hours, I&amp;rsquo;m also talking about automating tasks that can take you five seconds, but you do several times a day. &lt;/p&gt;&lt;p&gt;And I am so talking about writing programs for one of tasks that you&amp;rsquo;re never going to do again. First, because maybe is more efficient, you can do it faster, but  second because, I hope that, writing programs is fun. At least it is fun for me, more fun at least than doing things manually.&lt;/p&gt;&lt;p&gt;To write simple programs there is nothing like old good Bash Shell. &lt;/p&gt;&lt;p&gt;I have been a developer for eighteen years and during those 18 years I have changed operating systems, I have changed programming languages, I have changed IDEs, I have changed my mind up about all kinds of ideas and practices. &lt;/p&gt;&lt;p&gt;The only thing that has been constant during those 18 years has been Bash so I want to show a little demo about what bash can do for you&lt;/p&gt;&lt;p&gt;(Failed Demo from min 10:00 to 14:00)&lt;/p&gt;&lt;p&gt;It doesn&amp;rsquo;t matter! &lt;/p&gt;&lt;p&gt;So I&amp;rsquo;m going to then move to the next thing that is, whenever you are writing a program you should always time limit the amount of time that you are expected to use on it, this is a good example, right? because if I keep going I will spend the next 25 minutes just trying to get it working. &lt;/p&gt;&lt;p&gt;So whenever you are trying to write a program or automate a task, the first thing that you should do it&amp;rsquo;s time limit it. And if after that time limit you are not able to finish it, just move on and do things manually. &lt;/p&gt;&lt;p&gt;Now, even if you think that that&amp;rsquo;s a waste of time, I tried to for five minutes to get this thing working and I didn&amp;rsquo;t get it, well, the truth is that you have learned a little bit. That&amp;rsquo;s not wasted time. That&amp;rsquo;s invested time on you, learning and getting better. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/automate-time.jpg&quot; alt=&quot;Menial work, write programs, time&quot; title=&quot;write programs, time&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://xkcd.com/1205/&quot;&gt;https://xkcd.com/1205/&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;This is a nice table from a XKCD that tells you how much time you can expend to automate some tasks. So have a look at that.&lt;/p&gt;&lt;h2&gt;3b. Avoid GUIs&lt;/h2&gt;&lt;p&gt;And if we are talking about writing programs, what you should always do it&amp;rsquo;s avoid graphical user interfaces. Why? Because you cannot put a UI inside a for loop. UIs don&amp;rsquo;t compose. They just live in their little world.&lt;/p&gt;&lt;p&gt;Now, I&amp;rsquo;m not saying that you should never use them, because they are extremely useful when you are getting started, when you are learning something new, but once you are past that phase of beginner you will actually want to do more complex stuff and UIs just constrain what you can do.&lt;/p&gt;&lt;h2&gt;3c. Automated testing&lt;/h2&gt;&lt;p&gt;And if we&amp;rsquo;re talking about avoiding UIs, the first UI that you want to avoid is your own applications&amp;rsquo; UI. &lt;/p&gt;&lt;p&gt;There is nothing less efficient than starting application, clicking things around, and filling up forms to know if your feature, the new feature, is working or if you broke anything.&lt;/p&gt;&lt;p&gt;A part of making this more efficient, automated test also the give us the confidence to refactor and change code because it&amp;rsquo;s going to catch bugs.&lt;/p&gt;&lt;p&gt;And bugs are the worst time waste of all. First, you need to write that the bug, then somebody has to review the bug then you need to put the bug into production, and then by the time some user notice the bug, you have gone through this massive context which, because you probably wrote the bug several weeks ago and so, even if you wrote the code that has debug, that code is already alien for you, and you have to dig into it, and then you need to fix it, you need to go review it, you need to explain it to your boss, you need to fill some JIRA issues, and then you need to go again through all the release process.&lt;/p&gt;&lt;p&gt;So bugs are just a big waste of time. &lt;/p&gt;&lt;p&gt;But worse than a bug it&amp;rsquo;s having the same bug twice, right? so whenever you go and fix a bug, the first thing that you should do is write a test to prove that you are able to reproduce the bug, you see it fail and then you fix it.&lt;/p&gt;&lt;h2&gt;3d. Repeatable Development Environment&lt;/h2&gt;&lt;p&gt;And the last thing that you want to avoid to do manually is setting up the development environment, right? This is not going to make you just more efficient but the whole team more efficient. &lt;/p&gt;&lt;p&gt;This is how the instructions for any project that I joined look like from my point of view. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/ikea.jpg&quot; alt=&quot;ikea instructions&quot; title=&quot;ikea instructions&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://www.flickr.com/photos/jackbetty/4427395256&quot;&gt;https://www.flickr.com/photos/jackbetty/4427395256&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;And the only thing clear about them is that they&amp;rsquo;re not going to work. Maybe they are missing some step, or they&amp;rsquo;re not precise enough, or maybe I will make some silly mistake when I try to follow them, and the result is always the same, two, three, four days of wasted time.&lt;/p&gt;&lt;p&gt;What you want to achieve its instructions as close as possible to this:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;docker-compose up&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Just one command. And that one command should bring all the tools, and configure them, to be able to build, run and test your application. &lt;/p&gt;&lt;p&gt;If you need a database, it should install the database and configure it, and seed it with some data.&lt;/p&gt;&lt;p&gt;If you need any build tool, maven, NPM, whatever, it will download the correct version of maven and install it, and configure any SDK that you need.&lt;/p&gt;&lt;p&gt;As you can see my tool of choice right now to do this it&amp;rsquo;s Docker Compose, which is part of the Docker suite. &lt;/p&gt;&lt;p&gt;If you are not familiar with it, this an example:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.034.jpeg&quot; alt=&quot;docker compose example&quot; title=&quot;docker compose example&quot; /&gt;&lt;/p&gt;&lt;p&gt;Here we are see that our development environment needs three containers: a Postgres DB, a Redis DB and our own application.&lt;/p&gt;&lt;p&gt;This has multiple benefits. &lt;/p&gt;&lt;p&gt;First thing it takes use minutes for somebody new to get started, but also if something stops working on your development environment you can just easily just wipe the whole thing and start again. If there any change on the development environment, you know, its share immediately with the whole team. And the instructions never get out of date.&lt;/p&gt;&lt;p&gt;Also because Docker is running things in isolated environments, it means that if two projects that you&amp;rsquo;re working on they use completely different versions of a database or a JDK, well they&amp;rsquo;re going to be completely isolated, so it doesn&amp;rsquo;t bother one and the other. &lt;/p&gt;&lt;p&gt;And also because it&amp;rsquo;s so easy to make changes, it allows you, it encourage you, to experiment. If you want to try a new JDK or SDK or a new version of the database, just make the changes, started it and if you don&amp;rsquo;t like it, you just completely wipe the whole environment. &lt;/p&gt;&lt;h1&gt;4. Fast Feedback&lt;/h1&gt;&lt;p&gt;And the last section that we are going to talk about is feedback.&lt;/p&gt;&lt;p&gt;It doesn&amp;rsquo;t matter what you are working on, you should always try to find the shortest and tightest feedback loop possible.&lt;/p&gt;&lt;p&gt;Feedback is what its telling us if we are going in the right direction. &lt;/p&gt;&lt;p&gt;Feedback make us at the same time more efficient and more effective.&lt;/p&gt;&lt;p&gt;You want feedback often and early, to make sure that you don&amp;rsquo;t wander on the wrong path for too long, with the consequent waste of time and energy. &lt;/p&gt;&lt;h2&gt;4a. Test-Driven Development&lt;/h2&gt;&lt;p&gt;If we talked about the benefits of automated test, yeah, we save time, it catches bugs, allow us to the factor, when is the best moment to write tests?&lt;/p&gt;&lt;p&gt;Well my opinion is before you start doing any coding. &lt;/p&gt;&lt;p&gt;If you&amp;rsquo;re not familiar with the TDD workflow it&amp;rsquo;s basically this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.037.jpeg&quot; alt=&quot;TDD cycle&quot; title=&quot;TDD cycle&quot; /&gt;&lt;/p&gt;&lt;p&gt;I&amp;rsquo;m going to go really fast through it. &lt;/p&gt;&lt;p&gt;You first write one test, and only one test, you run it you see it fail, you see it fail and then just write enough code to make that test pass, and then you refactor, you clean up, your code, running the test just to make sure that you didn&amp;rsquo;t break anything.&lt;/p&gt;&lt;p&gt;There are least four reasons why you want to use the this workflow:&lt;/p&gt;&lt;p&gt;The first one is the fast feedback that gives you. As you are building the new feature to know that your code is doing what you expected it to do. &lt;/p&gt;&lt;p&gt;The second reason is that, if you truly believe that automated test saves you time, you want that benefit as soon as possible, as you are developing the new feature. &lt;/p&gt;&lt;p&gt;The third reason is organizational. I have hears too many times the phrase &amp;ldquo;I don&amp;rsquo;t have time to write tests&amp;rdquo; or &amp;ldquo;I&amp;rsquo;m not given the time to write tests&amp;rdquo;, and for me just actually means that, well, &amp;ldquo;I always write my code, I finish my feature, and once I finish my feature, is when I do try my test, and if there is any time pressure, well, you know, I&amp;rsquo;m not going to, I don&amp;rsquo;t get time to write those tests&amp;rdquo;. &lt;/p&gt;&lt;p&gt;And because you don&amp;rsquo;t write tests, it means that you don&amp;rsquo;t refactor your code, because to refactor code you need a very good automated test suite, and because you don&amp;rsquo;t refactor code, it means that your code starts to accumulate garbage, and because your code starts to accumulate garbage, it takes you more time to actually build new features, and because it takes you more time to build features, you get more time pressure, and you have more time pressure so you have less time to write test, closing a vicious circle cycle that always end up with the same: with us, developers, crying for our rewrite.&lt;/p&gt;&lt;p&gt;And the four reason why you want to write your test first it&amp;rsquo;s a mechanical reason: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Seeing a test fail is the test that test if the test tests what is supposed to test&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Or in simple words, how do you know that your test doesn&amp;rsquo;t have any bug? &lt;/p&gt;&lt;p&gt;If you write a test and you see it red, there is a strong indication that there is some piece of production code, some logic, that is not there. &lt;/p&gt;&lt;p&gt;If you write the test and you never see it red you don&amp;rsquo;t know if it is because you&amp;rsquo;ve ready implemented a feature, or because you forgot on an assert in your test, or the setup code is not correct.&lt;/p&gt;&lt;p&gt;Now when you present this idea to a lot of people they always come up with this phrase:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.039.jpeg&quot; alt=&quot;what to test&quot; title=&quot;not sure what I am going to test&quot; /&gt;&lt;/p&gt;&lt;p&gt;I can&amp;rsquo;t write a test first because I don&amp;rsquo;t know what I&amp;rsquo;m going to build. &lt;/p&gt;&lt;p&gt;And this can mean different things. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.041.jpeg&quot; alt=&quot;business&quot; title=&quot;business&quot; /&gt;&lt;/p&gt;&lt;p&gt;It can mean that you don&amp;rsquo;t understand what business is asking you to do. And in this case it&amp;rsquo;s true you cannot write any test, but you cannot write any production code either. What you have to do is go back to business and ask for clarification. What do you want to do? &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.043.jpeg&quot; alt=&quot;business ok&quot; title=&quot;business ok&quot; /&gt;&lt;/p&gt;&lt;p&gt;The other case is that you actually understand business, and you&amp;rsquo;re too actually understand the logic that you need to build, but you don&amp;rsquo;t know if you are going to write one class, or ten classes, or if you are going to put an if statement or a switch or a factory factory factory. &lt;/p&gt;&lt;p&gt;You don&amp;rsquo;t know what you&amp;rsquo;re going to do, but you know, understand, the logic, and you know, understand, the mechanics of the side effects. So you know which database you are going to use, you have use it ten thousand times already, you know the table, you know everything. &lt;/p&gt;&lt;p&gt;In all these cases you can actually run a test first.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.045.jpeg&quot; alt=&quot;side effects&quot; title=&quot;side effects&quot; /&gt;&lt;/p&gt;&lt;p&gt;But it&amp;rsquo;s true that sometimes we actually don&amp;rsquo;t know how to do the side effects that we are asked for. We, for example, may know that logic for your new application, functionality it needs to call some restful endpoint, to get some forex exchange, and you have never used it, and you don&amp;rsquo;t know the end point, and you don&amp;rsquo;t know what you need to give to it, and you don&amp;rsquo;t know what it&amp;rsquo;s going to give you back. Or maybe you need to consume some messages from a message queue, and you have never done that, so you don&amp;rsquo;t know which libraries to use, you don&amp;rsquo;t know how they work. &lt;/p&gt;&lt;p&gt;In all those cases you don&amp;rsquo;t really know what you don&amp;rsquo;t really know what are going to do.&lt;/p&gt;&lt;p&gt;There is always this face of exploration that we have in our job that we used to fill up those gaps, to convert unknown side-effects into known side-effects&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.046.jpeg&quot; alt=&quot;understanding side effects&quot; title=&quot;understanding side effects&quot; /&gt;&lt;/p&gt;&lt;p&gt;And that&amp;rsquo;s something that TDD doesn&amp;rsquo;t help you with.&lt;/p&gt;&lt;p&gt;What you want to do it is, first, read the documentation to see if you are able to fill those gaps, and the second thing you want is to write a lot of little programs, to test, to play around with that technology. &lt;/p&gt;&lt;p&gt;For this the best tool that I know it&amp;rsquo;s a REPL.&lt;/p&gt;&lt;h2&gt;4b. REPL&lt;/h2&gt;&lt;p&gt;REPL stands for read eval print loop and it&amp;rsquo;s just basically a fancy way of saying that you have like a command line interface inside your application.&lt;/p&gt;&lt;p&gt;Instead of trying to explain it, let&amp;rsquo;s see it in action, if it works this time. &lt;/p&gt;&lt;p&gt;(Demo from 25:00 to 29:30)&lt;/p&gt;&lt;h2&gt;4c. Code reviews&lt;/h2&gt;&lt;p&gt;The last thing that we are going to talk about it&amp;rsquo;s code reviews. &lt;/p&gt;&lt;p&gt;Code reviews tell us if the design of the code that we are doing, if it fits the application.&lt;/p&gt;&lt;p&gt;It allows one of your your teammates to tell you if you have any bugs, and it also we can use it to share knowledge, right? It&amp;rsquo;s a way of sharing knowledge. &lt;/p&gt;&lt;p&gt;So efficient developers want their code to be code review. &lt;/p&gt;&lt;p&gt;Now there is something very true behind code reviews. &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/code-review.jpg&quot; alt=&quot;big code review&quot; title=&quot;big code review&quot; /&gt;&lt;/p&gt;&lt;p&gt;When we are presented with this huge massive changes, I don&amp;rsquo;t know what your reaction but my reaction is something like &amp;ldquo;oh my god&amp;rdquo;.&lt;/p&gt;&lt;p&gt;But when we get small changes, we are able to give useful feedback to the author of the change, because we are able to understand the change. &lt;/p&gt;&lt;p&gt;Also, even if you are very disciplined developer and you go through that really painful review process, in my experience what does it happen when you go and tell the author like, well you know, I think your design is just shit, no, no, no, your sorry you could improve your design, or we could use a different library that will save us some time, or some resources, or whatever. &lt;/p&gt;&lt;p&gt;What usually happens its the author say like, yeah, I think you are right, but you know, I have already spent like several days or weeks working on this, and the end of the sprint is tomorrow, so even if I think you&amp;rsquo;re right, I don&amp;rsquo;t think I&amp;rsquo;m going to have time to do your change, what you&amp;rsquo;re suggesting, because it&amp;rsquo;s going to take me several more days to do it. Also, you know, it&amp;rsquo;s already working. So let&amp;rsquo;s do something different, let&amp;rsquo;s just commit the change as it is, and we are going to ask the product owner to create a refactoring story. I&amp;rsquo;m sure he will be delighted to put it on top of the priority queue. &lt;/p&gt;&lt;p&gt;And we all know that those things never happen, so you end up again with worse code that, leads to this lower implemented feature, with blah blah blah&amp;hellip;&lt;/p&gt;&lt;p&gt;So efficient developers, they don&amp;rsquo;t want just code reviews they want small and early code reviews&lt;/p&gt;&lt;h2&gt;4c. Continuous code reviews&lt;/h2&gt;&lt;p&gt;So what they actually want is continuous code reviews. &lt;/p&gt;&lt;p&gt;This practice consists on getting one of your teammates to sit just beside you, and as you are implementing the feature, this developer sitting beside you, is going to suggest improvements on your code, it&amp;rsquo;s going to be catching bugs that you are doing, and for the reviewer the changes are really, really, small. Ss you type them, he see those those changes, and for you, as the author, you can get feedback even before you start writing any code. &lt;/p&gt;&lt;p&gt;Additionally if for whatever reason you are not able to finish the feature, this other developer it&amp;rsquo;s able to pick that feature without any effort, because he has been behind each of your decisions, so you avoid those knowledge silos within the team. &lt;/p&gt;&lt;p&gt;Also, this this other developer can work as your personal StackOverflow, because maybe he has already found that similar issue and he already knows how to fix it. And sometimes you don&amp;rsquo;t even need to ask the question because he sees what you are doing. &lt;/p&gt;&lt;p&gt;Some people call also this &lt;em&gt;Pair programming&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;So that&amp;rsquo;s all that I have, very briefly:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/habits-of-efficient-developers/habits-of-efficient-developers.053.jpeg&quot; alt=&quot;summary&quot; title=&quot;summary&quot; /&gt;&lt;/p&gt;&lt;p&gt;Focus master, your IDE, your tools, avoid manual work, and find yourself the fastest feedback loop possible.&lt;/p&gt;&lt;p&gt;And last words:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;you should always find time to stop, &lt;/p&gt;&lt;p&gt;reflect on how you are working, and &lt;/p&gt;&lt;p&gt;never ever stop learning&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;Thank you very much.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;The conference talk (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
A more efficient developer: Go and have a rest
</title>
<link>
https://danlebrero.com/2018/07/02/efficient-developer-rest-and-sleep/
</link>
<guid>
https://danlebrero.com/2018/07/02/efficient-developer-rest-and-sleep/
</guid>
<pubDate>
Mon, 02 Jul 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;You know it, I know it, everybody knows it.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Go and have a rest (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
Per user rate limiting with OpenID connect and Istio in Kubernetes
</title>
<link>
https://danlebrero.com/2018/05/31/per-user-rate-limiting-with-istio-openid-connect-in-kubernetes/
</link>
<guid>
https://danlebrero.com/2018/05/31/per-user-rate-limiting-with-istio-openid-connect-in-kubernetes/
</guid>
<pubDate>
Thu, 31 May 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;&lt;em&gt;This article originally appeared on &lt;a href=&quot;https://akvo.org/blog/per-user-rate-limiting-with-openid-connect-and-istio-in-kubernetes/&quot;&gt;Akvo&amp;rsquo;s blog&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;To make sure that each of our partners is able to use &lt;a href=&quot;https://github.com/akvo/akvo-flow-api/wiki/Akvo-Flow-REST-API&quot;&gt;Akvo’s API&lt;/a&gt;, we need to ensure that nobody is able to abuse it. We want to ensure that each partner has access to a fair share of the servers’ resources.&lt;/p&gt;&lt;p&gt;In the case of HTTP APIs, this usually means limiting the rate at which partners can make requests. A system that performs rate limiting needs to:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Identify who is making the HTTP request.&lt;/li&gt;
  &lt;li&gt;Count how many requests each user has made.&lt;/li&gt;
  &lt;li&gt;Reject any user request once that user has depleted their allotment.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;There are plenty of open source products and libraries out there that you can choose from, but we decided to give &lt;a href=&quot;https://istio.io/&quot;&gt;Istio&lt;/a&gt; a try.&lt;/p&gt;&lt;p&gt;For such a task, Istio is a little bit heavy-handed. However, since Istio is a &lt;a href=&quot;http://philcalcado.com/2017/08/03/pattern_service_mesh.html&quot;&gt;service mesh&lt;/a&gt;, it also provides routing, load balancing, blue/green deployment, canary releases, traffic forking, circuit breakers, timeouts, network fault injection and telemetry. What’s more, it also offers &lt;a href=&quot;https://istio.io/docs/concepts/security/mutual-tls.html&quot;&gt;internal TLS encryption&lt;/a&gt; and &lt;a href=&quot;https://istio.io/docs/concepts/security/rbac.html&quot;&gt;Role-Based access control&lt;/a&gt;, which is very important for us given our commitment to the &lt;a href=&quot;https://akvo.org/blog/gdpr-becoming-compliant/&quot;&gt;upcoming GDPR legislation&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;Identifying the user&lt;/h2&gt;&lt;p&gt;Akvo’s API already uses the &lt;a href=&quot;https://github.com/akvo/akvo-flow-api/wiki/Authentication&quot;&gt;OpenID connect standard&lt;/a&gt; and Istio comes with a handy &lt;a href=&quot;https://github.com/istio/proxy/tree/master/src/envoy/http/jwt_auth&quot;&gt;JWT-auth filter&lt;/a&gt;, so we just need to configure the filter to point to our OpenID provider:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: EndUserAuthenticationPolicySpec
metadata:
  name: flow-api-auth-policy
  namespace: default
spec:
  jwts:
    - issuer: https://kc.akvotest.org/auth/realms/akvo
      jwks_uri: https://kc.akvotest.org/auth/realms/akvo/protocol/openid-connect/certs
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And then we need to tell Istio to apply the authentication spec to our backend service:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: EndUserAuthenticationPolicySpecBinding
metadata:
  name: flow-api-auth-policy-binding
  namespace: default
spec:
  policies:
    - name: flow-api-auth-policy
      namespace: default
  services:
    - name: flow-api
      namespace: default
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With this, if there is a JWT access token present in the request, Istio will validate it and will add the principal to the request, but if there is no token, the requests will still go through.&lt;/p&gt;&lt;h2&gt;Enforcing a user&lt;/h2&gt;&lt;p&gt;Given that any access to the API must be done with an access token, we can add a policy rule to enforce it. To configure a policy we will need:&lt;/p&gt;&lt;p&gt;A handler, which in this particular case is a &lt;a href=&quot;https://archive.istio.io/v0.6/docs/reference/config/adapters/denier&quot;&gt;Denier adapter&lt;/a&gt; that will return a 401:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: &amp;quot;config.istio.io/v1alpha2&amp;quot;
kind: denier
metadata:
  name: flow-api-handler
  namespace: default
spec:
  status:
    code: 16
    message: You are not authorized to access the service
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;An instance, which in this case is a &lt;a href=&quot;https://archive.istio.io/v0.6/docs/reference/config/template/checknothing&quot;&gt;Check Nothing&lt;/a&gt; template as the handler requires no data:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: &amp;quot;config.istio.io/v1alpha2&amp;quot;
kind: rule
metadata:
  name: flow-api-deny
  namespace: default
spec:
  match: destination.labels[&amp;quot;run&amp;quot;] == &amp;quot;flow-api&amp;quot; &amp;amp;&amp;amp; (request.auth.principal|&amp;quot;unauthorized&amp;quot;) == &amp;quot;unauthorized&amp;quot;
  actions:
  - handler: flow-api-handler.denier.default
    instances: [flow-api-denyrequest.checknothing.default]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;See the &lt;a href=&quot;https://archive.istio.io/v0.6/docs/concepts/policy-and-control/mixer-config&quot;&gt;Istio documentation&lt;/a&gt; if you are not familiar with the handler, instance or rule concepts.&lt;/p&gt;&lt;h2&gt;Counting usage&lt;/h2&gt;&lt;p&gt;First, we need to define what we want to count:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: quota
metadata:
  name: requestcount
  namespace: istio-system
spec:
  dimensions:
    destination: destination.labels[&amp;quot;run&amp;quot;] | destination.service | &amp;quot;unknown&amp;quot;
    user: request.auth.principal|&amp;quot;unauthorized&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We are using two dimensions, the user and the destination service so that we can have different limits for different backend services.&lt;/p&gt;&lt;p&gt;To do the actual counting:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: QuotaSpec
metadata:
  name: flow-api-quota
  namespace: default
spec:
  rules:
    - quotas:
        - quota: requestcount.quota.istio-system
          charge: 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Istio rate limiting gives you the flexibility to &amp;ldquo;charge&amp;rdquo; more for requests that could be more expensive to execute, but in our case, we’ve decided to treat all the requests the same.&lt;/p&gt;&lt;p&gt;And last, we need to wire the counting with the backend service:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: QuotaSpecBinding
metadata:
  name: flow-api-quota-binding
  namespace: default
spec:
  quotaSpecs:
    - name: flow-api-quota
      namespace: default
  services:
    - name: flow-api
      namespace: default
&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;Enforcing usage quotas&lt;/h2&gt;&lt;p&gt;Now that we know who you are and how to count, we need to define what is a reasonable usage. We do this through a &lt;a href=&quot;https://archive.istio.io/v0.6/docs/reference/config/adapters/memquota&quot;&gt;Memory Quota adapter&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: memquota
metadata:
  name: handler
  namespace: istio-system
spec:
  quotas:
  - name: requestcount.quota.istio-system
    maxAmount: 60
    validDuration: 10s
    overrides:
    - dimensions:
        destination: flow-api
      maxAmount: 20
      validDuration: 10s
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So we allow up to ten requests per second for each user, except if the requests go to the Flow API, in which case we allow up to two requests per second.&lt;/p&gt;&lt;p&gt;Note that in production you will want to use a &lt;a href=&quot;https://archive.istio.io/v0.6/docs/reference/config/adapters/redisquota&quot;&gt;Redis Quota&lt;/a&gt; instead of a Memory Quota, as the Memory Quota is ephemeral and local to the Mixer instance.&lt;/p&gt;&lt;p&gt;Finally, we create a policy rule to wire up the quota with the counters: &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;apiVersion: config.istio.io/v1alpha2
kind: rule
metadata:
  name: quota
  namespace: istio-system
spec:
  actions:
  - handler: handler.memquota
    instances:
    - requestcount.quota
&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;Testing&lt;/h2&gt;&lt;p&gt;Now, we can check that everything is working as expected and that no user is able to abuse the system. For the testing, we changed the quota to one request every three seconds. Here is the result:&lt;/p&gt;&lt;p&gt;&lt;iframe src=&quot;https://player.vimeo.com/video/260455239?title=0&amp;byline=0&amp;portrait=0&quot; width=&quot;640&quot; height=&quot;360&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;You can find a version of the test script &lt;a href=&quot;https://github.com/akvo/akvo-platform/blob/issue-57/rate-limit-istio/istio/simple-check.sh&quot;&gt;here&lt;/a&gt; and all the code above &lt;a href=&quot;https://github.com/akvo/akvo-platform/tree/b17ed526fa48d22e7ef7a2f37195302119309dca/istio/k8s&quot;&gt;here&lt;/a&gt;. &lt;/p&gt;&lt;h2&gt;Are we done?&lt;/h2&gt;&lt;p&gt;Istio allows us to ensure that all of our partners get a fair share of the resources, with a little bit of configuration and without having to modify or change any of our existing code, which is a big plus.&lt;/p&gt;&lt;p&gt;But rate limiting is just one part of making Akvo’s platforms more stable. Istio also comes with a lot more goodies to add to that stability, and to make it more secure, which for sure we will investigate in the near future.&lt;/p&gt;
</description>
</item>
<item>
<title>
Habits of efficient developers - slides
</title>
<link>
https://danlebrero.com/2018/05/17/habits-of-efficient-developers/
</link>
<guid>
https://danlebrero.com/2018/05/17/habits-of-efficient-developers/
</guid>
<pubDate>
Thu, 17 May 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;I was honored to talk this year at &lt;a href=&quot;https://www.wearedevelopers.com/congress/&quot;&gt;WeAreDevelopers 2018&lt;/a&gt; about &amp;ldquo;Habits of efficient developers&amp;rdquo;.&lt;/p&gt;&lt;p&gt;Here are the slides in &lt;a href=&quot;/slides/habits-of-efficient-developers.key&quot;&gt;keynote format&lt;/a&gt;, &lt;a href=&quot;/slides/habits-of-efficient-developers.pptx&quot;&gt;ppt format (untested!)&lt;/a&gt; and &lt;a href=&quot;https://www.slideshare.net/DanielLebrero2/habits-ofefficientdevelopers&quot;&gt;SlideShare (quite broken!)&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
<item>
<title>
Did you read my email?
</title>
<link>
https://danlebrero.com/2018/04/30/did-you-read-my-email/
</link>
<guid>
https://danlebrero.com/2018/04/30/did-you-read-my-email/
</guid>
<pubDate>
Mon, 30 Apr 2018 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;Dedicated with all my fondness to that good friend at &lt;a href=&quot;https://www.ig.com&quot;&gt;IG&lt;/a&gt; that used to do this and never realized how extremely annoying it was.&lt;/p&gt;&lt;p&gt;Part of my upcoming conference talk &amp;ldquo;Habits of efficient developers&amp;rdquo; at &lt;a href=&quot;https://www.wearedevelopers.com/congress/&quot;&gt;WeAreDevelopers 2018&lt;/a&gt;.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Did you read my email? (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
Kafka, GDPR and Event Sourcing
</title>
<link>
https://danlebrero.com/2018/04/11/kafka-gdpr-event-sourcing/
</link>
<guid>
https://danlebrero.com/2018/04/11/kafka-gdpr-event-sourcing/
</guid>
<pubDate>
Wed, 11 Apr 2018 09:35:00 +0200
</pubDate>
<description>
&lt;p&gt;You probably already know that the EU has approved this nice piece of legislation called GDPR (&lt;a href=&quot;https://en.wikipedia.org/wiki/General_Data_Protection_Regulation&quot;&gt;General Data Protection Regulation&lt;/a&gt;) that gives us back some control over our personal data.&lt;/p&gt;&lt;p&gt;From a technical point of view, if you have bought into Event Sourcing and Kafka, it is of special interest GDPR’s &amp;ldquo;right to erasure&amp;rdquo; (aka. forget everything that you know about me), as it is at odds with the idea of an immutable event log that does not forget anything. &lt;/p&gt;&lt;p&gt;To handle GDPR in an event sourced architecture, here are the most interesting options:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;p&gt;Removing data from projections might be good enough. A suggestion from &lt;a href=&quot;https://twitter.com/michieltcs&quot;&gt;Michiel Rook&amp;rsquo;s&lt;/a&gt; &lt;a href=&quot;https://www.michielrook.nl/2017/11/event-sourcing-gdpr-follow-up/&quot;&gt;blog&lt;/a&gt; is that maybe is enough to remove the data from the projections/read models, and there is no need to touch the data in the event store. If this option is within the law, the &amp;ldquo;right to erasure&amp;rdquo; becomes just another event that projections need to handle. A perfect fit for Event Sourcing.&lt;/p&gt;&lt;/li&gt;
  &lt;li&gt;&lt;p&gt;Deleting/updating Kafka messages: &lt;a href=&quot;https://twitter.com/benstopford&quot;&gt;Ben Stopford&lt;/a&gt; &lt;a href=&quot;https://www.confluent.io/blog/handling-gdpr-log-forget/&quot;&gt;reminds us&lt;/a&gt; that in Kafka you can &amp;ldquo;delete&amp;rdquo; and &amp;ldquo;update&amp;rdquo; messages if you are using a compacted topic, which means that to comply with the &amp;ldquo;right to erasure&amp;rdquo;, we need to find all the events for a user and for each send a new message with the same key (the event id) and a null (or updated) payload. &lt;/p&gt;&lt;p&gt;The main concern with this approach is that the event store is no longer immutable, so it will be very tempting to use the same loophole in other non-GDPR situations. &lt;/p&gt;&lt;/li&gt;
  &lt;li&gt;&lt;p&gt;Encryption: Another suggestion from &lt;a href=&quot;https://www.michielrook.nl/2017/11/forget-me-please-event-sourcing-gdpr/&quot;&gt;Michiel’s blog&lt;/a&gt; is to encrypt all the messages for a particular user with a key, and when the user want to exercise its &amp;ldquo;right to erasure&amp;rdquo;, we just need to forget the encryption key.&lt;/p&gt;&lt;p&gt;The issue with this approach in the key management. In Michiel’s words: &amp;ldquo;storing, finding and retrieving the right encryption key &amp;hellip; becomes especially interesting at scale&amp;rdquo;. And because it is interesting, let&amp;rsquo;s dive into a possible solution.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;Highly available, highly scalable RESTful KeyManagement service&lt;/h2&gt;&lt;p&gt;Synchronous HTTPS? Seriously?&lt;/p&gt;&lt;h2&gt;The Kafka way&lt;/h2&gt;&lt;p&gt;Assuming that you are already storing your data in Kafka, and given that Kafka is able to handle data at scale, why not use Kafka itself to store and retrieve the encryption keys?&lt;/p&gt;&lt;p&gt;Let’s start with a picture of how our architecture could look like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kafka-gdpr/kakfa-gdpr-encryption-architecture.png&quot; alt=&quot;Kafka GDPR encryption architecture&quot; title=&quot;Kafka GDPR encryption architecture&quot; /&gt;&lt;/p&gt;&lt;p&gt;Your &lt;code&gt;Event Producer&lt;/code&gt; is your regular service that pushes unencrypted data to some &lt;code&gt;To-Encrypt&lt;/code&gt; topic.&lt;/p&gt;&lt;p&gt;To comply with GDPR, this topic will have some reasonably short time-based retention policy, so that Kafka deletes the data after that time, but remember that the retention period should be longer than your expected downtime of the &lt;code&gt;Encryptor&lt;/code&gt; service, as if the &lt;code&gt;Encryptor&lt;/code&gt; service is down for longer, Kafka may delete the data before it is encrypted and safely stored in the &lt;code&gt;Encrypted-Data&lt;/code&gt; topic.&lt;/p&gt;&lt;p&gt;The &lt;code&gt;Encryptor&lt;/code&gt; service will take care of encrypting any message and generating new encryption keys for new users. It leverages Kafka Streams state management to keep a local copy of the encryption keys for the partitions that each instance owns, so that looking up an encryption key will be at most a disk seek.&lt;/p&gt;&lt;p&gt;This application also has to react to the user exercising his right to be forgotten by deleting the local copy of the encryption key from its state, and by deleting the encryption key from the &lt;code&gt;Encryption-keys&lt;/code&gt; topic.&lt;/p&gt;&lt;p&gt;The &lt;code&gt;Encrypted-Data&lt;/code&gt; topic will be where the events are stored forever, with no retention policies. This is your event log.&lt;/p&gt;&lt;p&gt;The &lt;code&gt;Encryption-Keys&lt;/code&gt; topic will be a compacted topic. When it is time to forget the user, the &lt;code&gt;Encryptor&lt;/code&gt; service will just send a tombstone to override the user’s encryption key, so it is lost forever and nobody will be able to decrypt its data again.&lt;/p&gt;&lt;p&gt;To decrypt the data, the &lt;code&gt;Event Consumer&lt;/code&gt; will basically will need to do a join of the &lt;code&gt;Encrypted-data&lt;/code&gt; topic with the &lt;code&gt;Encryption-Keys&lt;/code&gt; topic. Again, we will rely on Kafka Streams state management to keep a local copy of the encryption keys. &lt;/p&gt;&lt;p&gt;Similar to the &lt;code&gt;Encryptor&lt;/code&gt;, the &lt;code&gt;Event Consumer&lt;/code&gt; will need to react appropriately when the user request to be forgotten, both by deleting the local encryption key and any other state associated with that user. &lt;/p&gt;&lt;p&gt;This architecture looks fabulous from this ivory tower. &lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://www.pedabe-concept.de&quot; title=&quot;The Ivory Tower&quot;&gt;&lt;img src=&quot;/images/blog/kafka-gdpr/kafka-ivory-tower.jpg&quot; alt=&quot;ivory tower&quot; /&gt;&lt;/a&gt;&lt;br/&gt;&lt;span style=&quot;background-color: #ecf0f1&quot;&gt;&lt;small&gt;Image attribution: &lt;a href=&quot;https://www.pedabe-concept.de&quot; title=&quot;The Ivory Tower&quot;&gt;The Ivory Tower&lt;/a&gt; by &lt;a href=&quot;https://www.pedabe-concept.de&quot;&gt;Peter Bartels&lt;/a&gt;.&lt;/small&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;Implementation details&lt;/h3&gt;&lt;p&gt;If you want to get your hands dirty, the implementation details are &lt;a href=&quot;/2018/04/11/kafka-gdpr-event-sourcing-implentation/#content&quot;&gt;here&lt;/a&gt;. &lt;/p&gt;&lt;h2&gt;&lt;a name=&quot;conclusions&quot;&gt;&lt;/a&gt;Conclusions&lt;/h2&gt;&lt;p&gt;In summary, we comply with GDPR because our &lt;code&gt;to-encrypt&lt;/code&gt; topic has a short time-based retention policy, our encryption keys are in a compacted topic and our event log is encrypted with a per-user encryption key. &lt;/p&gt;&lt;p&gt;Also, our applications have to handle a new &amp;ldquo;forget me&amp;rdquo; event type and erase any PII data that they may store.&lt;/p&gt;&lt;p&gt;As we saw, the implementation is not rocket science, but it raises some more challenges:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Do we encrypt the whole message or just a subset? If it is just a subset, how do we handle schemas? If not a subset, we lose all the data, even the non-PII one.&lt;/li&gt;
  &lt;li&gt;Can we reuse the same encryptor for multiple topics? If so, topics must be copartition. If not, we will need to separate the key generation from the encryptors, so the encryption keys can be repartition.&lt;/li&gt;
  &lt;li&gt;Even if the decryption is transparent to the consumer, it still needs to handle the &amp;ldquo;forget me&amp;rdquo; special case.&lt;/li&gt;
  &lt;li&gt;You will need to choose an encryption algorithm that is fast enough and secure enough. Can you afford an additional 1 or 10 milliseconds processing time to each message? In theory, if the consumer is up to date, it can always consume directly from the to-encrypt topic.&lt;/li&gt;
  &lt;li&gt;A comment in &lt;a href=&quot;https://www.michielrook.nl/2017/11/event-sourcing-gdpr-follow-up/#comment-16405&quot;&gt;Michiel blog&lt;/a&gt; points out that forgetting the key is not enough. Every few years, we also need to &lt;a href=&quot;https://www.keylength.com/en/&quot;&gt;update encryption algorithms&lt;/a&gt;, which means we need to encrypt everything again.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;So it seems possible to use encryption to handle event sourcing data in Kafka, but is it better than the other options? For sure it is worse than removing data from projections, if this is an option at all. But, is it better than just using a compacted topic to store the event log as Ben Stopford suggests? &lt;/p&gt;&lt;p&gt;Well, how much do you value immutability? That much?!?! That little?!?!&lt;/p&gt;
</description>
</item>
<item>
<title>
Kafka, GDPR and Event Sourcing - Implementation details
</title>
<link>
https://danlebrero.com/2018/04/11/kafka-gdpr-event-sourcing-implentation/
</link>
<guid>
https://danlebrero.com/2018/04/11/kafka-gdpr-event-sourcing-implentation/
</guid>
<pubDate>
Wed, 11 Apr 2018 09:45:00 +0200
</pubDate>
<description>
&lt;p&gt;This post contains the implementation details of &lt;a href=&quot;/2018/04/11/kafka-gdpr-event-sourcing#content&quot;&gt;this other post&lt;/a&gt; about a possible architecture for Kafka, GDPR and Event Sourcing. Please read that other post for context and conclusions.&lt;/p&gt;&lt;p&gt;The proof of concept (PoC) uses Kafka Streams API and all code, including a docker-compose environment to test it, is &lt;a href=&quot;https://github.com/dlebrero/kafka-gdpr-event-sourcing&quot;&gt;here&lt;/a&gt;. &lt;/p&gt;&lt;h2&gt;Event producer&lt;/h2&gt;&lt;p&gt;Nothing interesting.&lt;/p&gt;&lt;h2&gt;Encryptor&lt;/h2&gt;&lt;p&gt;The encryptor job is pretty easy: the first time that it sees a key, it needs to generate a new encryption key, store it and push it to the &lt;code&gt;encryption-keys&lt;/code&gt; topic for other consumer. In code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn get-or-create-encryption-key [^KeyValueStore store ^ProcessorContext ctx k]
 (if-let [encryption-key (.get store k)]
   encryption-key
   (let [new-encryption-key (generate-encryption-key)]
     (.put store k new-encryption-key)
     (.forward ctx k new-encryption-key &amp;quot;encryption-keys&amp;quot;)
     new-encryption-key)))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This means that we are storing the key twice: once in the store changelog and once in the &lt;code&gt;encryption-keys&lt;/code&gt; topic. This is ok as we dont want to couple the implementation details of the encryptor (what we store in the changelog) with what the consumers need. For example, if we decided to use an asymmetric algorithm, the store will have the private key while the &lt;code&gt;encryption-keys&lt;/code&gt; topic would have the public one.&lt;/p&gt;&lt;p&gt;After we have the encryption key, in the PoC we just encrypt the whole value of the message and forward it to the encrypted Kafka topic, but during the implementation it raised the question about whether it would be more appropriate to encrypt just the PII data within the message. Some possible options:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;The value to have two fields: PII and non-PII. If the encryption key is deleted, the PII field will be deserialized to null.&lt;/li&gt;
  &lt;li&gt;Have PII events and non-PII events, in the same or different topics, depending if ordering between them is important or not.&lt;/li&gt;
  &lt;li&gt;When the user exercises the right of erasure, before deleting the encryption key, push a event with the non-PII data that we want to retain.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;The second option seems the simplest one.&lt;/p&gt;&lt;p&gt;The Encryptor also listen to the GDPR messages and when the user exercises the right to erasure, we store a tombstone both in the local store and in the &lt;code&gt;encryption-keys&lt;/code&gt; topic: &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn handle-gdpr [^KeyValueStore store ^ProcessorContext ctx k _]
 (.put store k common/tombstone)
 (.forward ctx k common/tombstone))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We will explain in the Event Consumer why a tombstone and not just delete the record.&lt;/p&gt;&lt;p&gt;Another decision that we need to make is what to do if the encryptor gets a message after the user has exercised the right to erase: &lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Create a new key for all the new messages, so new messages will be readable. In this case, we don&amp;rsquo;t need to store a tombstone in the local store.&lt;/li&gt;
  &lt;li&gt;Ignore the message, basically deleting it.&lt;/li&gt;
  &lt;li&gt;Create a new key just for the event, and never store the key, effectively creating an unreadable event.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;It will depend on a business decision, but either the first or last options seem like the most sensible ones.&lt;/p&gt;&lt;h3&gt;Reusable Encryptor&lt;/h3&gt;&lt;p&gt;Ideally, we don&amp;rsquo;t want to change the Encryptor every time there is a new topic that needs to be encrypted.&lt;/p&gt;&lt;p&gt;While KafkaStreams allows to subscribe to a set of topics based on a regular expression, and it will subscribe to newly created topics that match that expression, there is no obvious way to publish a message to an arbitrary topic. &lt;/p&gt;&lt;p&gt;Maybe the correct way is to provide a &lt;a href=&quot;https://github.com/apache/kafka/blob/b8f8ce4146af4fbc7ae40380f1ff251b05bd8773/streams/src/main/java/org/apache/kafka/streams/KafkaClientSupplier.java#L27&quot;&gt;KafkaClientSupplier&lt;/a&gt; to the &lt;a href=&quot;https://github.com/apache/kafka/blob/b8f8ce4146af4fbc7ae40380f1ff251b05bd8773/streams/src/main/java/org/apache/kafka/streams/KafkaStreams.java#L546&quot;&gt;KafkaStreams&lt;/a&gt;, so that both our code and the KafkaStreams code use the same Kafka producer, but we decided to do what a &lt;a href=&quot;https://github.com/apache/kafka/blob/3bedcce01b9d3e8ba0516fa33eb59d57817ce27e/streams/src/main/java/org/apache/kafka/streams/processor/internals/SinkNode.java#L79&quot;&gt;SinkNode&lt;/a&gt; does:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn send [^ProcessorContext ctx k v]
 (let [rc ^RecordCollector (.recordCollector ^RecordCollector$Supplier ctx)]
        (.send rc
            (encrypted-topic-name (.topic ctx))
            k v (.timestamp ctx)
            (-&amp;gt; ctx .keySerde .serializer)
            (-&amp;gt; ctx .valueSerde .serializer)
            nil))))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Never a good idea to use an internal api, but good enough for the PoC.&lt;/p&gt;&lt;p&gt;But even if this solves the problem of sending messages to an arbitrary topic, there is a bigger problem: to be able to reuse the Encryptor, all input topics must be copartition (aka. must have the same number of partitions). &lt;/p&gt;&lt;p&gt;If the topics do not have the same number of partitions, then two messages for the same user in different topics can end up in different instances of the Encryptor service, which means that each instance will generate an encryption key and push it to the &lt;code&gt;encryption-keys&lt;/code&gt; topic, one overwriting the other, making some messages unreadable.&lt;/p&gt;&lt;p&gt;If the topics have the same number of partitions, then the &lt;a href=&quot;https://github.com/apache/kafka/blob/4a274bc9fd2ac3714788af0429fde8945a48636f/clients/src/main/java/org/apache/kafka/clients/consumer/RangeAssignor.java#L29&quot;&gt;default partition assignor&lt;/a&gt; will distribute the partitions between the Encryptor instances so that partition 1 for &lt;strong&gt;all topics&lt;/strong&gt; is consumed by one consumer, partition 2 for all topics is consumed by another consumer, etc… This way all message for a given user end up in the same instance, even from different topics. &lt;/p&gt;&lt;p&gt;As copartitioning all topics is unlikely to be desirable, we probably need to split the Encryptor in two: one app to generate the encryption keys and another one to do the actual encryption. Something like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kafka-gdpr/kafka-gdpr-split.png&quot; alt=&quot;Kafka GDPR encryption architecture reuse&quot; title=&quot;Kafka GDPR encryption architecture - reuse&quot; /&gt;&lt;/p&gt;&lt;p&gt;This way, the encryption app can repartition the encryption keys if required.&lt;/p&gt;&lt;h2&gt;Event Consumer&lt;/h2&gt;&lt;p&gt;The event consumer has to join the events from the &lt;code&gt;encrypted-data&lt;/code&gt; topic (a KStream) with the &lt;code&gt;encryption-keys&lt;/code&gt; (a KTable). &lt;/p&gt;&lt;p&gt;Unfortunately, even if Kafka Streams tries to give you &lt;a href=&quot;https://docs.confluent.io/3.0.0/streams/architecture.html#streams-architecture-flow-control&quot;&gt;some control&lt;/a&gt; over the order on which messages are processed, some testing showed that if there are a lot of events in the &lt;code&gt;encrypted-data&lt;/code&gt; topic, the first batch of events will all come from this topic and none from the &lt;code&gt;encryption-keys&lt;/code&gt; topic, which means that none of the events was decrypted because none of the encryption keys was known at that time.&lt;/p&gt;&lt;p&gt;So we ended up building our own join-like topology, that will remember which events are missing the encryption key and will process those events once the encryption key shows up. &lt;/p&gt;&lt;p&gt;For this topology, processing the encrypted data is pretty simple:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn encrypted-data-msg [^KeyValueStore missing-store
                         ^KeyValueStore encryption-keys-store
                         ^ProcessorContext ctx
                         k
                         encrypted-item]
 (if-let [encryption-key (.get encryption-keys-store k)]
   (.forward ctx k [encryption-key encrypted-item])
   (.put missing-store (lexicographic-ordered-key k (.partition ctx) (.offset ctx)) encrypted-item))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So if the encryption key is known, we forward the encryption key and the encrypted value pair to the next step, the actual decryption.&lt;/p&gt;&lt;p&gt;If the encryption key is not known yet, we store the event. But when the encryption key arrives, we will want the order of events to remain intact, hence we need to somehow remember the arrival order. There are two possible options:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Store as key the user, and as value a list of events.&lt;/li&gt;
  &lt;li&gt;Store as key the user + event offset, and as value the event.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;In the PoC we chose the second option, as there could be an unbounded amount of events for a user, so we would need an unbounded amount of memory to deserialize them for processing or updating.&lt;/p&gt;&lt;p&gt;Lets see how we use it when the encryption key arrives:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn encryption-key-msg [^KeyValueStore missing-store
                         ^KeyValueStore encryption-keys-store
                         ^ProcessorContext ctx
                         k
                         encryption-key]
 (.put encryption-keys-store k encryption-key)
 (with-open [encrypted-items (.range missing-store
                                 (lexicographic-ordered-key k 0 0)
                                 (lexicographic-ordered-key k Integer/MAX_VALUE Integer/MAX_VALUE))]
   (doseq [^KeyValue encrypted-item (iterator-seq encrypted-items)]
     (.delete missing-store (.key encrypted-item))
     (when-not (common/tombstone? encryption-key)
       (.forward ctx k [encryption-key (.value encrypted-item)])))
   (when (common/tombstone? encryption-key)
     (.forward ctx k [encryption-key nil]))))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Notice that we are using the &lt;a href=&quot;https://github.com/apache/kafka/blob/39d5cdcccfc0f7d7893188bb22580da0c842a993/streams/src/main/java/org/apache/kafka/streams/state/ReadOnlyKeyValueStore.java#L51&quot;&gt;range method&lt;/a&gt;, that even if it doesn&amp;rsquo;t guarantee an order, the actual RocksDB implementation does. Another implementation detail that we should not depend on.&lt;/p&gt;&lt;p&gt;Even if this implementation guarantees the order of events for a given user, notice that it doesn&amp;rsquo;t guarantee any order between users, so it is possible that during decryption there is some reordering of some messages. To guarantee the order of all messages, we would need to store every message after the first one missing the encryption key, even for those that we already know the encryption key.&lt;/p&gt;&lt;p&gt;Last, we prefer a tombstone in the &lt;code&gt;encrypted-keys&lt;/code&gt; topic, over just deleting the encryption key, so that the consumer can clean up any events for that user. If we did not store a tombstone, the consumers could store events in their local store forever.&lt;/p&gt;&lt;p&gt;Back to &lt;a href=&quot;/2018/04/11/kafka-gdpr-event-sourcing#conclusions&quot;&gt;Kafka, GDPR and Event Sourcing&lt;/a&gt;.&lt;/p&gt;
</description>
</item>
<item>
<title>
Kafka, distributed coordination and the actor model
</title>
<link>
https://danlebrero.com/2018/04/09/kafka-distributed-coordination-actor-model/
</link>
<guid>
https://danlebrero.com/2018/04/09/kafka-distributed-coordination-actor-model/
</guid>
<pubDate>
Mon, 09 Apr 2018 10:00:00 +0200
</pubDate>
<description>
&lt;p&gt;It seems that this &lt;a href=&quot;/2017/01/05/proof-of-concept-using-kafkastreams-and-ktables/#content&quot;&gt;blog post&lt;/a&gt; did not properly explain what it meant to replace Zookeeper with Kafka as the coordination mechanism for a cluster of services.&lt;/p&gt;&lt;p&gt;In the example, we had several instances of a service and they had to agree about which one would send an email to which clients, so they had to somehow coordinate amongst themselves to agree on who would do the work and for what subset of clients.&lt;/p&gt;&lt;p&gt;The blog post explains that KTables are conceptually equivalent to a database table, and some people understood that KTables were the mechanism used to do the coordination, by querying/updating the KTable state to signal or lock a record.&lt;/p&gt;&lt;p&gt;But this is far from what I meant.&lt;/p&gt;&lt;h2&gt;Kafka as coordinator&lt;/h2&gt;&lt;p&gt;KTables are built on top of Kafka and they do not provide any additional coordination mechanism other than what Kafka already provides: a &lt;strong&gt;leader election&lt;/strong&gt; mechanism.&lt;/p&gt;&lt;p&gt;Let’s go back to basics to understand what we mean:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;A Kafka topic is divided into one or more partitions.&lt;/li&gt;
  &lt;li&gt;By &lt;a href=&quot;https://kafka.apache.org/documentation/#design_loadbalancing&quot;&gt;default&lt;/a&gt;, messages with the same key go to the same partition.&lt;/li&gt;
  &lt;li&gt;Within a &lt;a href=&quot;http://kafka.apache.org/documentation.html#intro_consumers&quot;&gt;Consumer Group&lt;/a&gt;, Kafka will make sure that only one consumer receives all the messages for a particular partition.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;In a picture: &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kafka-actors/kafka-partitions.png&quot; alt=&quot;kafka topic partitioning&quot; title=&quot;Kafka partition distribution&quot; /&gt;&lt;/p&gt;&lt;p&gt;In our case, if all trading positions for a given client are keyed by the client id, then all messages will end up in the same partition, which means that they all will end up consumed by one and only one of the service’s instances, which is the same as saying that the instance owns or is the “leader” for that particular client.&lt;/p&gt;&lt;h2&gt;Actors, agents and distributed data grids&lt;/h2&gt;&lt;p&gt;Furthermore, the Kafka consumer within an instance is single-threaded, which means that we have one and just one thread that owns a client, so that thread can make local reasonings about the state of the client without having to coordinate with other threads or service instances.&lt;/p&gt;&lt;p&gt;This is exactly the same concurrency write model as &lt;a href=&quot;https://en.wikipedia.org/wiki/Actor_model&quot;&gt;Erlang actors&lt;/a&gt; or &lt;a href=&quot;https://clojure.org/reference/agents&quot;&gt;Clojure agents&lt;/a&gt;: &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/kafka-actors/kafka-actor-model.png&quot; alt=&quot;kafka actor model&quot; title=&quot;Actor model&quot; /&gt;&lt;/p&gt;&lt;p&gt;Basically, some state updated by a single thread/process, which reads actions from a queue (well, in Erlang &lt;a href=&quot;http://www.dalnefre.com/wp/2011/10/erlang-style-mailboxes/&quot;&gt;it is not a simple queue&lt;/a&gt;). &lt;/p&gt;&lt;p&gt;The beauty behind this model is that it is simpler to reason about state changes, as there is always one thread manipulating the state, so your code doesn&amp;rsquo;t need to worry about synchronization or concurrent access to the data.&lt;/p&gt;&lt;p&gt;Additionally, as Kafka distributes the partitions between consumers, it is distributing the state of all these actors amongst the instances of your service cluster, so that each instance has to deal with just a subset of the data, much similar to what a data grid provides.&lt;/p&gt;&lt;p&gt;To update some data in a data grid you can follow the read-update-save pattern, but most data grids provide a &lt;a href=&quot;https://docs.oracle.com/cd/E14526_01/coh.350/e14509/transactionslocks.htm#COHDG116&quot;&gt;performance&lt;/a&gt; &lt;a href=&quot;http://docs.hazelcast.org/docs/3.9.2/manual/html-single/index.html#data-affinity&quot;&gt;optimization&lt;/a&gt; were you can send the operation to the data, as it is less chatty and the grid can optimize any locks required access the data. This optimized pattern is what Kafka Stream applications must follow.&lt;/p&gt;&lt;p&gt;Note that KafkaStream applications provide a different read model than actors, agent or data grids: you either push the state to another Kafka topic for any party interested or you have to build your own API to expose that state.&lt;/p&gt;&lt;p&gt;So you can think of Kafka Stream as a distributed agent model with built-in durability, and Kafka’s scalability, fault tolerance, partitioning and transactional model.&lt;/p&gt;&lt;h2&gt;Example: deduplication of requests&lt;/h2&gt;&lt;p&gt;Lets see a practical example from &lt;a href=&quot;http://disq.us/p/1p5usrq&quot;&gt;this comment&lt;/a&gt;: &lt;/p&gt;&lt;p&gt;&lt;em&gt;I want multiple clients to be able to put messages in a &amp;ldquo;run request&amp;rdquo; topic. If I&amp;rsquo;m already running when I receive the request, I don&amp;rsquo;t want to do anything. If I&amp;rsquo;m not running, I want to initiate (send a message) to a &amp;ldquo;run command&amp;rdquo; topic. I believe that a KTable that holds the running state is the answer. I can&amp;rsquo;t figure out what the kafka streams processor would look like for this as it reads and writes to the &amp;ldquo;run command&amp;rdquo; KTable.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;As we said before, because KTables are build on asynchronous message passing, we cannot expect several clients to agree on the state of a &lt;em&gt;run command&lt;/em&gt; and change it transactionally. Instead, we need Kafka to designate a leader for a particular &lt;em&gt;run command&lt;/em&gt;, so that leader can make the decision about which one of the client commands to run.&lt;/p&gt;&lt;p&gt;The first thing that we need to do is create a key that is the same for all the commands that we want to deduplicate, but different from other &lt;em&gt;run commands&lt;/em&gt;. This key will identify the leader/actor.&lt;/p&gt;&lt;p&gt;Then all clients send their version of the run command with that same key, so that all commands end up in the same Kafka partition. &lt;/p&gt;&lt;p&gt;As there will only be one consumer for that particular partition, that consumer is effectively the leader of all the keys (or &lt;em&gt;run commands&lt;/em&gt;) that end up in that partition. That consumer will just act on the first &lt;em&gt;run command&lt;/em&gt;, update its state and ignore the rest of commands.&lt;/p&gt;&lt;p&gt;In code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;(defn run-first-command [^KeyValueStore store ctx k v]
 (if (.putIfAbsent store k true)
   (println &amp;quot;Ignoring command&amp;quot; v &amp;quot;for key&amp;quot; k)
   (println &amp;quot;Running command&amp;quot; v &amp;quot;for key&amp;quot; k)))

(defn create-kafka-stream-topology []
 (let [^KStreamBuilder builder (KStreamBuilder.)
       store (-&amp;gt; (Stores/create &amp;quot;run-command-state&amp;quot;)
                 .withStringKeys
                 (.withValues (EdnSerde.))
                 .persistent
                 .enableCaching
                 .build)
       builder (-&amp;gt; builder
                   (.addSource &amp;quot;raw-data&amp;quot; (into-array [&amp;quot;raw-data&amp;quot;]))
                   (.addProcessor &amp;quot;run-command-processor&amp;quot;
                                  (processor run-first-command &amp;quot;run-command-state&amp;quot;)
                                  (into-array [&amp;quot;raw-data&amp;quot;]))
                   (.addStateStore store (into-array [&amp;quot;run-command-processor&amp;quot;])))]
   builder))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can find the complete code &lt;a href=&quot;https://github.com/dlebrero/kafka-dedup&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Some notes:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Kafka Streams is just a library, so the &lt;em&gt;run command&lt;/em&gt; app can run in the same process as the clients if we consider it more appropriate.&lt;/li&gt;
  &lt;li&gt;If you are more used to the actor model, this is equivalent to several processes sending each a &lt;em&gt;run command&lt;/em&gt; message to an actor. The &lt;em&gt;run command&lt;/em&gt; key would be the identifier of the actor.&lt;/li&gt;
  &lt;li&gt;Kafka Streams will store the state of the &lt;em&gt;run command&lt;/em&gt; actor/leader in Kafka.&lt;/li&gt;
  &lt;li&gt;If you require exactly-once semantics, Kafka Streams will &lt;a href=&quot;https://www.confluent.io/blog/exactly-once-semantics-are-possible-heres-how-apache-kafka-does-it/&quot;&gt;take care of it&lt;/a&gt; if the side effect of your &lt;em&gt;run command&lt;/em&gt; is sending a message to another Kafka topic. For other kinds of side effects, your application needs to be &lt;a href=&quot;https://medium.com/@jaykreps/exactly-once-support-in-apache-kafka-55e1fdd0a35f&quot;&gt;carefully designed&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Just because you can do it, it doesn&amp;rsquo;t mean that this kind of solution is the best one for your particular context. Maybe Redis &lt;a href=&quot;https://redis.io/commands/setnx&quot;&gt;put-if-absent&lt;/a&gt; is more appropriate for this case.&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;Summary&lt;/h2&gt;&lt;p&gt;I hope this clarifies how to use Kafka Streams to design your applications. &lt;/p&gt;&lt;p&gt;Even if Kafka just provides a leader election mechanism, it is a powerful one.&lt;/p&gt;&lt;p&gt;First, it makes reasoning about state a lot simpler because there is always just one thread manipulating the state, hence you don’t need to worry about synchronization or distributed locks. Kafka Streams makes persisting that state a breeze.&lt;/p&gt;&lt;p&gt;Second, it provides a sharding mechanism. As each partition will be owned by just one instance, Kafka is effectively distributing the data across your service instances, so each just has to handle a subset of it.&lt;/p&gt;&lt;p&gt;And all on top of the other Kafka’s niceties. &lt;/p&gt;
</description>
</item>
<item>
<title>
Production data never lies
</title>
<link>
https://danlebrero.com/2018/03/20/production-data-never-lies/
</link>
<guid>
https://danlebrero.com/2018/03/20/production-data-never-lies/
</guid>
<pubDate>
Tue, 20 Mar 2018 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;&lt;em&gt;This article originally appeared on &lt;a href=&quot;https://akvo.org/blog/production-data-never-lies/&quot;&gt;Akvo&amp;rsquo;s blog&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;The Akvo engineering team has bought into the idea of an &lt;a href=&quot;https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying&quot;&gt;immutable data log&lt;/a&gt; as the backbone of our architecture, which we hope will make it easier to integrate Akvo systems and build new functionalities. More importantly, it will treat data as a first-class citizen; as the valuable thing that it really is.&lt;/p&gt;&lt;h2&gt;Automatic schema generation&lt;/h2&gt;&lt;p&gt;One of the first tasks is to move all the data in &lt;a href=&quot;https://akvo.org/products/akvoflow/#overview&quot;&gt;Akvo Flow&lt;/a&gt; from its current storage, Google Cloud Datastore, to the immutable data log, which in our case is &lt;a href=&quot;https://kafka.apache.org/&quot;&gt;Kafka&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;Given the value of data, as well as the fact that we expect Akvo to be around for many years to come and know that our software is going to evolve, we want to enforce some degree of quality on the data. So instead of chucking &lt;a href=&quot;https://www.reddit.com/r/javascript/comments/10st04/what_is_a_json_blob/&quot;&gt;JSON blobs&lt;/a&gt; into Kafka, we&amp;rsquo;ve decided to use the &lt;a href=&quot;https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/&quot;&gt;Confluent Schema Registry&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The Schema Registry will ensure that any data added to Kafka will comply with a schema, and that as data evolves, new schemas will remain compatible with old schemas, so that old data can always be read. As the Schema Registry only supports &lt;a href=&quot;https://avro.apache.org/&quot;&gt;Avro schemas&lt;/a&gt;, we need to generate one schema for each of the existing classes in Akvo Flow before we can start the migration. &lt;/p&gt;&lt;p&gt;Thankfully, the Java Avro library comes with the ReflectData utility that is able to generate an Avro schema from a Java class, so we don&amp;rsquo;t need to do this chore by hand. &lt;/p&gt;&lt;p&gt;If we try it on one of Akvo Flow&amp;rsquo;s classes &lt;a href=&quot;https://github.com/akvo/akvo-flow/blob/79d5cebe7e985e93ed7c3a732d8360869bfc651b/GAE/src/com/gallatinsystems/surveyal/app/web/SurveyalRestServlet.java&quot;&gt;SurveyedLocale&lt;/a&gt;, ReflectData generates the following:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;{
  &amp;quot;type&amp;quot;: &amp;quot;record&amp;quot;,
  &amp;quot;name&amp;quot;: &amp;quot;SurveyedLocale&amp;quot;,
  &amp;quot;namespace&amp;quot;: &amp;quot;com.gallatinsystems.surveyal.domain&amp;quot;,
  &amp;quot;fields&amp;quot;: [
    {
      &amp;quot;name&amp;quot;: &amp;quot;systemIdentifier&amp;quot;,
      &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;
    },
    ...
    {
      &amp;quot;name&amp;quot;: &amp;quot;surveyalValues&amp;quot;,
      &amp;quot;type&amp;quot;: {
        &amp;quot;type&amp;quot;: &amp;quot;array&amp;quot;,
        &amp;quot;items&amp;quot;: {
          &amp;quot;type&amp;quot;: &amp;quot;record&amp;quot;,
          &amp;quot;name&amp;quot;: &amp;quot;SurveyalValue&amp;quot;,
          &amp;quot;fields&amp;quot;: [
            ...
            {
              &amp;quot;name&amp;quot;: &amp;quot;stringValueText&amp;quot;,
              &amp;quot;type&amp;quot;: {
                &amp;quot;type&amp;quot;: &amp;quot;record&amp;quot;,
                &amp;quot;name&amp;quot;: &amp;quot;Text&amp;quot;,
                &amp;quot;namespace&amp;quot;: &amp;quot;com.google.appengine.api.datastore&amp;quot;,
                &amp;quot;fields&amp;quot;: [
                  {
                    &amp;quot;name&amp;quot;: &amp;quot;value&amp;quot;,
                    &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;
                  }
                ]
              }
            }
          ]
        },
        &amp;quot;java-class&amp;quot;: &amp;quot;java.util.List&amp;quot;
      }
    },
    ...
    {
      &amp;quot;name&amp;quot;: &amp;quot;key&amp;quot;,
      &amp;quot;type&amp;quot;: &amp;quot;com.google.appengine.api.datastore.Key&amp;quot;
    },
    {
      &amp;quot;name&amp;quot;: &amp;quot;ancestorIds&amp;quot;,
      &amp;quot;type&amp;quot;: {
        &amp;quot;type&amp;quot;: &amp;quot;array&amp;quot;,
        &amp;quot;items&amp;quot;: &amp;quot;long&amp;quot;,
        &amp;quot;java-class&amp;quot;: &amp;quot;java.util.List&amp;quot;
      }
    }
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can find the full schema on &lt;a href=&quot;https://gist.github.com/dlebrero/f7c2bda8477112f5a8bb2f7d3ad91f62#file-reflectdata-json&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;This is a good starting point, and we could further improve it by making Avro somehow honour the &lt;a href=&quot;https://github.com/akvo/akvo-flow/blob/4fb17f24c758a595427a6109b1ce7609163544b0/GAE/src/com/gallatinsystems/surveyal/domain/SurveyedLocale.java#L71&quot;&gt;fields marked as @NotPersistent&lt;/a&gt;, so they are not included in the final schema. &lt;/p&gt;&lt;p&gt;But, and this is a big but, there is no hint about which fields are mandatory and which ones are optional, neither is there a clue about what values are valid for those strings, longs and doubles.&lt;/p&gt;&lt;p&gt;We could dig into the code to find the validation rules, but even if we did that for every single one of the classes, Google Cloud Datastore doesn&amp;rsquo;t enforce any schema, so even if this class is the current view of the data, those rules may have changed over the years, and we don&amp;rsquo;t really know what is in the datastore. &lt;/p&gt;&lt;p&gt;Alternatively, you could ask around and hope that somebody has been around for years and has a prodigious memory, plus that there has never been any bug that allowed for invalid data to reach the datastore, plus that any business changes were reflected with flawless data migrations.&lt;/p&gt;&lt;h2&gt;A data-driven approach&lt;/h2&gt;&lt;p&gt;But there is a more obvious source of truth: the actual production data. Why not generate the Avro schemas directly from what the production data tell us? At the end of the day, that is what we need to support and contains examples of all possible values that are actually used. &lt;/p&gt;&lt;p&gt;To help us with this task, we decided to use &lt;a href=&quot;https://github.com/stathissideris/spec-provider&quot;&gt;Spec-Provider&lt;/a&gt;, which is a Clojure library that, when given a list of objects, will generate a &lt;a href=&quot;https://clojure.org/about/spec&quot;&gt;Clojure Spec&lt;/a&gt;. If you are unfamiliar with Clojure Spec, you can think about it as a schema DSL on steroids. &lt;/p&gt;&lt;p&gt;But Clojure Spec is not relevant to this discussion, as Spec-Provider has two distinct phases: one to generate statistics about the data types and another to generate the Clojure Specs given those statistics. We&amp;rsquo;ll use just the first step and do the transformation to Avro ourselves.&lt;/p&gt;&lt;p&gt;So after pulling all the data from Google Cloud Datastore and transforming the &lt;a href=&quot;https://cloud.google.com/appengine/docs/standard/java/javadoc/com/google/appengine/api/datastore/Entity&quot;&gt;Entities&lt;/a&gt; to &lt;a href=&quot;https://github.com/akvo/akvo-flow-initial-kafka-import/blob/0291f923f08c2b3df4a8467aa9a74e4c772fd7d7/src/gae_to_kafka_initial_import/gae_entity.clj&quot;&gt;Clojure maps&lt;/a&gt;, Spec-Provider provides us with the following stats:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;{:pred-map        {map? {:max-length   27,
                          :min-length   21,
                          :sample-count 463417}}
 :sample-count    463417
 :map             {:keys  {:ambiguous   {:distinct-values #{false}, 
                                         :pred-map        {boolean? {:sample-count 463417}},
                                         :sample-count    463417},
                           :ancestorIds {:distinct-values #{nil},
                                         :pred-map        {nil? {:sample-count 440212}},
                                         :sample-count    440212},
                           :countryCode {:distinct-values           #{nil
                                                                      &amp;quot;RU&amp;quot;
                                                                      &amp;quot;MN&amp;quot;
                                                                      &amp;quot;UG&amp;quot;},
                                         :hit-distinct-values-limit true,
                                         :pred-map                  {string? {:max-length   2,
                                                                              :min-length   2,
                                                                              :sample-count 165067},
                                                                     nil?    {:sample-count 298350}},
                                         :sample-count              463417},
                           ...
                          }
                   }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can find the full stats on &lt;a href=&quot;https://gist.github.com/dlebrero/f7c2bda8477112f5a8bb2f7d3ad91f62#file-stats-edn&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The first few lines tell us that all entities are maps that have between 21 and 27 fields. They also tell us that we sampled almost 500k entities. The way Spec-Provider works, you can add as many entities as you want without the risk of running out of memory. Then the Spec-Provider stats lists all fields with their type, a subset of the possible values, min and max length for strings and lists. &lt;/p&gt;&lt;p&gt;With a &lt;a href=&quot;https://github.com/akvo/akvo-flow-initial-kafka-import/blob/0021a6eef6804bd28a957aa8ed1e0a27331c4b14/src/gae_to_kafka_initial_import/avro_schema.clj&quot;&gt;little bit of code&lt;/a&gt;, we can transform those statistics into an Avro schema:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;clojure&quot;&gt;{:type &amp;quot;record&amp;quot;,
 :name &amp;quot;SurveyedLocale&amp;quot;,
 :fields ({:name &amp;quot;ambiguous&amp;quot;, :type &amp;quot;boolean&amp;quot;, :doc &amp;quot;It is always &amp;#39;&amp;lt;false&amp;gt;&amp;#39;. &amp;quot;}
           {:name &amp;quot;ancestorIds&amp;quot;, :type &amp;quot;null&amp;quot;, :doc &amp;quot;Always nil&amp;quot;}
           {:name &amp;quot;countryCode&amp;quot;, :type (&amp;quot;null&amp;quot; &amp;quot;string&amp;quot;), :doc &amp;quot;Examples: &amp;lt;RU&amp;gt;, &amp;lt;MN&amp;gt;, &amp;lt;TD&amp;gt;. Size [2,2]. Nil 64.38%&amp;quot;}
           {:name &amp;quot;surveyInstanceContrib&amp;quot;,
            :type (&amp;quot;null&amp;quot;
                    {:type &amp;quot;array&amp;quot;,
                     :items {:type &amp;quot;long&amp;quot;, :doc &amp;quot;Examples: &amp;lt;1520050&amp;gt;, &amp;lt;2310465&amp;gt;, &amp;lt;1840061&amp;gt;. Range [1520050,2043500042]. &amp;quot;}}),
            :doc &amp;quot;Size [1,88]. Nil 3.33%&amp;quot;}
           ...
           ),
 :doc &amp;quot;Size [21,27]. &amp;quot;,
 :namespace &amp;quot;org.akvo.flow&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can find the full schema on &lt;a href=&quot;https://gist.github.com/dlebrero/f7c2bda8477112f5a8bb2f7d3ad91f62#file-final-schema-edn&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Looking at this schema, we see some pretty interesting stuff:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The “ambiguous” field is always false. Not a very useful flag.&lt;/li&gt;
  &lt;li&gt;There are 11 fields that are always null. Why do we need them?&lt;/li&gt;
  &lt;li&gt;Of the 27 fields, 22 fields that can be null. This reminds me of Rich Hickey’s last rant on the &lt;a href=&quot;https://www.youtube.com/watch?v=2V1FtfBDsLU&amp;feature=youtu.be&amp;t=49m57s&quot;&gt;Maybe type&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;The “localeType” field is null on 0.003% of the entities. You can guess the answer if you asked the team if this field was mandatory.&lt;/li&gt;
  &lt;li&gt;CountryCode is always a two letter string.&lt;/li&gt;
  &lt;li&gt;The display name can be the empty string.&lt;/li&gt;
  &lt;li&gt;The surveyInstanceContrib array can have up to 88 items.&lt;/li&gt;
  &lt;li&gt;The latitude/longitude coordinates have invalid data as the range is [-1307822.0,698259771924] or maybe the data is not from this planet.&lt;/li&gt;
  &lt;li&gt;We don’t need to handle @NotPersistent fields.&lt;/li&gt;
  &lt;li&gt;There are some real examples in the doc, which can come pretty handy.&lt;/li&gt;
  &lt;li&gt;This information and the schemas give us a much better starting point than the one before.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This information and the schemas give us a much better starting point than the one before.&lt;/p&gt;&lt;h2&gt;What’s next?&lt;/h2&gt;&lt;p&gt;Of course, this approach is not exclusively to produce Avro schemas. You can also produce other kinds of schemas, like &lt;a href=&quot;https://developers.google.com/protocol-buffers/&quot;&gt;Protocol Buffers&lt;/a&gt;, or maybe even directly generate your classes. &lt;/p&gt;&lt;p&gt;The Avro type system is not very rich. The best we can do with all the extra information is to put it in a doc, but we could supplement it by generating some code to make those additional checks.&lt;/p&gt;&lt;p&gt;In the case of Akvo Flow, we have dozens of entities, with dozens of fields each. With the stats at hand, we can easily create a list of suspicious fields: either fields with a tiny percentage of nulls (like the 0.003% one), which probably denote a bug or data corruption, or fields with a huge percentage of nulls, which probably denote an unused feature that we might remove.&lt;/p&gt;&lt;p&gt;To be able to use this approach, you need a big enough dataset, and even then, it might not be representative of the future data. For us, more than five years of data and several million rows gives us more confidence than digging around the code, asking the experts or making assumptions.&lt;/p&gt;&lt;p&gt;Maybe you don’t like what it tells you, but production data never lies.&lt;/p&gt;
</description>
</item>
<item>
<title>
Easing open source contributions with Docker
</title>
<link>
https://danlebrero.com/2018/02/13/easing-open-source-software-development-with-docker/
</link>
<guid>
https://danlebrero.com/2018/02/13/easing-open-source-software-development-with-docker/
</guid>
<pubDate>
Tue, 13 Feb 2018 00:00:00 +0100
</pubDate>
<description>
&lt;p&gt;&lt;em&gt;This article originally appeared on &lt;a href=&quot;https://akvo.org/blog/easing-open-source-contributions/&quot;&gt;Akvo&amp;rsquo;s blog&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;At &lt;a href=&quot;https://akvo.org&quot;&gt;Akvo&lt;/a&gt;, we believe that open source software provides &lt;a href=&quot;https://akvo.org/blog/open-data-content-and-software-at-akvo/&quot;&gt;substantial benefits&lt;/a&gt; for organisations in the international development sector. Nowadays, we expect a high quality and rich feature set from any software that we use. &lt;/p&gt;&lt;p&gt;Thanks to open source software, relatively small organisations and development teams are able to build sophisticated and feature-rich applications by virtue of gluing together pre-existing open source software components in unique or specific ways. &lt;/p&gt;&lt;p&gt;To be able to reuse all those pieces is awesome, as it is a lot less complex to assemble existing components than it is to create them from scratch.&lt;/p&gt;&lt;p&gt;But that assembly can become a beast from your worst IKEA nightmare:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/akvo-docker/ikea-instructions.png&quot; alt=&quot;ikea instructions&quot; title=&quot;Software is like IKEA&quot; /&gt;&lt;/p&gt;&lt;p&gt;If you had to follow these instructions once in a lifetime, it probably wouldn’t be too bad. But software developers have to follow those instructions regularly, as we need to recreate, rebuild and reassemble our applications whenever we need to add new components, update versions of those components, or build new features.&lt;/p&gt;&lt;p&gt;Due to the nature of software, the changes that developers need to make (or the pieces that we need to reassemble) are sometimes drastic. An analogy would be like making that basic IKEA desk into a motorised adjustable standing desk. &lt;/p&gt;&lt;p&gt;Much like any other set of instructions, there is always something that doesn’t work. Maybe you missed a step, lost a component or didn’t have all the tools required. Maybe the instructions were wrong, misleading, ambiguous or you were reading them upside down. &lt;/p&gt;&lt;p&gt;The result of any of these issues is the same: a &lt;strong&gt;big waste of time&lt;/strong&gt;.&lt;/p&gt;&lt;h2&gt;The problem with instructions&lt;/h2&gt;&lt;p&gt;For many years, the IT industry has tried to ease this pain by providing more accurate sets of instructions, but those instructions are still written, read and interpreted by humans, and we all know that human communication is messy and far from accurate. &lt;/p&gt;&lt;p&gt;At Akvo, we want to make it easy for anybody to contribute to our open source software. For that reason, we have decided to invest in making our open source applications as simple as possible to assemble, not by improving on the assembly instructions, but by &lt;strong&gt;completely eliminating them&lt;/strong&gt;.&lt;/p&gt;&lt;h2&gt;Making a fresh start&lt;/h2&gt;&lt;p&gt;As human communication is imperfect, we had to look for another tool; one that would eliminate any ambiguity. And there is nothing like a computer to follow instructions in a very literal way. &lt;/p&gt;&lt;p&gt;Even a perfect set of instructions blindly followed by a machine is not enough. Computers have a tendency to accumulate entropy, so even two computers of the same brand, bought at the same shop at the same time, after some weeks of use, can behave differently. Maybe I configured my locale to Klingon while you installed Antivirus-X. That difference is enough to cause the assembly instructions to fail.&lt;/p&gt;&lt;p&gt;So apart from some machine-readable instructions, we need a way of making sure that we always have a fresh start. If every developer starts from the same point, the instructions will always arrive at exactly the same result. And here is where software virtualisation technology shines, as it has the capability to create virtual computers inside the developer’s computer. In a nutshell, virtualisation provides a very easy way of creating a new empty cosmos that we can use as the starting point for our set of instructions.&lt;/p&gt;&lt;h2&gt;The Docker Platform&lt;/h2&gt;&lt;p&gt;We have chosen the &lt;a href=&quot;https://www.docker.com&quot;&gt;Docker Platform&lt;/a&gt; as the virtualisation technology to allow us to achieve our goal of having a repeatable and machine-readable set of instructions, and therefore a consistent starting point.&lt;/p&gt;&lt;p&gt;The two tools of the Docker Platform that we use are Docker and Docker Compose. Below is an example of a file you’d give to Docker to create a computer:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;dockerfile&quot;&gt;FROM openjdk:8-jre-alpine
 
COPY target/akvo-flow-maps.jar /app/akvo-flow-maps.jar
COPY maybe-import-and-java-jar.sh /app/maybe-import-and-java-jar.sh
RUN chmod 777 /app/maybe-import-and-java-jar.sh
 
CMD ./maybe-import-and-java-jar.sh
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The most interesting bit here is the first “FROM” line, which tells Docker what our desired starting point is. Thanks again to the open source community, there are thousands of starting points to choose from at DockerHub, which makes it a lot easier to bootstrap our custom virtual computers. The rest of the lines are the set of instructions to follow from that starting point.&lt;/p&gt;&lt;p&gt;Where Docker allows us to create virtual computers, Docker Compose allows us to create virtual cosmos, where a set of computers will live, isolated from other cosmos. Here’s an example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;services:
  postgres:
   build: 
     dockerfile: Dockerfile-postgres
   expose:
     - 5432
 
  flow-maps:
    build:
     dockerfile: Dockerfile-dev
    ports:
      - &amp;quot;47480:47480&amp;quot;
      - &amp;quot;3000:3000&amp;quot;
 
  redis:
     image: redis:3.2.9
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The first thing to notice is that the starting point for Docker Compose is always the void, the nothing, la nada. After that, we specify which computers should exist in that universe, in this case, a Postgres database, a Redis database and the Akvo Flow Maps application. Those computers are created using the Docker files that we just explained.&lt;/p&gt;&lt;h2&gt;Results&lt;/h2&gt;&lt;p&gt;So what is the result of applying this technology to &lt;a href=&quot;https://akvo.org/products/akvo-lumen/#overview&quot;&gt;Akvo Lumen&lt;/a&gt;, Akvo’s data visualisation and analysis tool? By applying this technology, contributing to Lumen goes from this… to this:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/akvo-docker/lumen-open-source.gif&quot; alt=&quot;The results&quot; title=&quot;from to results&quot; /&gt;&lt;/p&gt;&lt;p&gt;Two tools, git and docker, and two commands, make it extremely easy to build and assemble a working Akvo Lumen development environment. Besides easing the open source contribution process, by removing the onerous task of setting up a working environment, we find two additional benefits of using this technology:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;It encourages innovation&lt;/strong&gt;. As it is extremely easy to “start from scratch”, we are free to experiment with new components, without fear of breaking things or ending up in an unrecoverable situation.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;It reduces wasted time&lt;/strong&gt;. Whenever we have a new team member, new components are added to the project, switching between different projects or just something stops working, we have two commands to get back to a known and valid starting point.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Want better instructions? &lt;strong&gt;Strive for no instructions&lt;/strong&gt;.&lt;/p&gt;
</description>
</item>
<item>
<title>
How to Docker Compose a developer environment: an open source example
</title>
<link>
https://danlebrero.com/2017/09/25/how-do-docker-compose-development-environement/
</link>
<guid>
https://danlebrero.com/2017/09/25/how-do-docker-compose-development-environement/
</guid>
<pubDate>
Mon, 25 Sep 2017 13:35:00 +0200
</pubDate>
<description>
&lt;p&gt;As we mentioned in a &lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;previous blog post&lt;/a&gt;, you should strive to have a simple and repeatable way of setting up a dev environment for your project.&lt;/p&gt;&lt;p&gt;In this blog post we are going to go into details of an example from one of the open source projects at &lt;a href=&quot;http://akvo.org&quot;&gt;Akvo&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;IMHO, having a painless way of setting up a dev environment is one of the key aspects to remove some of the friction for contributors to open source projects.&lt;/p&gt;&lt;h2&gt;Akvo Lumen Architecture&lt;/h2&gt;&lt;p&gt;The project that we are going to look at is called &lt;a href=&quot;https://github.com/akvo/akvo-lumen&quot;&gt;Akvo Lumen&lt;/a&gt;, which is an &lt;a href=&quot;http://akvo.org/products/akvo-lumen/&quot;&gt;“easy to use data mashup, analysis and publishing platform”&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Akvo Lumen is a Javascript single page application (SPA) with a Clojure backend, as follows:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/docker-compose/prod-setup.jpg&quot; alt=&quot;Akvo Lumen architecture&quot; title=&quot;Akvo Lumen production architecture&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.keycloak.org&quot;&gt;Keycloak&lt;/a&gt; is an open source single sign on application. It is shared with other Akvo products.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.nginx.com&quot;&gt;Nginx&lt;/a&gt; serves the SPA and proxies the request to the Backend.&lt;/li&gt;
  &lt;li&gt;The Backend is the backend &amp;hellip;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Before docker compose&lt;/h2&gt;&lt;p&gt;The instructions to setup the dev environment were what we can call the “classic” ones: install Postgres, run this init script, download this build tool, run this command &amp;hellip;&lt;/p&gt;&lt;p&gt;But in this particular case they were split into three files: &lt;a href=&quot;https://github.com/akvo/akvo-lumen/tree/21882586987927bc496e94c76e3faf6cbf965085/keycloak&quot;&gt;keycloak&lt;/a&gt;, &lt;a href=&quot;https://github.com/akvo/akvo-lumen/tree/21882586987927bc496e94c76e3faf6cbf965085/backend&quot;&gt;backend&lt;/a&gt; and &lt;a href=&quot;https://github.com/akvo/akvo-lumen/tree/21882586987927bc496e94c76e3faf6cbf965085/client&quot;&gt;SPA&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Personally, while following the instructions, I did not realized that I had to run KeyCloak locally and one of the npm dependencies would not compile in my developer box. I still do not know why. I don&amp;rsquo;t really want to know.&lt;/p&gt;&lt;p&gt;Of course, there is a better way.&lt;/p&gt;&lt;h2&gt;Instructions after docker compose&lt;/h2&gt;&lt;p&gt;The new instructions after docker compose are &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/d0c535166a8f276242d4de48f869c5d4ae931859/README.dev.md&quot;&gt;here&lt;/a&gt;, which can be summarized as:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;sudo sh -c &amp;#39;echo &amp;quot;127.0.0.1 t1.lumen.localhost t2.lumen.localhost auth.lumen.localhost&amp;quot; &amp;gt;&amp;gt; /etc/hosts&amp;#39;
docker-compose up -d &amp;amp;&amp;amp; docker-compose logs -f --tail=10
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The first step is required because Lumen is a multi tenant product and the tenant is based on the host.&lt;/p&gt;&lt;p&gt;The second step is basically the same as &lt;em&gt;docker-compose up&lt;/em&gt;, but without docker-compose holding your console hostage.&lt;/p&gt;&lt;p&gt;Interestingly, note the absence of any &lt;em&gt;npm install&lt;/em&gt; or &lt;em&gt;mvn install&lt;/em&gt; from the instructions.&lt;/p&gt;&lt;p&gt;After that, we will be running:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/docker-compose/dev-docker-compose.jpg&quot; alt=&quot;Akvo Lumen developer docker compose setup&quot; title=&quot;Developer environment setup with Docker Compose&quot; /&gt;&lt;/p&gt;&lt;h2&gt;The docker compose file&lt;/h2&gt;&lt;p&gt;The whole docker compose file can be found at &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/develop/docker-compose.yml&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;h3&gt;Postgres and Keycloak&lt;/h3&gt;&lt;p&gt;Let’s start by looking at the Postgres image: &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;postgres:
  build: postgres
  ports:
   - &amp;quot;5432:5432&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Strictly speaking, we do not need to expose the Postgres port, but it is useful during development to be able to inspect the DB tables with some UI tool.&lt;/p&gt;&lt;p&gt;The &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/f72db9d8efe4900f8f8b3a42d5d89f4eded4b50e/postgres/Dockerfile&quot;&gt;Dockerfile&lt;/a&gt; is extremely simple:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;dockerfile&quot;&gt;FROM postgres:9.5
ADD ./provision  /docker-entrypoint-initdb.d/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Following the instructions of the &lt;a href=&quot;https://hub.docker.com/_/postgres/&quot;&gt;Postgres official image&lt;/a&gt;, we copy our &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/f72db9d8efe4900f8f8b3a42d5d89f4eded4b50e/postgres/provision/setup.sh&quot;&gt;initial setup scripts&lt;/a&gt; and they will be run the first time the container starts.&lt;/p&gt;&lt;p&gt;The scripts just creates a bunch of empty databases. It will be the Lumen Backend the one that creates the required tables and reference data as part of the DB migration logic.&lt;/p&gt;&lt;p&gt;The &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/f72db9d8efe4900f8f8b3a42d5d89f4eded4b50e/keycloak/Dockerfile&quot;&gt;Keycloak image&lt;/a&gt; is very similar, but setups the initial set of users, passwords and credentials in a &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/f72db9d8efe4900f8f8b3a42d5d89f4eded4b50e/keycloak/akvo.json&quot;&gt;Keycloaky way&lt;/a&gt;.&lt;/p&gt;&lt;h3&gt;Lumen Backend&lt;/h3&gt;&lt;p&gt;The Lumen Backend is a Clojure service. Its docker compose configuration looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;backend:
 build:
   context: ./backend
   dockerfile: Dockerfile-dev
 volumes:
    - ./backend:/app
    - ~/.m2:/root/.m2
    - ~/.lein:/root/.lein
 links:
    - keycloak:auth.lumen.localhost
 ports:
    - &amp;quot;47480:47480&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The first interesting point is that it uses a &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/backend/Dockerfile-dev&quot;&gt;different Dockerfile&lt;/a&gt; than &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/backend/Dockerfile&quot;&gt;the production one&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;During development, we need our build tools, &lt;a href=&quot;https://leiningen.org/&quot;&gt;Lein&lt;/a&gt; in our case, plus we want the fast feedback cycle that a &lt;a href=&quot;http://vvvvalvalval.github.io/posts/what-makes-a-good-repl.html&quot;&gt;good REPL provides&lt;/a&gt;, while in production we just want a fast start up time.&lt;/p&gt;&lt;p&gt;Note that because our build tools come as part of the Docker image, everybody in the team will be running exactly the same version of Lein, on exactly the same JVM and OS. Other projects could use different Lein versions, or different tools, but containers isolate one project from the others.&lt;/p&gt;&lt;p&gt;We do not want to be rebuilding and restarting our Backend Docker image every time we make a change in our source files, so the first line of “volumes” &lt;em&gt;(- ./backend:/app)&lt;/em&gt; makes the source code available to the Docker container: any change in the source files will be immediately visible inside the container. &lt;/p&gt;&lt;p&gt;The second volume that we mount is the local maven repository &lt;em&gt;(- ~/.m2:/root/.m2)&lt;/em&gt;. This somehow pollutes your developer box, as deleting the Docker container will not get rid of the downloaded dependencies, but in theory your local maven repository is just a cache, so you can delete it without repercussions whenever it gets too big.&lt;/p&gt;&lt;p&gt;If you don’t want to pollute your developer box at all, you can make &lt;a href=&quot;http://bitjudo.com/blog/2014/03/13/building-efficient-dockerfiles-node-dot-js/&quot;&gt;use of layers&lt;/a&gt; and download the dependencies just when there is a change in the project file.&lt;/p&gt;&lt;p&gt;The last volume &lt;em&gt;(- ~/.lein:/root/.lein)&lt;/em&gt; makes the &lt;a href=&quot;https://jakemccrary.com/blog/2015/01/11/overview-of-my-leiningen-profiles-dot-clj/&quot;&gt;Lein global profiles&lt;/a&gt; available to the container. Use with care as you want to avoid any “it works on my machine” issues.&lt;/p&gt;&lt;p&gt;Even if the Keycloak container is accessible by the Backend using the hostname “keycloak”, we need the link &lt;em&gt;(- keycloak:auth.lumen.localhost)&lt;/em&gt; due to JWT validation requiring the single sign-on host to be the same one for the client (the browser) and the backend. &lt;/p&gt;&lt;p&gt;Last, we make the REPL port available so you can connect to it with your favourite IDE. You will need to explicitly configure the lein &lt;em&gt;:repl-options&lt;/em&gt; to listen to that port and to allow connections from &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/backend/project.clj#L74&quot;&gt;any host&lt;/a&gt;&lt;/p&gt;&lt;h3&gt;Lumen Client&lt;/h3&gt;&lt;p&gt;The Lumen Client image is a Nginx that servers the SPA and proxies other requests to the backend.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;client:
 build:
   context: ./client
   dockerfile: Dockerfile-dev
 volumes:
    - ./client:/lumen
 ports:
    - &amp;quot;3030:3030&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Again, for development we prioritize a fast feedback cycle, so the Docker images between &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/client/Dockerfile&quot;&gt;production&lt;/a&gt; and &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/client/Dockerfile-dev&quot;&gt;development&lt;/a&gt; are different.&lt;/p&gt;&lt;p&gt;In this case, we have replaced Nginx with a &lt;a href=&quot;https://github.com/webpack/webpack-dev-server&quot;&gt;webpack Dev Server&lt;/a&gt; which will recompile the SPA and do a &lt;a href=&quot;https://github.com/akvo/akvo-lumen/blob/e0881e38cc1c4bf77692cbaa611427af3db288ab/client/webpack.config.js&quot;&gt;hot code reload&lt;/a&gt; on your browser whenever we make a change on our source code. The mounted volume is to make the source code accessible inside the container.&lt;/p&gt;&lt;p&gt;The exposed port is just the main application entrypoint.&lt;/p&gt;&lt;h2&gt;Running tests and other build tasks&lt;/h2&gt;&lt;p&gt;As you don&amp;rsquo;t need to install any npm, lein or maven in your local box, to run any tasks provided by those tools, you just need to run them from within the Docker container.&lt;/p&gt;&lt;p&gt;For example, to run the Backend tests:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;docker-compose exec backend lein test
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Or if you are going to run several commands, you can always start a bash shell:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;sh&quot;&gt;docker-compose exec backend bash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;Tip:&lt;/em&gt; if you want to preserve the bash history, just add another volume to the Docker Compose file that mounts the home directory.&lt;/p&gt;&lt;h2&gt;A note on startup dependencies&lt;/h2&gt;&lt;p&gt;Docker Compose provides very &lt;a href=&quot;https://docs.docker.com/compose/startup-order/&quot;&gt;little help&lt;/a&gt; to ensure the startup order of the containers. &lt;/p&gt;&lt;p&gt;It is up to you to make sure that the dependant container waits long enough for the dependency to be ready, usually by polling with some maximum time limit.&lt;/p&gt;&lt;p&gt;For this project, the Backend depends both on Keycloak and Postgres, but the Backend consistently takes longer than both to startup, so we are ignoring the issue for now.&lt;/p&gt;&lt;p&gt;Examples in other projects on how to deal with the startup dependency issue:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Checking that a &lt;a href=&quot;https://github.com/akvo/akvo-maps/blob/4aaaea55230b3eb7f704ecee73d89db115ccc3fa/end-to-end-tests/test/windshaft_test/core_test.clj#L11&quot;&gt;DB is ready by querying the last table created for some data&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Checking that &lt;a href=&quot;https://github.com/dlebrero/kafka-streams-and-ktable-example/blob/master/our-service/src/our_service/util.clj#L41&quot;&gt;Kafka is ready by listing the topics and finding the last created one&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;An environment upgrade&lt;/h2&gt;&lt;p&gt;It happens that one of the new features in Akvo Lumen is to provide some interactive maps.&lt;/p&gt;&lt;p&gt;This means that the project now needs:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://postgis.net/&quot;&gt;PostGis&lt;/a&gt; extension installed on Postgres.&lt;/li&gt;
  &lt;li&gt;A &lt;a href=&quot;https://github.com/akvo/akvo-maps/tree/develop&quot;&gt;Windshaft&lt;/a&gt; node.js server.&lt;/li&gt;
  &lt;li&gt;A &lt;a href=&quot;https://redis.io/&quot;&gt;Redis&lt;/a&gt; DB.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Which now that we have Docker Compose can be done with:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;diff&quot;&gt;--- a/postgres/Dockerfile
+++ b/postgres/Dockerfile
-FROM postgres:9.5
+FROM mdillon/postgis:9.6 

--- a/postgres/provision/helpers/create-extensions.sql
+++ b/postgres/provision/helpers/create-extensions.sql
+CREATE EXTENSION IF NOT EXISTS postgis WITH SCHEMA public;

--- a/docker-compose.yml
+++ b/docker-compose.yml
+ redis:
+   image: redis:3.2.9
+ windshaft:
+   image: akvo/akvo-maps:2469ae0cb95ba090412f042fdfa8c7038273fe0e
+   environment:
+     - NODE_ENV=development
+   volumes:
+      - ./windshaft/config/dev:/config
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And one &lt;em&gt;docker-compose down; docker-compose up &amp;ndash;build&lt;/em&gt; later, the whole team is enjoying the new setup.&lt;/p&gt;&lt;p&gt;Isn’t that beautiful?&lt;/p&gt;
</description>
</item>
<item>
<title>
Swagger Search: Finding an endpoint in your microservice primordial soup 
</title>
<link>
https://danlebrero.com/2017/09/18/swagger-search-finding-endpoints-in-microservices/
</link>
<guid>
https://danlebrero.com/2017/09/18/swagger-search-finding-endpoints-in-microservices/
</guid>
<pubDate>
Mon, 18 Sep 2017 13:35:00 +0200
</pubDate>
<description>
&lt;p&gt;&lt;a href=&quot;http://labs.ig.com/&quot;&gt;IG&lt;/a&gt; started its service-oriented architecture journey back in 2009. &lt;/p&gt;&lt;p&gt;The first proof of concept consisted of three services, deployed independently from the existing monolith: a big fat J2EE Enterprise Server. &lt;/p&gt;&lt;p&gt;We loved the freedom from the monolith so much, that during these years the service landscape at IG has been growing organically, boasting now more than 250 services, with tens of hundreds of endpoints.&lt;/p&gt;&lt;p&gt;Perfect services with clear boundaries were born, but due to time pressures, laziness, or other unfortunate practicalities, these perfect babies grew into bloated teenagers, accruing functionality marginally related to them.&lt;/p&gt;&lt;p&gt;But then, by virtue of some kind of asexual reproduction, the fat services were split into a new set of perfect services, condemned to repeat the errors of their parents.&lt;/p&gt;&lt;h2&gt;Do we have …?&lt;/h2&gt;&lt;p&gt;The evolving nature of a microservice architecture is a strength, but it comes with a lot of different challenges, one of which can be summarized in the following question:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Do we have an endpoint that provides XXX functionality?&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;To document what was available, we ended up using a service registry, to know which services were available, and Swagger, to know what each service provided.&lt;/p&gt;&lt;p&gt;So the workflow to find a candidate endpoint would be:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Go to the service registry.&lt;/li&gt;
  &lt;li&gt;Grep for a name that seemed logical. Failing that, scan the list of all service names.&lt;/li&gt;
  &lt;li&gt;Find the Swagger doc url for the service.&lt;/li&gt;
  &lt;li&gt;Scan the available endpoints for something suitable.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;If no service or endpoint was found, we would fall back to the “ask around the office” methodology.&lt;/p&gt;&lt;p&gt;This workflow was at first mildly annoying, but as we distilled our existing services, more and more of them would have suspiciously similar names, making the process more onerous.&lt;/p&gt;&lt;h2&gt;Swagger Search&lt;/h2&gt;&lt;p&gt;To ease that pain, IG’s Clojure Club rolled up their sleeves and built Swagger Search: a service that collects all the Swagger documents from all the services and presents a user interface that allows you to find endpoints in your microservice architecture.&lt;/p&gt;&lt;p&gt;This is what it looks like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/swagger-search/list-of-services.jpg&quot; alt=&quot;List services&quot; title=&quot;List all services found by the service discovery&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/swagger-search/search-endpoints.jpg&quot; alt=&quot;Search for endpoints&quot; title=&quot;Search results&quot; /&gt;&lt;/p&gt;&lt;p&gt;The service allows searching through the endpoint documentation, URL, HTTP method, its parameters, their types, or any fields in the request or response bodies.&lt;/p&gt;&lt;p&gt;What do we mean by type and fields? If you have the following endpoint:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;json&quot;&gt;&amp;quot;post&amp;quot;: {
 &amp;quot;description&amp;quot;: &amp;quot;Adds a new moderator for the chat.&amp;quot;,
 &amp;quot;parameters&amp;quot;: [
   {
     &amp;quot;in&amp;quot;: &amp;quot;body&amp;quot;,
     &amp;quot;name&amp;quot;: &amp;quot;body&amp;quot;,
     &amp;quot;schema&amp;quot;: {
       &amp;quot;$ref&amp;quot;: &amp;quot;#/definitions/LiveChatModerator&amp;quot;
     }
   }
 ],
 }
...
&amp;quot;LiveChatModerator&amp;quot;: {
 &amp;quot;properties&amp;quot;: {
   &amp;quot;id&amp;quot;: {
     &amp;quot;description&amp;quot;: &amp;quot;...&amp;quot;,
     &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;
   },
   &amp;quot;snippet&amp;quot;: {
     &amp;quot;$ref&amp;quot;: &amp;quot;#/definitions/LiveChatModeratorSnippet&amp;quot;,
     &amp;quot;description&amp;quot;: &amp;quot;....&amp;quot;
   }
 },
 &amp;quot;type&amp;quot;: &amp;quot;object&amp;quot;
},
&amp;quot;LiveChatModeratorSnippet&amp;quot;: {
 &amp;quot;properties&amp;quot;: {
   &amp;quot;liveChatId&amp;quot;: {
     &amp;quot;description&amp;quot;: &amp;quot;...&amp;quot;,
     &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;
   },
   &amp;quot;moderatorDetails&amp;quot;: {
     &amp;quot;$ref&amp;quot;: &amp;quot;#/definitions/ChannelProfileDetails&amp;quot;,
     &amp;quot;description&amp;quot;: &amp;quot;...&amp;quot;
   }
 },
 &amp;quot;type&amp;quot;: &amp;quot;object&amp;quot;
}
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The endpoint will show in queries for the types LiveChatModerator, LiveChatModeratorSnippet and ChannelProfileDetails, and in queries for id, snippet, liveChatId or moderatorDetails.&lt;/p&gt;&lt;p&gt;Swagger Search has built-in support for &lt;a href=&quot;https://www.consul.io/&quot;&gt;Consul&lt;/a&gt; and &lt;a href=&quot;https://github.com/coreos/etcd&quot;&gt;Etcd&lt;/a&gt;, but you can plug your own service discovery mechanism.&lt;/p&gt;&lt;p&gt;It comes in three different flavors: as a &lt;a href=&quot;https://hub.docker.com/r/danlebrero/swagger-search/&quot;&gt;docker container&lt;/a&gt;, as an &lt;a href=&quot;https://github.com/IG-Group/swagger-search/releases&quot;&gt;executable jar&lt;/a&gt;, or as a &lt;a href=&quot;https://clojars.org/ig/swagger-search&quot;&gt;library&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;IG has open sourced the project under the Apache 2 license. You can find &lt;a href=&quot;https://github.com/IG-Group/swagger-search&quot;&gt;the source and instructions at Github&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;Hope you also find it useful.&lt;/p&gt;&lt;h2&gt;Acknowledgements&lt;/h2&gt;&lt;p&gt;Thanks a lot to all the member of IG’s Clojure Club and special thanks to all those graduates that were forced by their demonic overlords to contribute to the project. You did a great job and you taught me that Clojure can be learned in less than a month. &lt;/p&gt;&lt;p&gt;Thanks also to &lt;a href=&quot;https://apis.guru/&quot;&gt;APIs.guru&lt;/a&gt; for providing all those Swagger APIs that helped enormously during testing. &lt;/p&gt;&lt;p&gt;And of course, thanks to everybody behind &lt;a href=&quot;https://swagger.io&quot;&gt;Swagger&lt;/a&gt;. It is an awesome tool.&lt;/p&gt;&lt;p&gt;Kudos to everyone, but especially my best friend &lt;a href=&quot;https://twitter.com/rmorschel&quot;&gt;Robert Morschel&lt;/a&gt; who taught me everything, who reviews this blog and who keeps adding random and funny statements with the hope that one will slip through.&lt;/p&gt;
</description>
</item>
<item>
<title>
Why to Docker Compose a calm environment
</title>
<link>
https://danlebrero.com/2017/09/01/a-docker-compose-environment/
</link>
<guid>
https://danlebrero.com/2017/09/01/a-docker-compose-environment/
</guid>
<pubDate>
Fri, 01 Sep 2017 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;The joys of a new job. &lt;/p&gt;&lt;p&gt;You get there on your first day and after the introductions, you are given your first task: to get the project up and running on your dev box.&lt;/p&gt;&lt;p&gt;The task comes with a link to the wiki, which has THE instructions:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Download X&lt;/li&gt;
  &lt;li&gt;Install Y&lt;/li&gt;
  &lt;li&gt;Run “./build &amp;ndash;special-flag”&lt;/li&gt;
  &lt;li&gt;Copy Z to W&lt;/li&gt;
  &lt;li&gt;Make sure foo but not bar&lt;/li&gt;
  &lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;You know how it is going to end. And just in case you had any doubts, your new boss just confirms it: &lt;/p&gt;&lt;p&gt;“It’s probably a bit out of date, so can you please update it if you find any issues?”&lt;/p&gt;&lt;p&gt;Two days later, you emerge triumphant, proud of your achievement, and with a smile on your face: Your updated instructions are so accurate that the next person joining will be forever thankful.&lt;/p&gt;&lt;h2&gt;Or maybe not&lt;/h2&gt;&lt;p&gt;The instructions on the wiki seem like a good enough solution, given that each member of the team needs to pass the ordeal just once &amp;hellip; except when:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;You get a new and shiny dev box.&lt;/li&gt;
  &lt;li&gt;Your dev box dies.&lt;/li&gt;
  &lt;li&gt;You move to another project.&lt;/li&gt;
  &lt;li&gt;Six month latter, you go back to the original project. Nothing works anymore.&lt;/li&gt;
  &lt;li&gt;A new feature requires Zookeeper, and everybody to configure a local Zookeeper cluster!&lt;/li&gt;
  &lt;li&gt;Your operating system is upgraded and “insert-your-fav-database-here” doesn&amp;rsquo;t want to start anymore. Welcome to DLL hell.&lt;/li&gt;
  &lt;li&gt;That old project that your team still maintains needs Maven 2.1.1 but the current project requires &amp;gt; 3.3, and requires Postgres 7.1 but the new one requires at least 9.5 with PostPic and OpenFTS extensions.&lt;/li&gt;
  &lt;li&gt;Polyglot Microservices company! Install maven, gradle, npm, yarn, node, make, go, ruby, rake, lein, sbt, rebar, cassandra, mongodb, redis, postgresql, couchbase…&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;But sometimes, some component, for some unknown reason, somehow stops working, and it won&amp;rsquo;t ever start again.&lt;/p&gt;&lt;h2&gt;Enter Docker Compose&lt;/h2&gt;&lt;p&gt;Docker Compose is a tool which allows one to define a multi-container system using one file, and to run them in Docker, creating a private network to isolate the system.&lt;/p&gt;&lt;p&gt;A Docker Compose file that will start a Postgres and a Redis is as simple as: &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;yaml&quot;&gt;version: &amp;quot;3&amp;quot;
services:
  postgres:
    image: postgres:9.5
    volumens: 
      - ./db-provision:/docker-entrypoint-initdb.d/
    ports: 
      - 5432:5432
  redis:
    image: redis:3.2.9
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can configure the container for your project and Docker Compose will be able to create a new environment, mapping some of the ports and files between the internal containers and your dev box.&lt;/p&gt;&lt;p&gt;Something like:&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/blog/dev-setup-diagram.jpg&quot; alt=&quot;Docker Compose Dev Setup Architecture&quot; title=&quot;Docker Compose Dev Setup Architecture&quot; /&gt;&lt;/p&gt;&lt;p&gt;Using Docker Compose to set up and run our local development environment gives us: &lt;/p&gt;
&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;One command to set up and start the system &lt;/td&gt;
      &lt;td&gt;&lt;em&gt;docker-compose up&lt;/em&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;One command to upgrade or add new components &lt;/td&gt;
      &lt;td&gt;&lt;em&gt;docker-compose up --build&lt;/em&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;One command to stop the system&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;docker-compose stop&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;One command to clean up any trace of the system&lt;/td&gt;
      &lt;td&gt;&lt;em&gt;docker-compose down --remove-orphans --rmi all&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A precise and repeatable process&lt;/td&gt;
      &lt;td&gt;The Docker Compose file will be executed by a machine, so there is no room for imprecision. &lt;br/&gt;Just make sure that you use an immutable version of the image.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A process that never gets out of date&lt;/td&gt;
      &lt;td&gt;As the team will use the Docker Compose everyday for their development, and any change in the system must be done within the Docker files, there is no opportunity for the instructions to get stale.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A process that can be version controlled&lt;/td&gt;
      &lt;td&gt;The Docker files are plain text, they will be collocated with the rest of the project source code, they will be peer reviewed and changes can be rolled back, diffed, &amp;hellip;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A process that allows for experimentation&lt;/td&gt;
      &lt;td&gt;As it is easy to destroy and recreate systems, and as the Docker files can be rolled back, there is no risk on trying new versions of components or fiddling around with the configuration.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;A way of running more than version of the same project or more than one project at the same time&lt;/td&gt;
      &lt;td&gt;Unfortunately, this is probably requires some manual fiddling to remap some of the ports exposed in the Docker Compose file, but at least all the ports are in just one file.&lt;br/&gt; After that is a simple: &lt;em&gt;docker-compose -p my-project-one up -d; docker-compose -p my-project-again up&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;&lt;h2&gt;A production-like environment or not?&lt;/h2&gt;&lt;p&gt;When talking about Docker, one of the benefits usually mentioned is that it allows one to run a production-like environment anywhere.&lt;/p&gt;&lt;p&gt;Indeed this is a big benefit. Your CI server should run its tests against a production-like version, and you should be able to run such a version locally, but for the day to day development experience, you want a setup that allows for a fast feedback cycle.&lt;/p&gt;&lt;p&gt;For example, you don’t want to minimize your JavaScript files for each and every change that you make and you probably want some sort of auto refresh.&lt;/p&gt;&lt;p&gt;Fast feedback is just more important.&lt;/p&gt;&lt;p&gt;This development environment should include any build tools that your project requires, so your setup instructions should not have any “install maven/npm” step. Those tools should come within a Docker container. This way, everybody  in the team will be using the same tool version in the same operative system version.&lt;/p&gt;&lt;h2&gt;Conclusion&lt;/h2&gt;&lt;p&gt;Even if you don’t use Docker in production, it is well worth using it just to make setting up or upgrading a dev environment an uneventful process. &lt;/p&gt;&lt;p&gt;This process should be as close to “docker-compose up” as possible. Nothing more.&lt;/p&gt;&lt;p&gt;Don’t treat your dev box as some big global mutable variable. Use Docker Compose to treat it as a nice immutable one.&lt;/p&gt;&lt;p&gt;You have &lt;a href=&quot;/2017/09/25/how-do-docker-compose-development-environement/#content&quot;&gt;here a detailed example&lt;/a&gt; of how to Docker Compose a local developer environment.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Why to Docker Compose a calm environment (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
Applying stability patterns: a case study - Devoxx PL 2017
</title>
<link>
https://danlebrero.com/2017/08/03/stability-patterns-a-case-study-devoxx-pl-2017-video/
</link>
<guid>
https://danlebrero.com/2017/08/03/stability-patterns-a-case-study-devoxx-pl-2017-video/
</guid>
<pubDate>
Thu, 03 Aug 2017 11:00:00 +0200
</pubDate>
<description>
&lt;p&gt;The video of my Devoxx PL 2017 talk on &amp;ldquo;Applying stability patterns: a case study&amp;rdquo; is online.&lt;/p&gt;&lt;p&gt;In the talk I explain how we applied, or did not, each of the stability patterns described in the &lt;em&gt;Release It!&lt;/em&gt; book by Michael Nygard, plus I explain which outages we had after applying, or misapplying, the patterns. &lt;/p&gt;&lt;p&gt;Slides in &lt;a href=&quot;/slides/stability_patterns_devoxx_pl_2017.key&quot;&gt;Keynote format&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Feedback and questions welcomed!&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/dSgls1cn1io&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;
</description>
</item>
<item>
<title>
A more efficient developer: write programs for yourself
</title>
<link>
https://danlebrero.com/2017/08/03/efficient-developer-write-programs-for-yourself/
</link>
<guid>
https://danlebrero.com/2017/08/03/efficient-developer-write-programs-for-yourself/
</guid>
<pubDate>
Thu, 03 Aug 2017 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;It saddens, and surprises me the amount of manual work that we developers put up with. It is paradoxical that we are paid to automate other people’s work, yet fail do so the same with our own.&lt;/p&gt;&lt;p&gt;I am not just talking about automating tasks that can take you hours or days to do. A five second task that is repeated often enough may well be worth automating. &lt;/p&gt;&lt;p&gt;Automation saves time, enables repeatability, avoids mental overhead, and &lt;a href=&quot;/2017/04/06/documenting-your-architecture-wireshark-plantuml-and-a-repl/#content&quot;&gt;can be rewarding&lt;/a&gt;.&lt;/p&gt;&lt;h2&gt;One off tasks&lt;/h2&gt;&lt;p&gt;Your attitude before starting any task, no matter how small, should be: can I write a program to do this? &lt;/p&gt;&lt;p&gt;A word of caution, though: set a time limit for the task, as you can really get lost down the rabbit hole. Once that time limit has elapsed, you have to be willing to let it go and do the task manually. This requires a surprising amount of discipline.&lt;/p&gt;&lt;h2&gt;Beware the GUI&lt;/h2&gt;&lt;p&gt;GUIs, like the Sirens, lure you with an easy first time experience, but then enslave you in their own isolated world, away from other programs.&lt;/p&gt;&lt;p&gt;You want to use tools that compose. You want to use programs that you can glue together with other programs. Programs that can be inside a for loop. &lt;/p&gt;&lt;p&gt;GUIs do not compose. Free yourself.&lt;/p&gt;&lt;h2&gt;Automation Tools&lt;/h2&gt;&lt;p&gt;For quick and easy things, there is nothing like a good old Bash shell. It is the only tool that has remained constantly useful in my 17 years of working experience.&lt;/p&gt;&lt;p&gt;For more complex tasks, just use whatever your production programming language is. It probably has tons of libraries available which you are already very proficient with.&lt;/p&gt;&lt;p&gt;Or maybe you could use that “forbidden” language, the one that you actually love, thus making the task doubly enjoyable.&lt;/p&gt;&lt;p&gt;Remember that &lt;strong&gt;you are a developer&lt;/strong&gt;. So develop. Write programs. Free yourself.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Write programs for yourself (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
A more efficient developer: master your IDE
</title>
<link>
https://danlebrero.com/2017/08/02/efficient-developer-master-your-ide/
</link>
<guid>
https://danlebrero.com/2017/08/02/efficient-developer-master-your-ide/
</guid>
<pubDate>
Wed, 02 Aug 2017 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;As a developer, you are going to spend thousands of hours working with your IDE or editor of choice. It is your main tool, you need to know how to get the most out of it.&lt;/p&gt;&lt;p&gt;Using your IDE 8 hours a day is not enough, you need to make a conscious and deliberate effort to master it. As a wise man once said:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://youtu.be/SMCsXl9SGgY?t=1m17s&quot;&gt;Wax on, Wax off&lt;/a&gt; &lt;cite&gt;Master Miyagi, The Karate Kid.&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;p&gt;You must learn:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;The shortcuts for all the functionality that you regularly use. You should rarely need to use your mouse.&lt;/li&gt;
  &lt;li&gt;Its features: read the release notes, watch online tutorials or follow some expert that blogs about it.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;If you happen to use Intellij IDEA, the Key Promoter plugin will help to learn the shortcuts and JetBrains provides a ton of online material. Follow their &lt;a href=&quot;https://blog.jetbrains.com/idea/&quot;&gt;blog&lt;/a&gt; and &lt;a href=&quot;https://www.youtube.com/user/intellijideavideo&quot;&gt;youtube channel&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;But the most effective way of learning your IDE is to do pair programming. As part of your daily job, each of your partners will teach you different features, and you will have the chance to teach them to others, creating a nice cross-pollination effect.&lt;/p&gt;&lt;p&gt;And you can always ask your partner to slap you every time that you reach for the mouse. A win-win situation.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/01/efficient-developer-disable-notifications/#content&quot;&gt;Disable notifications&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Master your IDE (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
<item>
<title>
A more efficient developer: disable notifications
</title>
<link>
https://danlebrero.com/2017/08/01/efficient-developer-disable-notifications/
</link>
<guid>
https://danlebrero.com/2017/08/01/efficient-developer-disable-notifications/
</guid>
<pubDate>
Tue, 01 Aug 2017 00:00:00 +0200
</pubDate>
<description>
&lt;p&gt;As part of my job as a reluctant architect, I have the privilege of teaching a “developer productivity” course, where I outline basic points that have helped me become a more &lt;a href=&quot;http://codingwithempathy.com/2017/01/24/efficiency-effectiveness-teams/&quot;&gt;efficient&lt;/a&gt; developer during my career.&lt;/p&gt;&lt;p&gt;I want to share one of those points today, one that will have a huge productivity impact with minimal effort:&lt;/p&gt;&lt;h3&gt;Disable the email pop up notifications.&lt;/h3&gt;&lt;p&gt;You don&amp;rsquo;t even want to see the number of unread emails in your taskbar. &lt;/p&gt;&lt;p&gt;In fact, you don’t need to see any notifications. Disable them all.&lt;/p&gt;&lt;p&gt;Don’t let them break your concentration.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;More about efficiency:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Disable notifications (you are here)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/02/efficient-developer-master-your-ide/#content&quot;&gt;Master your IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/08/03/efficient-developer-write-programs-for-yourself/#content&quot;&gt;Write programs for yourself&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2017/09/01/a-docker-compose-environment/#content&quot;&gt;Why to Docker Compose a calm environment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/04/30/did-you-read-my-email/#content&quot;&gt;Did you read my email?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/02/efficient-developer-rest-and-sleep/#content&quot;&gt;Go and have a rest&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2018/07/04/habits-of-efficient-developers-wearedevelopers-2018-video/#content&quot;&gt;The conference talk&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/02/18/other-reasons-for-test-driven-development-baby-steps-roi-evil-manager-watching-the-watchmen/#content&quot;&gt;Other reasons for TDD: Baby steps, ROI, Evil Manager Syndrome and Watching the watchmen&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2020/09/16/where-test-driven-development-falls-short-find-a-good-repl/#content&quot;&gt;Where TDD falls short, find yourself a good REPL&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
</item>
</channel>
</rss>
