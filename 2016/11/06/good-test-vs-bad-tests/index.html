<!DOCTYPE html>
<!--[if lt IE 8 ]><html class="no-js ie ie7" lang="en"> <![endif]--><!--[if IE 8 ]><html class="no-js ie ie8" lang="en"> <![endif]--><!--[if IE 9 ]><html class="no-js ie ie9" lang="en"> <![endif]--><!--[if (gte IE 9)|!(IE)]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head>

   <!--- Basic Page Needs
   ================================================== -->
   <meta charset="utf-8" />
	<title>Good tests, Bad tests</title>
	<meta content="Unit testing is just another practice, and as such it has its benefits and its costs. How do you know that your test suite is paying off? " name="description" /><meta content="api, bigdata, clojure, good_practices, java, testing, training, webapp" name="keywords" /><meta content="Daniel Lebrero Berna" name="author" /><meta content="Good tests, Bad tests" property="og:title" /><meta content="Unit testing is just another practice, and as such it has its benefits and its costs. How do you know that your test suite is paying off? " property="og:description" /><meta content="http://danlebrero.com/2016/11/06/good-test-vs-bad-tests/" property="og:url" /><meta content="Good tests, Bad tests" name="twitter:title" /><meta content="Unit testing is just another practice, and as such it has its benefits and its costs. How do you know that your test suite is paying off? " name="twitter:description" /><meta content="summary" name="twitter:card" /><meta content="http://danlebrero.com/img/ez@2x.png" name="twitter:image" /><meta content="http://danlebrero.com/img/ez@2x.png" property="og:image" />
	<meta name="twitter:site" content="@danlebrero" />
	<meta name="twitter:creator" content="@danlebrero" />

	<link rel="alternate" type="application/rss+xml" title="Daniel Lebrero Berna Blog" href="/feed.rss" />
	<!-- Mobile Specific Metas
    ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

	<!-- CSS
    ================================================== -->
   <link rel="stylesheet" href="/css/base.css" />
	<link rel="stylesheet" href="/css/main.css" />
   <link rel="stylesheet" href="/css/media-queries.css" />
   <link rel="stylesheet" href="/css/tomorrow-night.min.css" />
   <link rel="stylesheet" href="/css/shariff.min.css" />

   <!-- Script
   =================================================== -->
	<script src="/js/modernizr.js"></script>

   <!-- Favicons
	=================================================== -->
	<link rel="shortcut icon" href="/favicon.ico" />

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87361578-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>

   <div id="preloader">
	   <div id="status">
         <img src="/images/loader.gif" height="60" width="60" alt="" />
         <div class="loader">Loading...</div>
      </div>
   </div>

   <!-- Header
   =================================================== -->
   <header id="main-header">

   	<div class="row header-inner">

	      <!--div class="logo">
	         <a class="smoothscroll" href="#hero">Puremedia.</a>
	      </- -div-->

	      <nav id="nav-wrap">         
	         
	         <a class="mobile-btn" href="#nav-wrap" title="Show navigation">
	         	<span class="menu-text">Show Menu</span>
	         	<span class="menu-icon"></span>
	         </a>
         	<a class="mobile-btn" href="#" title="Hide navigation">
         		<span class="menu-text">Hide Menu</span>
         		<span class="menu-icon"></span>
         	</a>         

	         <ul id="nav" class="nav">
	            <li class="current"><a href="/">Home.</a></li>
				<!--<li id="menu-work"><a class="smoothscroll" href="/portfolio.html">Works.</a></li>-->
	            <li id="menu-archives"><a href="/archives/">Archives.</a></li>
	         </ul>

	      </nav> <!-- /nav-wrap -->	      

	   </div> <!-- /header-inner -->

   </header>


   <!-- Page Title
   ================================================== -->
   <section id="page-title">

		<div class="row">

			<div class="twelve columns">

				<p id="the-title"><a href="/">@DanLebrero<span>.</span></a></p>
				<p>software, simply</p>

			</div>

		</div> <!-- /row -->

   </section> <!-- /page-title -->


   <!-- Content
   ================================================== -->
   <section id="content">

   	<div class="row">

	   	<div id="main" class="tab-whole nine columns">

	         <article class="entry">

					<header class="entry-header">

						<h1 class="entry-title">Good tests, Bad tests</h1>

						<div class="entry-meta">
							<ul>
								<li id="entry-date">Sun, 6 Nov 2016</li>
							</ul>
						</div>

					</header>

				 <p class="lead" id="entry-summary">Unit testing is just another practice, and as such it has its benefits and its costs. How do you know that your test suite is paying off? </p>

				 

					<div class="entry-content"><p>Unit testing, as with any practice, can be taken to the absurd. I have already written at <a href="http://labs.ig.com/code-coverage-100-percent-tragedy">IG’s blog</a> about it.</p><p>The truth is that writing good tests is as hard as writing good production code. It takes practice and it requires careful thought, but so many times I have seen how tests are treated as second class citizens, which usually means that we do not reap the whole benefits of a good test suite, ending up with suites that are more of a burden than an asset.</p><p>A good test suite:</p>
<ol>
  <li>Gives you confidence.</li>
  <li>Finds bugs.</li>
  <li>Is cheap to maintain.</li>
  <li>Document the system.</li>
  <li>Robustness.</li>
  <li>Does not have bugs.</li>
  <li>Is run.</li>
</ol><h2>Confidence</h2><p>After making a change, is running your test enough to commit the code? And to deploy to production? </p><p>My experience tells me that unit tests are not enough and some kind of <a href="http://martinfowler.com/bliki/BroadStackTest.html">full stack</a>, BDD and integration tests are needed to raise the level of confidence.</p><p>Note that if two tests give you confidence in the same area/functionality, one of them is redundant.</p><p>Also, if you are really confident about your tests, but you are still shipping bugs to production, your confidence is misplaced.</p><h2>Find bugs</h2><p>If you have a test suite that never goes red, your tests are giving you no value as they are not catching any bugs, which is their main reason for being.</p><h2>Cheap to maintain</h2><p>If when you go to refactor you code, you find yourself expending any significant amount of time either fixing your tests or rewriting them, your test suite is not paying off. I have found this is especially true if your unit is the class and if you are using a lot of mock objects - in most cases you end up with <a href="http://xunitpatterns.com/Fragile%20Test.html#Overspecified%20Software">overspecified software</a>.</p><h2>Document</h2><p>Tests should tell us what the system does and ideally why it does it.</p><p>A minimum set of tests should also tell us how it does it, but with the expectation that those tests will be thrown away when we make a sizable refactoring.</p><h2>No bugs</h2><p>The best way to know that a test is testing what it is supposed to test, i.e. that the test has no bugs, is to see the test change from red to green when you make a change in your production code.</p><p>This is why you should write the test before the production code.</p><p>Also consider <a href="http://pitest.org">mutation testing</a> to find the blind spots on your suite.</p><h2>Robust</h2><p>If your test suite has a flaky test, one that randomly goes red, it will undermine the whole test suite as people stop caring about it.</p><p>It is better to remove the flaky tests than to keep them around.</p><h2>Run</h2><p>Maybe this sounds a little bit silly, but I have seen and written a lot of tests that did not invite to be run. These included:</p>
<ul>
  <li>Commented out or @Ignored tests.</li>
  <li>Very slow tests.</li>
  <li>Tests that require some manual step like installing a DB, an application container or a message broker.</li>
  <li>Tests that cannot be run or debugged from your IDE.</li>
</ul>
<hr /><p>In summary, a good test suite will be the pillar that allow us to evolve and change our systems.</p><p><strong>Tests must support change</strong>, not inhibit it.</p><p>At the end of the day, as Dave Thomas and Andy Hunt <a href="http://www.artima.com/intv/dry.html">wisely point out</a>, we are always changing an existing sytem.</p>
<blockquote><p>All programming is maintenance programming, because you are rarely writing original code.</p><p>It’s only the first 10 minutes that the code’s original, when you type it in the first time. That’s it.</p>
</blockquote></div>

				 


				 <p class="tags">
	  			     	<span>Tagged in </span>:
	  				  	<a href="/tags/good_practices/index.html">good practices </a><a href="/tags/testing/index.html">testing </a>
	  			   </p>

				 <div class="shariff" data-lang="en" data-twitter-via="danlebrero" data-services="[&quot;reddit&quot;,&quot;twitter&quot;, &quot;linkedin&quot;,&quot;facebook&quot;,&quot;googleplus&quot;]"></div>

				 <div id="pagenav" class="pagenav group">
		  			   <span class="prev"><a href="/2016/10/22/repl-driven-development-voxxed-days-belgrade-2016-video/#content" rel="prev">Previous</a></span>
		  				<span class="next"><a href="/2016/11/14/euroclojure-2016-slides/#content" rel="next">Next</a></span>
	  				</div>

				</article> <!-- /entry -->

	   	</div> <!-- /main -->

	      <div class="tab-whole three columns end" id="secondary">

				<aside id="sidebar">

	             <!-- /widget_search -->

	            <div class="widget widget_text">

	               <h5 class="widget-title">About me</h5>
	               <div class="textwidget">
					   <img class="pull-left" style="border-radius: 5a 0%;" src="http://en.gravatar.com/userimage/38792381/b0f54df774ad03c9b8c553be0af3b322.jpeg" />
					   Daniel Lebrero is a technical architect with more than 15 years of software development experience.
					   He works at the fin-tech IG, where he is involved in architecting the web platform, the analytics website and the big data solution.
					   A long time Java practitioner, he now also loves ().
					   <p>Reach me at <a href="https://twitter.com/DanLebrero"><i class="fa fa-twitter" aria-hidden="true"></i></a>,
						   drop me an <a href="mailto:dlebrero@gmail.com"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>
						   or connect with <a href="https://www.linkedin.com/in/danlebrero/"><i class="fa fa-linkedin" aria-hidden="true"></i></a>.</p>
				   </div>

					<h5 class="widget-title">Next talks</h5>
					<div class="textwidget">
						<a href="http://cfp.devoxx.pl/2017/speaker/daniel_lebrero"><img class="pull-left" src="/images/devoxx-pl-2017.jpg" /></a>
						<a href="http://www.jbcnconf.com/2017/infoSpeaker.html?ref=daniel-lebrero"><img src="/images/logo-jbcnconf.jpg" /></a>
					</div>

					<h5 class="widget-title">Disclaimer</h5>
					<div class="textwidget">
						<p></p>
						When I say <i>"most of the time"</i> it actually means <i>"most of the time for my experience, context and background"</i>.
						Yours will be different.
						<p></p>
						Most of the time, what we think is common, usual and the norm is uncommon, strange, surprising or crazy to a lot of people.
					</div>

			      </div> <!-- /widget_text -->

	            <div class="widget widget_categories">

	               <h5 class="widget-title">Categories</h5>
	               <ul id="categories" class="link-list group"><li><a href="/tags/Architecture/index.html">Architecture (5)</a></li><li><a href="/tags/Clojure/index.html">Clojure (11)</a></li><li><a href="/tags/Java/index.html">Java (2)</a></li><li><a href="/tags/good_practices/index.html">good practices (6)</a></li><li><a href="/tags/resilience/index.html">resilience (3)</a></li><li><a href="/tags/testing/index.html">testing (6)</a></li></ul>

	            </div> <!-- /widget_categories -->

				<div class="widget">
					<h5 class="widget-title"><a href="/archives/">Archives</a></h5>
					<a href="/feed.rss"><img src="/images/feed.png" /></a>
				</div>

	             <!-- /widget_tag_cloud -->

	         </aside> <!-- /sidebar -->

	      </div> <!-- /secondary -->

	   </div> <!-- /row -->

   </section> <!-- /content -->


   <!-- Footer
   ================================================== -->
   <footer>

	   <p class="copyright">© Copyright 2016 Daniel Lebrero. Design by <a href="http://www.styleshout.com/">Styleshout.</a></p>

	   <div id="go-top">
		   <a class="smoothscroll" title="Back to Top" href="#content"><span>Top</span><i class="fa fa-long-arrow-up"></i></a>
	   </div>


   </footer> <!-- /footer -->


   <!-- Java Script
   ================================================== -->
	<div id="scripts" style="display:none;">
	   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	   <script src="/js/jquery-1.10.2.min.js"></script>
	   <script type="text/javascript" src="/js/jquery-migrate-1.2.1.min.js"></script>
	   <script src="/js/jquery.flexslider.js"></script>
	   <script src="/js/jquery.fittext.js"></script>
	   <script src="/js/backstretch.js"></script>
	   <script src="/js/waypoints.js"></script>
	   <script src="/js/main.js"></script>
	   <script src="/js/highlight.pack.js"></script>
	   <script src="/js/shariff.min.js"></script>
	   <script>hljs.initHighlightingOnLoad();</script>
	   <script>
$(document).ready(function() {
	$(".shariff").find('a').each(function() {
		var which = $(this).attr("title").substr(9);;
		$(this).click(function(event) {
			ga('send', 'social', which, 'share', window.location.href);
		});
	});
});
		</script>
	   <div id="debug" style="display: none;">
	   </div>
   </div>


</body>

</html>